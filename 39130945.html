<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1706259658538" as="style"/><link rel="stylesheet" href="styles.css?v=1706259658538"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://interjectedfuture.com/crdts-turned-inside-out/">CRDTs Turned Inside Out</a> <span class="domain">(<a href="https://interjectedfuture.com">interjectedfuture.com</a>)</span></div><div class="subtext"><span>iamwil</span> | <span>29 comments</span></div><br/><div><div id="39136667" class="c"><input type="checkbox" id="c-39136667" checked=""/><div class="controls bullet"><span class="by">lxpz</span><span>|</span><a href="#39134507">next</a><span>|</span><label class="collapse" for="c-39136667">[-]</label><label class="expand" for="c-39136667">[3 more]</label></div><br/><div class="children"><div class="content">As the main author of the Merkle Search Tree paper, I&#x27;m really glad to see the design become more known and start to be used. I did not go on and build a practical system that made use of the structure, although I originally came up with the data structure while thinking about how to build decentralized social networks and data stores for collaborative applications. Thankfully, the design itself is generic and can be adpted to many use cases, and it&#x27;s great to see that people have gone as far as to build independant implementations in Go and Rust. I&#x27;d be curious to see how it performs in practice, in systems that have a real-world use, and not in the simplistic synthetic benchmark scenario of the paper. Hopefully it holds up to the promise :)</div><br/><div id="39139136" class="c"><input type="checkbox" id="c-39139136" checked=""/><div class="controls bullet"><span class="by">pfraze</span><span>|</span><a href="#39136667">parent</a><span>|</span><a href="#39136990">next</a><span>|</span><label class="collapse" for="c-39139136">[-]</label><label class="expand" for="c-39139136">[1 more]</label></div><br/><div class="children"><div class="content">At Martin Kleppman&#x27;s recommendation, we adopted MSTs for AT Protocol&#x27;s data repository structures. This isn&#x27;t my specialty so I wasn&#x27;t deeply involved in evaluating or implementing them, but my understanding is that the self-balancing was a deciding factor and that everyone has been very happy with the outcomes. You should chat with Dan Holmgren at some point if you&#x27;d like to hear about his experience with it. Appreciate your work.</div><br/></div></div><div id="39136990" class="c"><input type="checkbox" id="c-39136990" checked=""/><div class="controls bullet"><span class="by">iamwil</span><span>|</span><a href="#39136667">parent</a><span>|</span><a href="#39139136">prev</a><span>|</span><a href="#39134507">next</a><span>|</span><label class="collapse" for="c-39136990">[-]</label><label class="expand" for="c-39136990">[1 more]</label></div><br/><div class="children"><div class="content">I thought it was really neat when I came across it. There was a detail that I didn&#x27;t find in the paper (or might have missed).<p>What if the key you&#x27;re adding has a lot more (or a lot less) leading zeros in its hash than the number of leading zeros in the current root layer? Do you just add nodes in between the root and the new node? What should go in those in-between nodes?</div><br/></div></div></div></div><div id="39134507" class="c"><input type="checkbox" id="c-39134507" checked=""/><div class="controls bullet"><span class="by">tadfisher</span><span>|</span><a href="#39136667">prev</a><span>|</span><a href="#39134397">next</a><span>|</span><label class="collapse" for="c-39134507">[-]</label><label class="expand" for="c-39134507">[3 more]</label></div><br/><div class="children"><div class="content">Prolly trees are currently used (and maintained) in Dolt [1, 2], who dive a little deeper into the implementation.<p>[1]: <a href="https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2020-04-01-how-dolt-stores-table-data&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2020-04-01-how-dolt-stores-tabl...</a>
[2]: <a href="https:&#x2F;&#x2F;docs.dolthub.com&#x2F;architecture&#x2F;storage-engine&#x2F;prolly-tree" rel="nofollow">https:&#x2F;&#x2F;docs.dolthub.com&#x2F;architecture&#x2F;storage-engine&#x2F;prolly-...</a></div><br/><div id="39136025" class="c"><input type="checkbox" id="c-39136025" checked=""/><div class="controls bullet"><span class="by">zachmu</span><span>|</span><a href="#39134507">parent</a><span>|</span><a href="#39138345">next</a><span>|</span><label class="collapse" for="c-39136025">[-]</label><label class="expand" for="c-39136025">[1 more]</label></div><br/><div class="children"><div class="content">Our implementation of the Merkle DAG data structure is optimized for tabular data since Dolt is a SQL database, but a lot of it generalizes to other kinds of data. For example, we put a lot of work into making sure that chunk sizes had a predictable distribution, since very large chunks kill query performance:<p><a href="https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2022-06-27-prolly-chunker&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2022-06-27-prolly-chunker&#x2F;</a><p>We also have a lot of work to do with preserving structural sharing across schema changes, which we&#x27;re not great at yet.<p><a href="https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2024-01-19-structural-sharing-with-schema-changes&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.dolthub.com&#x2F;blog&#x2F;2024-01-19-structural-sharing-w...</a></div><br/></div></div><div id="39138345" class="c"><input type="checkbox" id="c-39138345" checked=""/><div class="controls bullet"><span class="by">jchanimal</span><span>|</span><a href="#39134507">parent</a><span>|</span><a href="#39136025">prev</a><span>|</span><a href="#39134397">next</a><span>|</span><label class="collapse" for="c-39138345">[-]</label><label class="expand" for="c-39138345">[1 more]</label></div><br/><div class="children"><div class="content">Fireproof uses a 2-layer CRDT (the inner CRDT is encrypted). We also use prolly-trees for indexing. You can read more about the storage engine here: <a href="https:&#x2F;&#x2F;fireproof.storage&#x2F;posts&#x2F;remote-access-crdt-wrapped-multi-writer-enabled-immutable-file-format&#x2F;" rel="nofollow">https:&#x2F;&#x2F;fireproof.storage&#x2F;posts&#x2F;remote-access-crdt-wrapped-m...</a><p>Edit to add: we extracted the outer blockstore so anyone doing immutable data or ipfs can take advantage of our sync connectors. <a href="https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;@fireproof&#x2F;encrypted-blockstore" rel="nofollow">https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;@fireproof&#x2F;encrypted-blockstor...</a></div><br/></div></div></div></div><div id="39134397" class="c"><input type="checkbox" id="c-39134397" checked=""/><div class="controls bullet"><span class="by">taylorius</span><span>|</span><a href="#39134507">prev</a><span>|</span><a href="#39138393">next</a><span>|</span><label class="collapse" for="c-39134397">[-]</label><label class="expand" for="c-39134397">[14 more]</label></div><br/><div class="children"><div class="content">I think the article would benefit from quickly defining what a CRDT is - (Conflict free Replicated Data Type). Even just expanding the acronym once would give a bit of an idea.</div><br/><div id="39134489" class="c"><input type="checkbox" id="c-39134489" checked=""/><div class="controls bullet"><span class="by">iamwil</span><span>|</span><a href="#39134397">parent</a><span>|</span><a href="#39135298">next</a><span>|</span><label class="collapse" for="c-39134489">[-]</label><label class="expand" for="c-39134489">[2 more]</label></div><br/><div class="children"><div class="content">Ah, I&#x27;ll put it in as a note in the beginning. You can see a more basic introduction in a previous post I wrote:<p><a href="https:&#x2F;&#x2F;interjectedfuture.com&#x2F;trade-offs-between-different-crdts&#x2F;" rel="nofollow">https:&#x2F;&#x2F;interjectedfuture.com&#x2F;trade-offs-between-different-c...</a><p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38916647">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=38916647</a><p>Here&#x27;s some introductory material I found helpful:<p>- [An interactive intro to CRDTs](<a href="https:&#x2F;&#x2F;jakelazaroff.com&#x2F;words&#x2F;an-interactive-intro-to-crdts&#x2F;" rel="nofollow">https:&#x2F;&#x2F;jakelazaroff.com&#x2F;words&#x2F;an-interactive-intro-to-crdts...</a>)<p>- [An introduction to state-based CRDTs](<a href="https:&#x2F;&#x2F;www.bartoszsypytkowski.com&#x2F;the-state-of-a-state-based-crdts&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.bartoszsypytkowski.com&#x2F;the-state-of-a-state-base...</a>)<p>- [CRDTs for non-academics](<a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=vBU70EjwGfw" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=vBU70EjwGfw</a>)<p>- [CRDT: The Hard Parts](<a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=x7drE24geUw" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=x7drE24geUw</a>)<p>- [Readings in CRDTs](<a href="https:&#x2F;&#x2F;christophermeiklejohn.com&#x2F;crdt&#x2F;2014&#x2F;07&#x2F;22&#x2F;readings-in-crdts.html" rel="nofollow">https:&#x2F;&#x2F;christophermeiklejohn.com&#x2F;crdt&#x2F;2014&#x2F;07&#x2F;22&#x2F;readings-i...</a>)<p>- [crdt.tech](<a href="https:&#x2F;&#x2F;crdt.tech" rel="nofollow">https:&#x2F;&#x2F;crdt.tech</a>)</div><br/><div id="39139624" class="c"><input type="checkbox" id="c-39139624" checked=""/><div class="controls bullet"><span class="by">taylorius</span><span>|</span><a href="#39134397">root</a><span>|</span><a href="#39134489">parent</a><span>|</span><a href="#39135298">next</a><span>|</span><label class="collapse" for="c-39139624">[-]</label><label class="expand" for="c-39139624">[1 more]</label></div><br/><div class="children"><div class="content">Thanks! Interesting stuff!</div><br/></div></div></div></div><div id="39135298" class="c"><input type="checkbox" id="c-39135298" checked=""/><div class="controls bullet"><span class="by">h4ch1</span><span>|</span><a href="#39134397">parent</a><span>|</span><a href="#39134489">prev</a><span>|</span><a href="#39136599">next</a><span>|</span><label class="collapse" for="c-39135298">[-]</label><label class="expand" for="c-39135298">[4 more]</label></div><br/><div class="children"><div class="content">I usually just do a quick search on hn.algolia for previous discussions regarding a topic since I somehow imbibe information faster through reading discourse, where different opinions&#x2F;viewpoints help me wrap my head around a concept faster. 
Also have noticed the same topic is often shared through different mediums (videos&#x2F;articles), that also helps, getting curated, diverse content.<p>May not be the same for you, but just a random observation d:)</div><br/><div id="39135977" class="c"><input type="checkbox" id="c-39135977" checked=""/><div class="controls bullet"><span class="by">sitkack</span><span>|</span><a href="#39134397">root</a><span>|</span><a href="#39135298">parent</a><span>|</span><a href="#39136599">next</a><span>|</span><label class="collapse" for="c-39135977">[-]</label><label class="expand" for="c-39135977">[3 more]</label></div><br/><div class="children"><div class="content">Mixture of debating armchair experts.</div><br/><div id="39140010" class="c"><input type="checkbox" id="c-39140010" checked=""/><div class="controls bullet"><span class="by">sroussey</span><span>|</span><a href="#39134397">root</a><span>|</span><a href="#39135977">parent</a><span>|</span><a href="#39136372">next</a><span>|</span><label class="collapse" for="c-39140010">[-]</label><label class="expand" for="c-39140010">[1 more]</label></div><br/><div class="children"><div class="content">Should be added 7B to help people make the connection. ;)</div><br/></div></div><div id="39136372" class="c"><input type="checkbox" id="c-39136372" checked=""/><div class="controls bullet"><span class="by">vacuity</span><span>|</span><a href="#39134397">root</a><span>|</span><a href="#39135977">parent</a><span>|</span><a href="#39140010">prev</a><span>|</span><a href="#39136599">next</a><span>|</span><label class="collapse" for="c-39136372">[-]</label><label class="expand" for="c-39136372">[1 more]</label></div><br/><div class="children"><div class="content">Sometimes threads will veer off into opinionated fights, but there&#x27;s something wonderful about the threads where people chime in on a topic and keep building on the content. I often learn something new from those.</div><br/></div></div></div></div></div></div><div id="39136599" class="c"><input type="checkbox" id="c-39136599" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#39134397">parent</a><span>|</span><a href="#39135298">prev</a><span>|</span><a href="#39137148">next</a><span>|</span><label class="collapse" for="c-39136599">[-]</label><label class="expand" for="c-39136599">[5 more]</label></div><br/><div class="children"><div class="content">Disagree. CRDT is pretty much a word at this point, searching for the acronym will get you more useful results than expanding it.</div><br/><div id="39137139" class="c"><input type="checkbox" id="c-39137139" checked=""/><div class="controls bullet"><span class="by">koolba</span><span>|</span><a href="#39134397">root</a><span>|</span><a href="#39136599">parent</a><span>|</span><a href="#39138627">next</a><span>|</span><label class="collapse" for="c-39137139">[-]</label><label class="expand" for="c-39137139">[3 more]</label></div><br/><div class="children"><div class="content">Without context it’s impossible to know the topic though. Given the audience here, my first thought at the title was something k8s related for Custom Resource Definition Templates?</div><br/><div id="39137251" class="c"><input type="checkbox" id="c-39137251" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#39134397">root</a><span>|</span><a href="#39137139">parent</a><span>|</span><a href="#39138627">next</a><span>|</span><label class="collapse" for="c-39137251">[-]</label><label class="expand" for="c-39137251">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Without context it’s impossible to know the topic though.<p>The topic is CRDTs; of course if you don&#x27;t know what that is you have to look it up, but that&#x27;s true for any word you might find in a headline (e.g. Fortnite, looking at the front page).<p>&gt; Given the audience here, my first thought at the title was something k8s related for Custom Resource Definition Templates?<p>Searching for &quot;CRDT&quot; gets me at least 3 pages of nothing but CRDTs, and nothing about Custom Resource Definition Templates. So I think the meaning is pretty established.</div><br/><div id="39137770" class="c"><input type="checkbox" id="c-39137770" checked=""/><div class="controls bullet"><span class="by">squeaky-clean</span><span>|</span><a href="#39134397">root</a><span>|</span><a href="#39137251">parent</a><span>|</span><a href="#39138627">next</a><span>|</span><label class="collapse" for="c-39137770">[-]</label><label class="expand" for="c-39137770">[1 more]</label></div><br/><div class="children"><div class="content">That Fortnite article still explains what Fortnite is in the opening. &quot;The  Epic Games  Store will include popular game Fortnite&quot;. They&#x27;re not asking for it to be forced into the title, just somewhere near the top of the page.</div><br/></div></div></div></div></div></div><div id="39138627" class="c"><input type="checkbox" id="c-39138627" checked=""/><div class="controls bullet"><span class="by">eru</span><span>|</span><a href="#39134397">root</a><span>|</span><a href="#39136599">parent</a><span>|</span><a href="#39137139">prev</a><span>|</span><a href="#39137148">next</a><span>|</span><label class="collapse" for="c-39138627">[-]</label><label class="expand" for="c-39138627">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s why you give both the acronym and expand it.</div><br/></div></div></div></div><div id="39135434" class="c"><input type="checkbox" id="c-39135434" checked=""/><div class="controls bullet"><span class="by">echelon</span><span>|</span><a href="#39134397">parent</a><span>|</span><a href="#39137148">prev</a><span>|</span><a href="#39138393">next</a><span>|</span><label class="collapse" for="c-39135434">[-]</label><label class="expand" for="c-39135434">[1 more]</label></div><br/><div class="children"><div class="content">tl;dr - &quot;multiplayer web apps&quot;<p>The technical specifics can follow.</div><br/></div></div></div></div><div id="39138393" class="c"><input type="checkbox" id="c-39138393" checked=""/><div class="controls bullet"><span class="by">hecturchi</span><span>|</span><a href="#39134397">prev</a><span>|</span><a href="#39135392">next</a><span>|</span><label class="collapse" for="c-39138393">[-]</label><label class="expand" for="c-39138393">[3 more]</label></div><br/><div class="children"><div class="content">I&#x27;m the main author of the Merkle-DAGs CRDTs and I&#x27;m very happy to see this here. I&#x27;m a bit sorry now that I used the &quot;Merkle-CRDT&quot; name all over the paper because Merkle-Search-Trees CRDTs also deserve that tag.<p>I think it is good to explain Merkle-DAG CRDTs (MD-CRDTs) as &quot;merklerized &quot;op-based CRDTs&quot;, and I would add that Merkle-Search-Tree CRDTs (MST-CRDTs) are akin to &quot;state-based&quot; CRDTs, to complete the analogy. This helps to bridge traditional and Merkle CRDTs and I would probably introduce it the same way, but it is also not quite right when going into some more depth. I will try to explain why.<p>In MD-CRDTs we have a growing-DAG that works like a chain of operations that are applied in the order that the DAG is traversed. It looks a lot like an operation log, except it can have multiple branches and, if we follow my paper, operations do not need to have any total order (unlike op-based crdts). We know the latest operation in the DAG (the root node) happened AFTER its children, so there is an embedded notion of order. However, if it has multiple children, we don&#x27;t know how to order the operations in their respective branches, and we don&#x27;t need to because they should be commutative etc. For that to work, the paper explains that DAG-nodes embed not operations, but &quot;state deltas&quot;. So in reality, MD-CRDTs are delta-based crdts where the merkle-dag structure stores the deltas as they are broadcasted from replicas. It&#x27;s just that deltas look a lot like operations.<p>In MST-CRDTs, if my understanding is correct, replicas will be broadcasting the roots of the DAG pointing the full state (similar to state-based CRDTs broadcasting the full state). However, thanks to Merklelization etc., changes to the state only update sections of the full DAG, and diffing, retrieving or broadcasting only the changed parts is super easy and very compact. Since the nodes values will be CRDTs themselves, they can be merged on conflict just fine. In practice, it is sort of also dealing with delta-crdts.<p>The main thing in both is that reconstructing the full state from deltas is easy and efficient because everything is linked, so you just follow links and drop branches that you already have. Deltas without headaches.<p>Perhaps another way to conceptually understand both is that in MD-CRDTs, you add DAG-nodes to the top of the DAG as root DAG nodes, leaving the bottom of the DAG untouched. In MST-CRDTs, you add dag nodes to the bottom (the leaves) of the DAG, which cascades into having new root DAG nodes. In both cases you broadcast new root DAG nodes and the rest of people traverse and sync.<p>Now, what are the practical consequences for implementations:<p>- The main problem in pure MD-CRDTs (with no caveats) is the unbounded growth (ala blockchain) even when the state becomes smaller. This only matters if you plan to delete or overwrite things from the state. In MST-CRDTs it is &quot;easy&quot; to discard orphaned data. However, one of the main advantages in MD-CRDTs is that &quot;syncing&quot; happens from the last operation&#x2F;delta. This can be important if you care about having certain notion of order, i.e. that &quot;elements added last&quot; are the first ones to be synced into an empty replica. Another advantage may be to be able to reconstruct multiple views of the same state by re-traversing the DAG, which has &quot;everything&quot;.<p>- MST-CRDTs are very good for database tables, syncing is very efficient, things are compact. I haven&#x27;t implemented them myself but they seem quite adequate for that use-case. When thinking of downsides, I wonder if they suffer from the cost of re-hashing operations as they grow with a very large number of keys and with heavy usage (larger blocks to hash or more levels to update). One very important advantage of MST-CRDTs is that they are more resilient if a leave-DAG-node is unretrivable. In MD-CRDTs an unretrievable DAG node can break DAG-traversal and with it a large portion of the state while in MST-CRDTs, this will affect only a key or a set of keys related to the missing DAG node.<p>In the end, for both the devil will be in implementation details: how good is your pubsub code? How good and parallelizable is your update-processing code? How good is your GC process? How good is your blockstore? All those things become performance bottlenecks even when the theoretical properties work perfectly.</div><br/><div id="39138437" class="c"><input type="checkbox" id="c-39138437" checked=""/><div class="controls bullet"><span class="by">hecturchi</span><span>|</span><a href="#39138393">parent</a><span>|</span><a href="#39139139">next</a><span>|</span><label class="collapse" for="c-39138437">[-]</label><label class="expand" for="c-39138437">[1 more]</label></div><br/><div class="children"><div class="content">I forgot: key-value store using MD-CRDTs was implemented here: <a href="https:&#x2F;&#x2F;github.com&#x2F;ipfs&#x2F;go-ds-crdt">https:&#x2F;&#x2F;github.com&#x2F;ipfs&#x2F;go-ds-crdt</a><p>The trickiest part was not the CRDT, but the DAG traversal with multiple workers processing parallel updates on multiple branches and switching CRDT-DAG roots as they finish branches.</div><br/></div></div><div id="39139139" class="c"><input type="checkbox" id="c-39139139" checked=""/><div class="controls bullet"><span class="by">iamwil</span><span>|</span><a href="#39138393">parent</a><span>|</span><a href="#39138437">prev</a><span>|</span><a href="#39135392">next</a><span>|</span><label class="collapse" for="c-39139139">[-]</label><label class="expand" for="c-39139139">[1 more]</label></div><br/><div class="children"><div class="content">Were you inspired by Git? How did you come up with MD-CRDTs?</div><br/></div></div></div></div><div id="39135392" class="c"><input type="checkbox" id="c-39135392" checked=""/><div class="controls bullet"><span class="by">LAC-Tech</span><span>|</span><a href="#39138393">prev</a><span>|</span><label class="collapse" for="c-39135392">[-]</label><label class="expand" for="c-39135392">[5 more]</label></div><br/><div class="children"><div class="content"><i>Normally, this is the job of vector clocks in State-based CRDTs</i><p>Is the author mistaking vector clocks for version vectors? If so he would not be the first; the famous Amazon Dynamo white paper makes the same mistake when discussing their CRDT implemenetation. But verson vectors and vector clocks are different things.<p>Alternately, I may be ignorant of a class of CRDTs solved with vector clocks.</div><br/><div id="39137374" class="c"><input type="checkbox" id="c-39137374" checked=""/><div class="controls bullet"><span class="by">iamwil</span><span>|</span><a href="#39135392">parent</a><span>|</span><a href="#39135547">next</a><span>|</span><label class="collapse" for="c-39137374">[-]</label><label class="expand" for="c-39137374">[1 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re correct. Thanks for the correction. I&#x27;ve updated the post.<p>The difference is subtle, and for those interested, the difference is detailed here: <a href="https:&#x2F;&#x2F;haslab.wordpress.com&#x2F;2011&#x2F;07&#x2F;08&#x2F;version-vectors-are-not-vector-clocks&#x2F;" rel="nofollow">https:&#x2F;&#x2F;haslab.wordpress.com&#x2F;2011&#x2F;07&#x2F;08&#x2F;version-vectors-are-...</a><p>Vector Clocks need to establish a partial order among a, potentially ever growing, set of events occurring in the processes.<p>Version Vectors need to establish a partial order (more precisely a pre-order) among the replicas in the distributed system.</div><br/></div></div><div id="39135547" class="c"><input type="checkbox" id="c-39135547" checked=""/><div class="controls bullet"><span class="by">macintux</span><span>|</span><a href="#39135392">parent</a><span>|</span><a href="#39137374">prev</a><span>|</span><label class="collapse" for="c-39135547">[-]</label><label class="expand" for="c-39135547">[3 more]</label></div><br/><div class="children"><div class="content">At Basho, we also got version vectors and vector clocks reversed, probably thanks to the Dynamo paper. As I recall, it&#x27;s a subtle difference.</div><br/><div id="39137239" class="c"><input type="checkbox" id="c-39137239" checked=""/><div class="controls bullet"><span class="by">0x457</span><span>|</span><a href="#39135392">root</a><span>|</span><a href="#39135547">parent</a><span>|</span><a href="#39136194">next</a><span>|</span><label class="collapse" for="c-39137239">[-]</label><label class="expand" for="c-39137239">[1 more]</label></div><br/><div class="children"><div class="content">IIRC clocks are incremented every time peer sends or receives information, while versions incremented only on mutations.</div><br/></div></div><div id="39136194" class="c"><input type="checkbox" id="c-39136194" checked=""/><div class="controls bullet"><span class="by">LAC-Tech</span><span>|</span><a href="#39135392">root</a><span>|</span><a href="#39135547">parent</a><span>|</span><a href="#39137239">prev</a><span>|</span><label class="collapse" for="c-39136194">[-]</label><label class="expand" for="c-39136194">[1 more]</label></div><br/><div class="children"><div class="content">Yeah version vectors were first coined in a very underrated paper from 4 decades ago; &quot;Detection of Mutual Inconsistency in Distributed Systems&quot; [0].<p>In it they not only invent version vectors, they also perfectly describe what came to be known as the &quot;multi-value register CRDT&quot;, some three decades before the term was coined. (Amazon Dyano paper does the same, but only a few years before).<p>Also, it contains this line which always makes me laugh:<p><i>Network partitioning can completely destroy mutual consistency in the worst case, and this fact has led to a certain amount of restrictiveness, vagueness, and even nervousness in past discussions, of how it may be handled.</i><p>[0] <a href="https:&#x2F;&#x2F;pages.cs.wisc.edu&#x2F;~remzi&#x2F;Classes&#x2F;739&#x2F;Fall2018&#x2F;Papers&#x2F;parker83detection.pdf" rel="nofollow">https:&#x2F;&#x2F;pages.cs.wisc.edu&#x2F;~remzi&#x2F;Classes&#x2F;739&#x2F;Fall2018&#x2F;Papers...</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>