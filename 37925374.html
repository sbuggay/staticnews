<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1697706062620" as="style"/><link rel="stylesheet" href="styles.css?v=1697706062620"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.demofox.org/2023/10/17/fractional-factorial-experiment-design-when-there-are-too-many-experiments-to-do/">Fractional Factorial Experiment Design: There Are Too Many Experiments to Do</a> <span class="domain">(<a href="https://blog.demofox.org">blog.demofox.org</a>)</span></div><div class="subtext"><span>ingve</span> | <span>27 comments</span></div><br/><div><div id="37940238" class="c"><input type="checkbox" id="c-37940238" checked=""/><div class="controls bullet"><span class="by">MauranKilom</span><span>|</span><a href="#37939146">next</a><span>|</span><label class="collapse" for="c-37940238">[-]</label><label class="expand" for="c-37940238">[1 more]</label></div><br/><div class="children"><div class="content">Not exactly the same topic, but I feel like this is a good context to bring up <a href="https:&#x2F;&#x2F;extremelearning.com.au&#x2F;unreasonable-effectiveness-of-quasirandom-sequences&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;extremelearning.com.au&#x2F;unreasonable-effectiveness-of...</a>.<p>It provides (in some sense) maximally un-aliased parameter choices when trying to cover a (continuous) parameter space. It generalizes to arbitrary dimensions, doesn&#x27;t require you to choose the number of samples&#x2F;experiments beforehand, and actually expands trivially to parameters representing classes (including possibly weighting the classes).<p>I think it would be interesting to see how using this sequence fares in such a fractional factorial analysis, i.e. how close to optimal the (e.g. binarized) pseudorandom parameter choices are for different numbers of experiments!</div><br/></div></div><div id="37939146" class="c"><input type="checkbox" id="c-37939146" checked=""/><div class="controls bullet"><span class="by">wenc</span><span>|</span><a href="#37940238">prev</a><span>|</span><a href="#37939537">next</a><span>|</span><label class="collapse" for="c-37939146">[-]</label><label class="expand" for="c-37939146">[4 more]</label></div><br/><div class="children"><div class="content">I studied Design of Experiments (DOE) in college -- it was part of the core curriculum in my major. The content feels like it ought to be very useful (it&#x27;s basically techniques on how to conduct experiments efficiently and reducing the number of runs, thus reducing overall cost).... yet I&#x27;ve never had occasion to ever apply it.<p>One area where I feel it might be relevant to my work is in hyperparameter tuning, especially when function evals are expensive. Instead of doing grid search (which is a brute-force exhaustive search), fractional factorial designs can search the multidimensional space with way less function evals. Yet I don&#x27;t do it because it&#x27;s easier to write code to do brute force and let the computer chug away over night.<p>In the world of web analytics, fractional factorial lets you run multivariate experiments efficiently rather than a combinatorial combination of A&#x2F;B tests. From online articles, I&#x27;m guessing people do use it there, but A&#x2F;B tests still dominate.<p>Fractional factorial is also most effective when the covariates are orthogonal and independent, which is rarely the case. We can get around this by projecting high dimensional covariates into lower dimensional space using PCA, which guarantees orthogonality, but this also seems to not be done so much.<p>Just wondering if anyone is using fractional factorial designs in real life? (or optimal designs like D-optimal designs)</div><br/><div id="37939933" class="c"><input type="checkbox" id="c-37939933" checked=""/><div class="controls bullet"><span class="by">stdbrouw</span><span>|</span><a href="#37939146">parent</a><span>|</span><a href="#37940112">next</a><span>|</span><label class="collapse" for="c-37939933">[-]</label><label class="expand" for="c-37939933">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Fractional factorial is also most effective when the covariates are orthogonal and independent, which is rarely the case. We can get around this by projecting high dimensional covariates into lower dimensional space using PCA, which guarantees orthogonality, but this also seems to not be done so much.<p>I guess you&#x27;re right in that if there were very many interactions between variables, then the aliasing of a fractional design would be an incredible nuisance, but on the other hand if there were no dependence between any of the  variables at all then there would be no point to any sort of factorial design as you could just test each variable sequentially.<p>&gt; Just wondering if anyone is using fractional factorial designs in real life? (or optimal designs like D-optimal designs)<p>I have to admit, I have never ever seen anyone calculate a D-optimal or G-optimal design for anything -- that said, I only graduated as a statistician 6 or 7 years ago. As you say, there might be some use to it for continuous variables but for factors, given that latin squares (etc.) are known to be optimal so you can just grab that off the shelf.</div><br/></div></div><div id="37940112" class="c"><input type="checkbox" id="c-37940112" checked=""/><div class="controls bullet"><span class="by">conjectures</span><span>|</span><a href="#37939146">parent</a><span>|</span><a href="#37939933">prev</a><span>|</span><a href="#37940230">next</a><span>|</span><label class="collapse" for="c-37940112">[-]</label><label class="expand" for="c-37940112">[1 more]</label></div><br/><div class="children"><div class="content">I think in many industrial settings Bayesian optimisation is more practical.
Since it allows use to refine our design on the fly and put resources into promising areas of the space earlier. Some kind of pre-planned fractional design could be useful for generating an initial set of points to test.</div><br/></div></div><div id="37940230" class="c"><input type="checkbox" id="c-37940230" checked=""/><div class="controls bullet"><span class="by">thereisnospork</span><span>|</span><a href="#37939146">parent</a><span>|</span><a href="#37940112">prev</a><span>|</span><a href="#37939537">next</a><span>|</span><label class="collapse" for="c-37940230">[-]</label><label class="expand" for="c-37940230">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve at times made fairly extensive use of d-optimal designs in formulation type research and development, usually in an iterative process, pruning and adding variables as well as refining ranges. Lot of footguns, but the approach can drastically decrease optimization time. In my experience it needs the right combination of: too many factors to make full factorial reasonable, too much (expected) covariance to trust single-vaeiable optimization, and cheap enough to commit to doing 8+ experiments before a major evaluation.</div><br/></div></div></div></div><div id="37939537" class="c"><input type="checkbox" id="c-37939537" checked=""/><div class="controls bullet"><span class="by">dan_mctree</span><span>|</span><a href="#37939146">prev</a><span>|</span><a href="#37937690">next</a><span>|</span><label class="collapse" for="c-37939537">[-]</label><label class="expand" for="c-37939537">[2 more]</label></div><br/><div class="children"><div class="content">Is it just me or does this require background knowledge that isn&#x27;t widely available? I couldn&#x27;t get through it as it never seemed to really explain what Aliases or Alias structures are, how determining those aliasing structures works (why multiply by C?), how this primary effect thing works and how any of this actually relates to the experiments in any way. As in, like, ok I do tests 1-4, now how do I turn that into insight with this algebra?<p>If someone could elaborate how this all fits together that would be great, because it does seem like there&#x27;s some nuggets of insight to be found here</div><br/><div id="37939644" class="c"><input type="checkbox" id="c-37939644" checked=""/><div class="controls bullet"><span class="by">stdbrouw</span><span>|</span><a href="#37939537">parent</a><span>|</span><a href="#37937690">next</a><span>|</span><label class="collapse" for="c-37939644">[-]</label><label class="expand" for="c-37939644">[1 more]</label></div><br/><div class="children"><div class="content">Let&#x27;s say you&#x27;re testing different formulations for cake but because you don&#x27;t have time to do the full cartesian product of all possible variations over sugar content x fat content x type of flour, you just pick a handful, and it turns out that every time you&#x27;re testing a high-sugar variation you are also testing spelt flour -- that&#x27;s an alias because if you really like these particular cakes there&#x27;s no way to know whether it was the spelt or the sugar that did it.<p>What experimental design brings to the table is a disciplined way to figure out what variables will be aliased and to make sure that these aliases are mostly harmless, either with the help of subject matter knowledge (you can taste sugar so it&#x27;s fine if it&#x27;s aliased with other things) or mathematically (let&#x27;s try to avoid aliasing sugar content with fat content, but instead alias sugar content with the interaction effect of sugar, fat and flour type because that higher-order interaction is unlikely to matter over and above the first-order effects.)<p>Fractional designs in particular are typically used in agriculture and industrial settings, places where you want to try to optimize over very many factors at once but cannot afford to test every variation. It is not common in web analytics because (1) we usually assume that one particular change to a site or app will be independent of another change elsewhere, so there is no need to test them concurrently to see if a particular combo stands out and (2) if we did want to test combinations of variables concurrently, there&#x27;s usually enough users or visitors to just test the entire grid and not worry about picking a selection of variations.</div><br/></div></div></div></div><div id="37937690" class="c"><input type="checkbox" id="c-37937690" checked=""/><div class="controls bullet"><span class="by">alright2565</span><span>|</span><a href="#37939537">prev</a><span>|</span><a href="#37938733">next</a><span>|</span><label class="collapse" for="c-37937690">[-]</label><label class="expand" for="c-37937690">[2 more]</label></div><br/><div class="children"><div class="content">By coincidence, I just watched this video on this same topic: <a href="https:&#x2F;&#x2F;m.youtube.com&#x2F;watch?v=5oULEuOoRd0">https:&#x2F;&#x2F;m.youtube.com&#x2F;watch?v=5oULEuOoRd0</a><p>The visualizations and the real problem solving demonstrated made it much easier (for me) to intuitively understand than any amount of reading</div><br/><div id="37939762" class="c"><input type="checkbox" id="c-37939762" checked=""/><div class="controls bullet"><span class="by">danbruc</span><span>|</span><a href="#37937690">parent</a><span>|</span><a href="#37938733">next</a><span>|</span><label class="collapse" for="c-37939762">[-]</label><label class="expand" for="c-37939762">[1 more]</label></div><br/><div class="children"><div class="content">This article is actually in response to that video by NightHawkInLight, the method used in the video is however different from the one explained in the article, at least that is what the first paragraphs say, I did not read it completely.</div><br/></div></div></div></div><div id="37938733" class="c"><input type="checkbox" id="c-37938733" checked=""/><div class="controls bullet"><span class="by">interleave</span><span>|</span><a href="#37937690">prev</a><span>|</span><a href="#37937915">next</a><span>|</span><label class="collapse" for="c-37938733">[-]</label><label class="expand" for="c-37938733">[1 more]</label></div><br/><div class="children"><div class="content">Wow. As an experiment-design nerd, this may be one of my personal top favorite HN posts of all time.<p>I don&#x27;t 100% get the generation part yet, but I believe that&#x27;s just me needing practice.<p>A long time ago back in New York, Grace and Trevor from Javelin (Née Lean Startup Machine) taught me the scientific method over the course of a weekend workshop.<p>Still, to this day, I use their experiment design process and I am grateful for it. <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=F-5Iyj9A1MU">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=F-5Iyj9A1MU</a><p>Thank you demofox for sharing!</div><br/></div></div><div id="37937915" class="c"><input type="checkbox" id="c-37937915" checked=""/><div class="controls bullet"><span class="by">wyldfire</span><span>|</span><a href="#37938733">prev</a><span>|</span><a href="#37937924">next</a><span>|</span><label class="collapse" for="c-37937915">[-]</label><label class="expand" for="c-37937915">[1 more]</label></div><br/><div class="children"><div class="content">NIST has a combinatorial test engine designed for combining feature settings to maximize coverage for N tests.<p><a href="https:&#x2F;&#x2F;csrc.nist.gov&#x2F;projects&#x2F;automated-combinatorial-testing-for-software" rel="nofollow noreferrer">https:&#x2F;&#x2F;csrc.nist.gov&#x2F;projects&#x2F;automated-combinatorial-testi...</a></div><br/></div></div><div id="37937924" class="c"><input type="checkbox" id="c-37937924" checked=""/><div class="controls bullet"><span class="by">penteract</span><span>|</span><a href="#37937915">prev</a><span>|</span><a href="#37938554">next</a><span>|</span><label class="collapse" for="c-37937924">[-]</label><label class="expand" for="c-37937924">[2 more]</label></div><br/><div class="children"><div class="content">Something about this doesn&#x27;t make sense - from the C=A case:<p>&gt; we wouldn’t be able to tell the difference in results between only doing option B (doubling the butter) and doing all three options: adding an egg, doubling the butter, and adding nuts on top.<p>However, the experiments listed include exactly those 2 experiments (Test 1 and Test 3 in the table with a column titled C=A), so unless I&#x27;m missing something, &quot;wouldn&#x27;t be able to tell the difference&quot; doesn&#x27;t mean what I expect it to.</div><br/><div id="37940274" class="c"><input type="checkbox" id="c-37940274" checked=""/><div class="controls bullet"><span class="by">kawzeg</span><span>|</span><a href="#37937924">parent</a><span>|</span><a href="#37938554">next</a><span>|</span><label class="collapse" for="c-37940274">[-]</label><label class="expand" for="c-37940274">[1 more]</label></div><br/><div class="children"><div class="content">Similarly:<p>&gt; Lastly, I = AC means that we can’t tell the difference between doing nothing at all, compared to adding an egg and adding nuts on top.<p>But test 0 and test 2 are doing nothing and adding an egg &amp; nuts respectively. What are we missing here?</div><br/></div></div></div></div><div id="37938554" class="c"><input type="checkbox" id="c-37938554" checked=""/><div class="controls bullet"><span class="by">noqc</span><span>|</span><a href="#37937924">prev</a><span>|</span><a href="#37938649">next</a><span>|</span><label class="collapse" for="c-37938554">[-]</label><label class="expand" for="c-37938554">[3 more]</label></div><br/><div class="children"><div class="content">I have studied at least a little combinatorics, and the language here is completely inpenetrable to me. Neither the question of &quot;what property is this design supposed to have?&quot; or &quot;why does it have it?&quot; are stated in plain or even mathematical english. The wiki entry is similarly unhelpful.</div><br/><div id="37938723" class="c"><input type="checkbox" id="c-37938723" checked=""/><div class="controls bullet"><span class="by">usgroup</span><span>|</span><a href="#37938554">parent</a><span>|</span><a href="#37938684">next</a><span>|</span><label class="collapse" for="c-37938723">[-]</label><label class="expand" for="c-37938723">[1 more]</label></div><br/><div class="children"><div class="content">In a full factorial design you’re able to calculate the main effects and all the interactions between everything and everything else: not just pairwise but all combinations of variables.<p>You may not care for that because you don’t think there are such interactions or perhaps you just don’t have the experimental budget.<p>In fractional designs you can chose to confound some of the interactions so that you can’t tell what’s happening beyond a certain level. Eg just main and pairwise effects, with the rest confounding those effects. You would do this because it requires fewer runs.<p>You can also use it as a sort of screener when you have many variables by confounding things together in such a way that you can at least tell which variables are having the effects even if you can’t calculate the individual effects.</div><br/></div></div><div id="37938684" class="c"><input type="checkbox" id="c-37938684" checked=""/><div class="controls bullet"><span class="by">acyou</span><span>|</span><a href="#37938554">parent</a><span>|</span><a href="#37938723">prev</a><span>|</span><a href="#37938649">next</a><span>|</span><label class="collapse" for="c-37938684">[-]</label><label class="expand" for="c-37938684">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s Design of Experiments language, DOE being a damned useful tiny little subset of applied statistics.</div><br/></div></div></div></div><div id="37938649" class="c"><input type="checkbox" id="c-37938649" checked=""/><div class="controls bullet"><span class="by">acyou</span><span>|</span><a href="#37938554">prev</a><span>|</span><a href="#37937354">next</a><span>|</span><label class="collapse" for="c-37938649">[-]</label><label class="expand" for="c-37938649">[2 more]</label></div><br/><div class="children"><div class="content">Stat-Ease&#x27;s Design-Expert is the industry standard software in this area.<p>Would have liked to see the author do a little more attribution. These are old ideas and techniques, and certainly not attributable to this author.<p>It&#x27;s helpful to visualise the response surface. Diagrams are critical in learning this material.</div><br/></div></div><div id="37937354" class="c"><input type="checkbox" id="c-37937354" checked=""/><div class="controls bullet"><span class="by">esafak</span><span>|</span><a href="#37938649">prev</a><span>|</span><a href="#37939375">next</a><span>|</span><label class="collapse" for="c-37937354">[-]</label><label class="expand" for="c-37937354">[4 more]</label></div><br/><div class="children"><div class="content">Does any experimentation platform support this?</div><br/><div id="37939638" class="c"><input type="checkbox" id="c-37939638" checked=""/><div class="controls bullet"><span class="by">stupidcar</span><span>|</span><a href="#37937354">parent</a><span>|</span><a href="#37938827">next</a><span>|</span><label class="collapse" for="c-37939638">[-]</label><label class="expand" for="c-37939638">[1 more]</label></div><br/><div class="children"><div class="content">For biology, Synthace supports  designing experimental protocols using DOE, executing them on robotically automated lab equipment, then performing analysis on the results: <a href="https:&#x2F;&#x2F;www.synthace.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.synthace.com&#x2F;</a></div><br/></div></div><div id="37938827" class="c"><input type="checkbox" id="c-37938827" checked=""/><div class="controls bullet"><span class="by">mtu</span><span>|</span><a href="#37937354">parent</a><span>|</span><a href="#37939638">prev</a><span>|</span><a href="#37937560">next</a><span>|</span><label class="collapse" for="c-37938827">[-]</label><label class="expand" for="c-37938827">[1 more]</label></div><br/><div class="children"><div class="content">JMP is used industrially for design of experiments: <a href="https:&#x2F;&#x2F;www.jmp.com&#x2F;en_us&#x2F;software&#x2F;capabilities&#x2F;design-of-experiments.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.jmp.com&#x2F;en_us&#x2F;software&#x2F;capabilities&#x2F;design-of-ex...</a><p>R also seems to have some libraries for things related to design of experiments.</div><br/></div></div></div></div><div id="37939375" class="c"><input type="checkbox" id="c-37939375" checked=""/><div class="controls bullet"><span class="by">csense</span><span>|</span><a href="#37937354">prev</a><span>|</span><a href="#37937577">next</a><span>|</span><label class="collapse" for="c-37939375">[-]</label><label class="expand" for="c-37939375">[1 more]</label></div><br/><div class="children"><div class="content">The operator defined is associative and commutative and doing it twice gives you the identity.  So to me, it seems a strange choice to notate this as some kind of word algebra; it feels much more natural to use binary vector notation.<p>In a later example, the post says ABD*BCE = ACDE.  Let&#x27;s translate this to binary vectors by putting a 1 when the letter is present, 0 when absent, and changing * to +.  Then it becomes 11010 + 01101 = 10111.  Clearly the * operator being discussed is XOR of binary vectors, which is why I choose to use + instead.<p>Now I&#x27;ll attempt to translate the post into more standard linear algebra terminology.  If you write the table rows as binary vectors, &quot;setting up A and B and leaving C blank&quot; is essentially setting up a 2x3 matrix (in general MxN) and leaving the third column blank, filling in the leftmost 2x2 (MxM) square with an identity matrix.  Regardless of how you fill in C, this gives you a rank M matrix in reduced row echelon form.<p>Then &quot;decide on a formula for how to set C’s value&quot; is basically setting the remaining column(s) as some <i>linear function</i> of the original columns.<p>The alias is solving for the nullspace, the large example gives:<p><pre><code>    [1 0 0 1 0][x0]   [0]
    [0 1 0 1 1][x1]   [0]
    [0 0 1 0 1][x2] = [0]
               [x3]   [0]
               [x4]   [0]
</code></pre>
So you get the system of equations:<p><pre><code>    x0 + x3 = 0
    x1 + x3 + x4 = 0
    x2 + x4 = 0
</code></pre>
You can find all solutions by setting x3, x4 as free variables, and x0, x1, x2 are completely determined:<p><pre><code>    x0 = x3
    x1 = x3 + x4
    x2 = x4
</code></pre>
(This looks like a sign mistake, but because + represents XOR, we can freely switch between negative and positive, as addition and subtraction are the same modulo 2.)  You proceed by assigning all possible values to x3 and x4, obtaining a nullspace of {00000, 01101, 11010, 10111}, which matches the first row of the table (I, BCE, ABD and ACDE).  The remaining rows of the table are obtained by adding that nullspace to every element of the span of the original matrix.  (Of course this hits all 32 possible combinations, there is a fairly easy-to-prove linear algebra theorem guaranteeing this.)<p>These are some abstract computations on binary vectors, why are they relevant to the real world?  It mystified me for a bit, but I think the answer is that if two vectors x, y are aliases, we&#x27;ve set things up so that y = x+z for some z in the nullspace of our matrix M, which represents some linear function f().  Then f(y) = f(x+z) = f(x)+f(z) = f(x).  The function f() should be related to our experiment and the fact f(y) = f(x) should be related to the idea &quot;our setup can&#x27;t distinguish between x and y&quot; but it&#x27;s not 100% clear to me how this conclusion follows.  Any stats experts care to chime in?<p>It didn&#x27;t discuss at all how to pick generators, but I would guess (1) you want all variables to be varied at least once, and (2) you want alias classes to contain preferably at most one &quot;low-entropy&quot; entry (where &quot;low-entropy&quot; means combinatorially a low popcount, because <i>a priori</i> a simpler explanation is likelier than a complex one (Occam&#x27;s Razor), and possibly some application-specific context.)</div><br/></div></div><div id="37937577" class="c"><input type="checkbox" id="c-37937577" checked=""/><div class="controls bullet"><span class="by">clircle</span><span>|</span><a href="#37939375">prev</a><span>|</span><a href="#37937224">next</a><span>|</span><label class="collapse" for="c-37937577">[-]</label><label class="expand" for="c-37937577">[1 more]</label></div><br/><div class="children"><div class="content">This is a great tutorial.</div><br/></div></div><div id="37937224" class="c"><input type="checkbox" id="c-37937224" checked=""/><div class="controls bullet"><span class="by">CrimpCity</span><span>|</span><a href="#37937577">prev</a><span>|</span><label class="collapse" for="c-37937224">[-]</label><label class="expand" for="c-37937224">[2 more]</label></div><br/><div class="children"><div class="content">Dang I was hoping the article would have been about non-traditional higher level fractional factorial designs. Like for example you have an experiment with 3 factors and 5, 4, 3 levels each but can only run 20 experiments.</div><br/></div></div></div></div></div></div></div></body></html>