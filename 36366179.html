<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1686992467816" as="style"/><link rel="stylesheet" href="styles.css?v=1686992467816"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/andrewrk/poop">Poop: Performance Optimizer Observation Platform</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>davikr</span> | <span>21 comments</span></div><br/><div><div id="36367938" class="c"><input type="checkbox" id="c-36367938" checked=""/><div class="controls bullet"><span class="by">j-pb</span><span>|</span><a href="#36367488">next</a><span>|</span><label class="collapse" for="c-36367938">[-]</label><label class="expand" for="c-36367938">[3 more]</label></div><br/><div class="children"><div class="content">Nobody should do benchmarking like this anymore.<p>Memory layout of your code has such a big impact on performance on modern computers that measuring performance without removing that variable leads to wild goose chases, where you think you improved something, but in reality you incidentally got the compiler to move the code around a bit.<p>Emery Berger has an excelent talk on this [1], and a causal profiler that they developed called Coz[2].<p>Branch miss-predicts might be somewhat invariant to that, but still, one of the main points of the talk is that people do too much eyeball statistics, mistaking the variance of the underlying stochastic process with actual signal.<p>Coz is pretty trivial to set up with Zig too.<p>1. <a href="https:&#x2F;&#x2F;m.youtube.com&#x2F;watch?v=r-TLSBdHe1A">https:&#x2F;&#x2F;m.youtube.com&#x2F;watch?v=r-TLSBdHe1A</a><p>2. <a href="https:&#x2F;&#x2F;github.com&#x2F;plasma-umass&#x2F;coz">https:&#x2F;&#x2F;github.com&#x2F;plasma-umass&#x2F;coz</a></div><br/><div id="36368407" class="c"><input type="checkbox" id="c-36368407" checked=""/><div class="controls bullet"><span class="by">ororroro</span><span>|</span><a href="#36367938">parent</a><span>|</span><a href="#36367488">next</a><span>|</span><label class="collapse" for="c-36368407">[-]</label><label class="expand" for="c-36368407">[2 more]</label></div><br/><div class="children"><div class="content">Sometimes you just need to check Poop to make sure your apps still healthy.</div><br/><div id="36368482" class="c"><input type="checkbox" id="c-36368482" checked=""/><div class="controls bullet"><span class="by">OscarTheGrinch</span><span>|</span><a href="#36367938">root</a><span>|</span><a href="#36368407">parent</a><span>|</span><a href="#36367488">next</a><span>|</span><label class="collapse" for="c-36368482">[-]</label><label class="expand" for="c-36368482">[1 more]</label></div><br/><div class="children"><div class="content">I hear that Germans are pretty thorough about this.</div><br/></div></div></div></div></div></div><div id="36367488" class="c"><input type="checkbox" id="c-36367488" checked=""/><div class="controls bullet"><span class="by">AndyKelley</span><span>|</span><a href="#36367938">prev</a><span>|</span><a href="#36368346">next</a><span>|</span><label class="collapse" for="c-36367488">[-]</label><label class="expand" for="c-36367488">[2 more]</label></div><br/><div class="children"><div class="content">heh, I didn&#x27;t expect to see poop on the front page of hacker news.<p>If you&#x27;re curious about the poop-making process, I created it and released it all on one 6 hour twitch stream [1].<p>[1]: <a href="https:&#x2F;&#x2F;www.twitch.tv&#x2F;videos&#x2F;1845437356" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.twitch.tv&#x2F;videos&#x2F;1845437356</a></div><br/><div id="36367898" class="c"><input type="checkbox" id="c-36367898" checked=""/><div class="controls bullet"><span class="by">devsda</span><span>|</span><a href="#36367488">parent</a><span>|</span><a href="#36368346">next</a><span>|</span><label class="collapse" for="c-36367898">[-]</label><label class="expand" for="c-36367898">[1 more]</label></div><br/><div class="children"><div class="content">Even with the context, this comment sounded so intriguing and wrong at the same time that I hesitated while opening the link.<p>Watched a few mins and bookmarked it for another day.
There were many other name suggestions that are good but I&#x27;m glad you kept the initial name.</div><br/></div></div></div></div><div id="36368346" class="c"><input type="checkbox" id="c-36368346" checked=""/><div class="controls bullet"><span class="by">ftxbro</span><span>|</span><a href="#36367488">prev</a><span>|</span><a href="#36368215">next</a><span>|</span><label class="collapse" for="c-36368346">[-]</label><label class="expand" for="c-36368346">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    &gt; &quot;The MIT License (Expat)
    Copyright (c) Poop Contributors
    Permission is hereby granted...&quot;</code></pre></div><br/></div></div><div id="36368215" class="c"><input type="checkbox" id="c-36368215" checked=""/><div class="controls bullet"><span class="by">CrampusDestrus</span><span>|</span><a href="#36368346">prev</a><span>|</span><a href="#36368387">next</a><span>|</span><label class="collapse" for="c-36368215">[-]</label><label class="expand" for="c-36368215">[3 more]</label></div><br/><div class="children"><div class="content">Poop: it&#x27;s the shit!</div><br/><div id="36368518" class="c"><input type="checkbox" id="c-36368518" checked=""/><div class="controls bullet"><span class="by">thawab</span><span>|</span><a href="#36368215">parent</a><span>|</span><a href="#36368348">next</a><span>|</span><label class="collapse" for="c-36368518">[-]</label><label class="expand" for="c-36368518">[1 more]</label></div><br/><div class="children"><div class="content">Fun fact: the platform is built using zig, which means poop in Arabic.</div><br/></div></div><div id="36368348" class="c"><input type="checkbox" id="c-36368348" checked=""/><div class="controls bullet"><span class="by">MeteorMarc</span><span>|</span><a href="#36368215">parent</a><span>|</span><a href="#36368518">prev</a><span>|</span><a href="#36368387">next</a><span>|</span><label class="collapse" for="c-36368348">[-]</label><label class="expand" for="c-36368348">[1 more]</label></div><br/><div class="children"><div class="content">The name poop does not hold in the intercultural sense. Indeed, in northern dutch poep means shit. In southern dutch poepen means having sexual intercourse.</div><br/></div></div></div></div><div id="36368387" class="c"><input type="checkbox" id="c-36368387" checked=""/><div class="controls bullet"><span class="by">aprasadh</span><span>|</span><a href="#36368215">prev</a><span>|</span><a href="#36367541">next</a><span>|</span><label class="collapse" for="c-36368387">[-]</label><label class="expand" for="c-36368387">[1 more]</label></div><br/><div class="children"><div class="content">should I use fork or spoon the poop?
how I do merge my changes to poop? I don&#x27;t want to make a pull request.</div><br/></div></div><div id="36367541" class="c"><input type="checkbox" id="c-36367541" checked=""/><div class="controls bullet"><span class="by">cmehdy</span><span>|</span><a href="#36368387">prev</a><span>|</span><a href="#36367521">next</a><span>|</span><label class="collapse" for="c-36367541">[-]</label><label class="expand" for="c-36367541">[1 more]</label></div><br/><div class="children"><div class="content">Makes sense, it&#x27;s for stuff nobody likes dealing with but everybody has to do.</div><br/></div></div><div id="36367521" class="c"><input type="checkbox" id="c-36367521" checked=""/><div class="controls bullet"><span class="by">birdiesanders</span><span>|</span><a href="#36367541">prev</a><span>|</span><a href="#36367575">next</a><span>|</span><label class="collapse" for="c-36367521">[-]</label><label class="expand" for="c-36367521">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ll be making poop part of the CI development process starting Monday.</div><br/></div></div><div id="36367575" class="c"><input type="checkbox" id="c-36367575" checked=""/><div class="controls bullet"><span class="by">warent</span><span>|</span><a href="#36367521">prev</a><span>|</span><label class="collapse" for="c-36367575">[-]</label><label class="expand" for="c-36367575">[8 more]</label></div><br/><div class="children"><div class="content">Not to be rude but this source code... makes me wonder if I ever want to use Zig. It looks barely readable<p><a href="https:&#x2F;&#x2F;github.com&#x2F;andrewrk&#x2F;poop&#x2F;blob&#x2F;main&#x2F;src&#x2F;main.zig">https:&#x2F;&#x2F;github.com&#x2F;andrewrk&#x2F;poop&#x2F;blob&#x2F;main&#x2F;src&#x2F;main.zig</a></div><br/><div id="36367687" class="c"><input type="checkbox" id="c-36367687" checked=""/><div class="controls bullet"><span class="by">proto_lambda</span><span>|</span><a href="#36367575">parent</a><span>|</span><a href="#36367745">next</a><span>|</span><label class="collapse" for="c-36367687">[-]</label><label class="expand" for="c-36367687">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve never touched zig and know next to nothing about it, but that all looks reasonable to me at a glance. What exaxtly do you find so bad?</div><br/></div></div><div id="36367745" class="c"><input type="checkbox" id="c-36367745" checked=""/><div class="controls bullet"><span class="by">LanternLight83</span><span>|</span><a href="#36367575">parent</a><span>|</span><a href="#36367687">prev</a><span>|</span><a href="#36367960">next</a><span>|</span><label class="collapse" for="c-36367745">[-]</label><label class="expand" for="c-36367745">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve never used Zig or C++, mostly Bash, Python, and Lisps, but have recently began learning C. I see C++ in search results, and it looks like C with higher level features in a register that reminds me of Java. I see this, and it looks similer: C with higher level features that remind me more of Python. I&#x27;m sure it&#x27;s got other important features and priorities that set it apart (oft&#x27; discussed here), but that&#x27;s what I see, and I dig it.<p>To be clear there are definitely a few ideoms I&#x27;d need to learn before considering this readable (it ain&#x27;t psudocode), but I generally see all the building blocks and recognize what they&#x27;re achiving. Maybe I&#x27;d have put them together slightly differently, but that could be equally true in Python. I&#x27;d rather learn this next than C++.<p>The density of how it&#x27;s been written reminds me of some lisp code I&#x27;ve read, some implementations of state machines can be hard to follow too (in the classic &quot;but where does it do the thing?&quot; sense). I attribute a lot of the stuff that I don&#x27;t follow to the lower-level C influence; I&#x27;m working for the first time with memory managment, structs, static types, pointers, bitwise opperations, etc.<p>Think I made my point in there somewhere &gt;z&gt;<p>Would love to know where you&#x27;re coming at it from, I&#x27;d imagine that the C or &#x27;kinda functional control flow&#x27; aspects might explain what looks most forign to you too (unless you have broader experience with low level languages)?</div><br/></div></div><div id="36367960" class="c"><input type="checkbox" id="c-36367960" checked=""/><div class="controls bullet"><span class="by">TeMPOraL</span><span>|</span><a href="#36367575">parent</a><span>|</span><a href="#36367745">prev</a><span>|</span><a href="#36367661">next</a><span>|</span><label class="collapse" for="c-36367960">[-]</label><label class="expand" for="c-36367960">[2 more]</label></div><br/><div class="children"><div class="content">Looks fine to me. Syntax is the run-of-the-mill post-Java style currently favored, as exemplified by e.g. Haskell or Rust. Not a fan personally, but this is what is popular now, so that&#x27;s what we have to live with ¯\_(ツ)_&#x2F;¯.<p>Style-wise, looks fine. Code split up into functions where it makes sense, inlined where it doesn&#x27;t. I&#x27;ve seen worse - for example, code that takes the equivalent of that, and splits it into 100 functions across 10+ files.</div><br/><div id="36368219" class="c"><input type="checkbox" id="c-36368219" checked=""/><div class="controls bullet"><span class="by">wiseowise</span><span>|</span><a href="#36367575">root</a><span>|</span><a href="#36367960">parent</a><span>|</span><a href="#36367661">next</a><span>|</span><label class="collapse" for="c-36368219">[-]</label><label class="expand" for="c-36368219">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I&#x27;ve seen worse - for example, code that takes the equivalent of that, and splits it into 100 functions across 10+ files.<p>This so many times. Will never understand why people are so afraid of multi thousand lines of properly structured code but will happily giggle when the same structure is split across 10-20 files. And no, it’s not for reuse sake.</div><br/></div></div></div></div><div id="36367661" class="c"><input type="checkbox" id="c-36367661" checked=""/><div class="controls bullet"><span class="by">dinglejungle</span><span>|</span><a href="#36367575">parent</a><span>|</span><a href="#36367960">prev</a><span>|</span><a href="#36367645">next</a><span>|</span><label class="collapse" for="c-36367661">[-]</label><label class="expand" for="c-36367661">[1 more]</label></div><br/><div class="children"><div class="content">This might be more of an indictment on &#x27;readable&#x27; being a meaningful concept (beyond simple personal preference) than it is of Zig&#x27;s syntax.</div><br/></div></div><div id="36367645" class="c"><input type="checkbox" id="c-36367645" checked=""/><div class="controls bullet"><span class="by">brosciencecode</span><span>|</span><a href="#36367575">parent</a><span>|</span><a href="#36367661">prev</a><span>|</span><label class="collapse" for="c-36367645">[-]</label><label class="expand" for="c-36367645">[2 more]</label></div><br/><div class="children"><div class="content">Out of curiosity, what makes it unreadable to you?</div><br/><div id="36367721" class="c"><input type="checkbox" id="c-36367721" checked=""/><div class="controls bullet"><span class="by">slekker</span><span>|</span><a href="#36367575">root</a><span>|</span><a href="#36367645">parent</a><span>|</span><label class="collapse" for="c-36367721">[-]</label><label class="expand" for="c-36367721">[1 more]</label></div><br/><div class="children"><div class="content">Not OP but to me it is a bit difficult to read due to the syntax highlighting colours (mainly red and brown)</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>