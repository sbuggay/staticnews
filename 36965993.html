<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1690966863055" as="style"/><link rel="stylesheet" href="styles.css?v=1690966863055"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://eugeneyan.com/writing/llm-patterns/">Patterns for building LLM-based systems and products</a> <span class="domain">(<a href="https://eugeneyan.com">eugeneyan.com</a>)</span></div><div class="subtext"><span>7d7n</span> | <span>22 comments</span></div><br/><div><div id="36966853" class="c"><input type="checkbox" id="c-36966853" checked=""/><div class="controls bullet"><span class="by">austinkhale</span><span>|</span><a href="#36966833">next</a><span>|</span><label class="collapse" for="c-36966853">[-]</label><label class="expand" for="c-36966853">[1 more]</label></div><br/><div class="children"><div class="content">&gt; 65 min read<p>That&#x27;s when you know it&#x27;s going to be amazing. Single best narrative-form overview of the current state of integrating LLM&#x27;s into applications and the challenges encountered I&#x27;ve read so far. This is fantastic and must have required an incredible amount of work. Massive kudos to the author.</div><br/></div></div><div id="36966833" class="c"><input type="checkbox" id="c-36966833" checked=""/><div class="controls bullet"><span class="by">shahules</span><span>|</span><a href="#36966853">prev</a><span>|</span><a href="#36968496">next</a><span>|</span><label class="collapse" for="c-36966833">[-]</label><label class="expand" for="c-36966833">[2 more]</label></div><br/><div class="children"><div class="content">Evals is not suitable for evaluating LLM applications such as RAG, etc because one has to evaluate on their own data where no golden test data exists, and techniqus used have poor correlation with human judgement. 
We have build RAGAS framework for this <a href="https:&#x2F;&#x2F;github.com&#x2F;explodinggradients&#x2F;ragas">https:&#x2F;&#x2F;github.com&#x2F;explodinggradients&#x2F;ragas</a></div><br/><div id="36968357" class="c"><input type="checkbox" id="c-36968357" checked=""/><div class="controls bullet"><span class="by">resiros</span><span>|</span><a href="#36966833">parent</a><span>|</span><a href="#36968496">next</a><span>|</span><label class="collapse" for="c-36968357">[-]</label><label class="expand" for="c-36968357">[1 more]</label></div><br/><div class="children"><div class="content">Great project! We&#x27;re building an open-source platform for building robust LLM apps (<a href="https:&#x2F;&#x2F;github.com&#x2F;Agenta-AI&#x2F;agenta">https:&#x2F;&#x2F;github.com&#x2F;Agenta-AI&#x2F;agenta</a>), we&#x27;d love to integrate your library into our evaluation!</div><br/></div></div></div></div><div id="36968496" class="c"><input type="checkbox" id="c-36968496" checked=""/><div class="controls bullet"><span class="by">sgt101</span><span>|</span><a href="#36966833">prev</a><span>|</span><a href="#36967378">next</a><span>|</span><label class="collapse" for="c-36968496">[-]</label><label class="expand" for="c-36968496">[1 more]</label></div><br/><div class="children"><div class="content">no help to manage prompt injection...<p>where&#x27;s the dual LLM pattern?</div><br/></div></div><div id="36967378" class="c"><input type="checkbox" id="c-36967378" checked=""/><div class="controls bullet"><span class="by">kcorbitt</span><span>|</span><a href="#36968496">prev</a><span>|</span><a href="#36966857">next</a><span>|</span><label class="collapse" for="c-36967378">[-]</label><label class="expand" for="c-36967378">[1 more]</label></div><br/><div class="children"><div class="content">This is fantastic! I found myself nodding along in many places. I&#x27;ve definitely found in practice that evals are critical to shipping LLM-based apps with confidence. I&#x27;m actually working on an open-source tool in this space: <a href="https:&#x2F;&#x2F;github.com&#x2F;openpipe&#x2F;openpipe">https:&#x2F;&#x2F;github.com&#x2F;openpipe&#x2F;openpipe</a>. Would love any feedback on ways to make it more useful. :)</div><br/></div></div><div id="36966857" class="c"><input type="checkbox" id="c-36966857" checked=""/><div class="controls bullet"><span class="by">ankitg12</span><span>|</span><a href="#36967378">prev</a><span>|</span><a href="#36965994">next</a><span>|</span><label class="collapse" for="c-36966857">[-]</label><label class="expand" for="c-36966857">[1 more]</label></div><br/><div class="children"><div class="content">This is a very well written and detailed article on the Art of LLMs. Thanks for writing this.</div><br/></div></div><div id="36966840" class="c"><input type="checkbox" id="c-36966840" checked=""/><div class="controls bullet"><span class="by">justanotheratom</span><span>|</span><a href="#36965994">prev</a><span>|</span><a href="#36966936">next</a><span>|</span><label class="collapse" for="c-36966840">[-]</label><label class="expand" for="c-36966840">[3 more]</label></div><br/><div class="children"><div class="content">&quot;hybrid retrieval (traditional search index + embedding-based search) works better than either alone.&quot;<p>- any references for how this hybrid retrieval is done?</div><br/><div id="36967297" class="c"><input type="checkbox" id="c-36967297" checked=""/><div class="controls bullet"><span class="by">niftyjester</span><span>|</span><a href="#36966840">parent</a><span>|</span><a href="#36967382">next</a><span>|</span><label class="collapse" for="c-36967297">[-]</label><label class="expand" for="c-36967297">[1 more]</label></div><br/><div class="children"><div class="content">This is going to be only marginally helpful as I don&#x27;t have references but I think I implemented this in ElasticSearch.<p>You can do approximate KNN search with ES by adding a setting on the index that enables KNN and then creating mappings for your embedding objects that defines their vector length. Then index your data as you normally would plus embeddings.<p>Once you have those in place you can construct your query and include the embedding similarity in how the query gets scored. When a query is submitted you embed it and pass into your ES query the embedding as well as the original query. ES will combine all of these elements together to score the results.</div><br/></div></div><div id="36967382" class="c"><input type="checkbox" id="c-36967382" checked=""/><div class="controls bullet"><span class="by">NathanielLovin</span><span>|</span><a href="#36966840">parent</a><span>|</span><a href="#36967297">prev</a><span>|</span><a href="#36966936">next</a><span>|</span><label class="collapse" for="c-36967382">[-]</label><label class="expand" for="c-36967382">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;opensourceconnections.com&#x2F;blog&#x2F;2023&#x2F;02&#x2F;27&#x2F;hybrid-vigor-winning-at-hybrid-search&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;opensourceconnections.com&#x2F;blog&#x2F;2023&#x2F;02&#x2F;27&#x2F;hybrid-vig...</a>, <a href="https:&#x2F;&#x2F;jina.ai&#x2F;news&#x2F;hype-and-hybrids-multimodal-search-means-more-than-keywords-and-vectors-2&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;jina.ai&#x2F;news&#x2F;hype-and-hybrids-multimodal-search-mean...</a> are two I&#x27;ve been looking at<p>Basically, get the BM25 results and normalize them to be between 0 and 1, then take the (potentially weighted) average of them and the cosine similarity results (already between 0 and 1) to get the final ranking.</div><br/></div></div></div></div><div id="36966936" class="c"><input type="checkbox" id="c-36966936" checked=""/><div class="controls bullet"><span class="by">soultrees</span><span>|</span><a href="#36966840">prev</a><span>|</span><a href="#36966957">next</a><span>|</span><label class="collapse" for="c-36966936">[-]</label><label class="expand" for="c-36966936">[1 more]</label></div><br/><div class="children"><div class="content">Very informative. I bookmarked it.</div><br/></div></div><div id="36966957" class="c"><input type="checkbox" id="c-36966957" checked=""/><div class="controls bullet"><span class="by">noduerme</span><span>|</span><a href="#36966936">prev</a><span>|</span><a href="#36967757">next</a><span>|</span><label class="collapse" for="c-36966957">[-]</label><label class="expand" for="c-36966957">[4 more]</label></div><br/><div class="children"><div class="content">Oh God, the marketing of barely-understood tech-crafting recipes into new corporate jargon has turned into new acronyms to obfuscate the jargon, and is now accelerating even faster than AI.<p>Did you miss the NFT train? Have you ever asked yourself if this is what you should be doing with your life?<p>Just speaking as a guy who actually writes logic and code, rather than like, coming up with incantations and selling horseshit.</div><br/><div id="36967042" class="c"><input type="checkbox" id="c-36967042" checked=""/><div class="controls bullet"><span class="by">Swizec</span><span>|</span><a href="#36966957">parent</a><span>|</span><a href="#36967556">next</a><span>|</span><label class="collapse" for="c-36967042">[-]</label><label class="expand" for="c-36967042">[2 more]</label></div><br/><div class="children"><div class="content">We are at the moment in time when LLMs are going from academia to engineering. It&#x27;s pretty exciting. This is what the process looks like – people reading research papers, doing a bit of practical no-nonsense engineering, and sharing learnings with other engineers.<p>This will be on youtube as part of various &quot;Top 5 tips to run AI in your app&quot; in about 2 to 3 months.<p>And yes right now the challenge is figuring out how to productize these LLM things. The researchers are off figuring out what comes after LLMs, we&#x27;re over here figuring out what to do with these things and how.</div><br/><div id="36968338" class="c"><input type="checkbox" id="c-36968338" checked=""/><div class="controls bullet"><span class="by">hcks</span><span>|</span><a href="#36966957">root</a><span>|</span><a href="#36967042">parent</a><span>|</span><a href="#36967556">next</a><span>|</span><label class="collapse" for="c-36968338">[-]</label><label class="expand" for="c-36968338">[1 more]</label></div><br/><div class="children"><div class="content">LLMs were never really academia</div><br/></div></div></div></div><div id="36967556" class="c"><input type="checkbox" id="c-36967556" checked=""/><div class="controls bullet"><span class="by">jackstraw14</span><span>|</span><a href="#36966957">parent</a><span>|</span><a href="#36967042">prev</a><span>|</span><a href="#36967757">next</a><span>|</span><label class="collapse" for="c-36967556">[-]</label><label class="expand" for="c-36967556">[1 more]</label></div><br/><div class="children"><div class="content">get over it.</div><br/></div></div></div></div><div id="36967757" class="c"><input type="checkbox" id="c-36967757" checked=""/><div class="controls bullet"><span class="by">ilaksh</span><span>|</span><a href="#36966957">prev</a><span>|</span><label class="collapse" for="c-36967757">[-]</label><label class="expand" for="c-36967757">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;m sorry but from a _practical_ standpoint, it feels like mostly fluff. Someone was advertising today on a HN hiring post that they would create a basic chatbot for a specific set of documents for $15,000. This feels like the type of web page that person would use to confuse a client into thinking that was a fair price.<p>Practically speaking the starting point should be things like the APIs such as OpenAI or open source frameworks and software. For example, llama_index 
<a href="https:&#x2F;&#x2F;github.com&#x2F;jerryjliu&#x2F;llama_index">https:&#x2F;&#x2F;github.com&#x2F;jerryjliu&#x2F;llama_index</a>. You can use something like that or another GitHub repo built with it to create a customized chatbot application in a few minutes or a few days. (It should not take two weeks and $15,000).<p>It would be good to see something detailed that demonstrates an actual use case for fine tuning. Also, I don&#x27;t believe that the academic tests are appropriate in that case. If you really were dead set on avoiding a leading edge closed LLM, and doing actual fine-tuning, you would want a person to look at the outputs and judge them in their specific context such as handling customer support requests for that system.</div><br/><div id="36967831" class="c"><input type="checkbox" id="c-36967831" checked=""/><div class="controls bullet"><span class="by">tinco</span><span>|</span><a href="#36967757">parent</a><span>|</span><a href="#36968016">next</a><span>|</span><label class="collapse" for="c-36967831">[-]</label><label class="expand" for="c-36967831">[2 more]</label></div><br/><div class="children"><div class="content">What are you even talking about, why would anyone be building chatbots at this point? Chatbots are like the hello world of using an LLM API, it has nothing to do with what this article is about.</div><br/><div id="36968004" class="c"><input type="checkbox" id="c-36968004" checked=""/><div class="controls bullet"><span class="by">ilaksh</span><span>|</span><a href="#36967757">root</a><span>|</span><a href="#36967831">parent</a><span>|</span><a href="#36968016">next</a><span>|</span><label class="collapse" for="c-36968004">[-]</label><label class="expand" for="c-36968004">[1 more]</label></div><br/><div class="children"><div class="content">Almost every LLM application has an element of conversing or querying an AI based on some knowledgeset or tasks etc.<p>100% this web page (or similar) will be used to basically scam clients into overpaying for simple wrappers around llama_index or LangChain etc. Some people will spend a week wasting their time trying to fine-tune an open source LLM on some wholly inadequate dataset before realizing they can use OpenAI and something from github. But most will not admit that.<p>Sure, a few people doing basically research projects for a large company or university will find some of the information useful. But realistically, probably not so much if they have to actually deliver a working system in a reasonable amount of time that would justify the business expense.</div><br/></div></div></div></div><div id="36968016" class="c"><input type="checkbox" id="c-36968016" checked=""/><div class="controls bullet"><span class="by">rolisz</span><span>|</span><a href="#36967757">parent</a><span>|</span><a href="#36967831">prev</a><span>|</span><label class="collapse" for="c-36968016">[-]</label><label class="expand" for="c-36968016">[3 more]</label></div><br/><div class="children"><div class="content">1) Dropbox can be replicated in a couple of hours with SFTP (or whatever was that iconic HN comment)
2) the devil is in the details. How do you get the data out of documents? Are they pdfs? Do they have tables? Do they have images? Sure, creating embeddings from text is simple and shoving that into a prompt to get an answer is easy, but getting that text out from different documents can be tricky.<p>Source: finished a chat to your documents project a month ago</div><br/><div id="36968026" class="c"><input type="checkbox" id="c-36968026" checked=""/><div class="controls bullet"><span class="by">ilaksh</span><span>|</span><a href="#36967757">root</a><span>|</span><a href="#36968016">parent</a><span>|</span><label class="collapse" for="c-36968026">[-]</label><label class="expand" for="c-36968026">[2 more]</label></div><br/><div class="children"><div class="content">I guess my point was really not to try to emphasize that chat with documents was particular easy for every application but rather just to suggest that the article wasn&#x27;t particularly practical advice for common use cases.</div><br/><div id="36968092" class="c"><input type="checkbox" id="c-36968092" checked=""/><div class="controls bullet"><span class="by">rolisz</span><span>|</span><a href="#36967757">root</a><span>|</span><a href="#36968026">parent</a><span>|</span><label class="collapse" for="c-36968092">[-]</label><label class="expand" for="c-36968092">[1 more]</label></div><br/><div class="children"><div class="content">Hard disagree. Evaluation is hard. Handling stupid mistakes from LLMs is something that has to be taken into account from day 1.<p>Finetuning is not that needed in my experience.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>