<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1694077262812" as="style"/><link rel="stylesheet" href="styles.css?v=1694077262812"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://hturan.com/writing/exploring-exif">Exploring EXIF</a> <span class="domain">(<a href="https://hturan.com">hturan.com</a>)</span></div><div class="subtext"><span>spansoa</span> | <span>27 comments</span></div><br/><div><div id="37414910" class="c"><input type="checkbox" id="c-37414910" checked=""/><div class="controls bullet"><span class="by">rhettbull</span><span>|</span><a href="#37414583">next</a><span>|</span><label class="collapse" for="c-37414910">[-]</label><label class="expand" for="c-37414910">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m the author of the osxphotos[0] tool mentioned in the article. For photos in an Apple Photos library, osxphotos gives you access to a rich set of metadata beyond what&#x27;s in the actual EXIF&#x2F;IPTC&#x2F;XMP of the image. Apple performs object classification and other AI techniques on your images but generally doesn&#x27;t expose this to the user. For example, photos are categorized as to object in them (dog, cat, breed of dog, etc.), rich reverse geolocation info (neighborhood, landmarks, etc.) and an interesting set of scores such as &quot;overall aesthetic&quot;, &quot;pleasant camera tilt&quot;, &quot;harmonious colors&quot;, etc. These can be queried using osxphotos, either from the command line, or in your own python code. (Ref API docs[1])<p>For example, to find your &quot;best&quot; photos based on overall aesthetic score and add them to the album &quot;Best Photos&quot; you could run:<p>osxphotos query --query-eval &quot;photo.score.overall &gt; 0.8&quot; --add-to-album &quot;Best Photos&quot;<p>To find good photos with trees in them you could try something like:<p>osxphotos query --query-eval &quot;photo.score.overall &gt; 0.5&quot; --label Tree --add-to-album &quot;Good Tree Photos&quot;<p>There&#x27;s quite a bit of other interesting data in Photos that you can explore with osxphotos.  Run `osxphotos inspect` and it will show you all the metadata for whichever photo is currently selected in the Photos app.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;RhetTbull&#x2F;osxphotos">https:&#x2F;&#x2F;github.com&#x2F;RhetTbull&#x2F;osxphotos</a>
[1] <a href="https:&#x2F;&#x2F;rhettbull.github.io&#x2F;osxphotos&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;rhettbull.github.io&#x2F;osxphotos&#x2F;</a></div><br/><div id="37415098" class="c"><input type="checkbox" id="c-37415098" checked=""/><div class="controls bullet"><span class="by">odysseus</span><span>|</span><a href="#37414910">parent</a><span>|</span><a href="#37414583">next</a><span>|</span><label class="collapse" for="c-37415098">[-]</label><label class="expand" for="c-37415098">[1 more]</label></div><br/><div class="children"><div class="content">That first query is fantastic.  Aside from the obvious wedding photos which were indeed aesthetically pleasing, my wife and I were laughing to the point of tears over a &quot;most aesthetic&quot; photo it found of me climbing through a cage suspended between two cliffs in the Alps.<p>Thanks for the cool tool!  I too wish Apple exposed these scores as a filter at the GUI level, but after seeing the output, perhaps I know why they don&#x27;t.</div><br/></div></div></div></div><div id="37414583" class="c"><input type="checkbox" id="c-37414583" checked=""/><div class="controls bullet"><span class="by">Figs</span><span>|</span><a href="#37414910">prev</a><span>|</span><a href="#37413714">next</a><span>|</span><label class="collapse" for="c-37414583">[-]</label><label class="expand" for="c-37414583">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  the EXIF data marker (FFE1)<p>This isn&#x27;t quite right. That&#x27;s a JPEG application specific marker (APP1). It indicates that some additional data is embedded in the JPEG file at that point which should be interpreted in an application specific manner (e.g. skipped if the program doesn&#x27;t know how to handle it). That could be Exif tags but could also be other things (like XMP). An APP1 segment can be distinguished as Exif data based on the presence of the &quot;Exif&quot; string immediately after the segment size. (The tags themselves are stored in essentially a TIFF file embedded after the Exif identifier, if you&#x27;re curious.)</div><br/></div></div><div id="37413714" class="c"><input type="checkbox" id="c-37413714" checked=""/><div class="controls bullet"><span class="by">AceJohnny2</span><span>|</span><a href="#37414583">prev</a><span>|</span><a href="#37414309">next</a><span>|</span><label class="collapse" for="c-37413714">[-]</label><label class="expand" for="c-37413714">[6 more]</label></div><br/><div class="children"><div class="content">I wonder how the GPS coords is actually encoded in the EXIF data, because I have a hard time believing they&#x27;re actually encoding it with as many significant digits as displayed by the website.<p>For the example they give, I&#x27;m counting 14 significant digits for GPSLatitude, and 16 for GPSLongitude, which is way more specific than a grain of sand, ref <a href="https:&#x2F;&#x2F;xkcd.com&#x2F;2170&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;xkcd.com&#x2F;2170&#x2F;</a><p>I suppose it&#x27;s floating point, and of course that brings its own &quot;fun&quot; in displaying in decimal.<p>At least it also includes GPSPositioningError!</div><br/><div id="37416322" class="c"><input type="checkbox" id="c-37416322" checked=""/><div class="controls bullet"><span class="by">PinguTS</span><span>|</span><a href="#37413714">parent</a><span>|</span><a href="#37414856">next</a><span>|</span><label class="collapse" for="c-37416322">[-]</label><label class="expand" for="c-37416322">[1 more]</label></div><br/><div class="children"><div class="content">Just look for the many documentations that exists, just quick search: <a href="https:&#x2F;&#x2F;exiftool.org&#x2F;TagNames&#x2F;GPS.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;exiftool.org&#x2F;TagNames&#x2F;GPS.html</a></div><br/></div></div><div id="37414856" class="c"><input type="checkbox" id="c-37414856" checked=""/><div class="controls bullet"><span class="by">nwallin</span><span>|</span><a href="#37413714">parent</a><span>|</span><a href="#37416322">prev</a><span>|</span><a href="#37413962">next</a><span>|</span><label class="collapse" for="c-37414856">[-]</label><label class="expand" for="c-37414856">[1 more]</label></div><br/><div class="children"><div class="content">EXIF is a binary format. I would expect it to just stuff a double in there. So 16 digits is what you get even if you need less. 32 bit floats aren&#x27;t precise enough to store latitude&#x2F;longitude coordinates.</div><br/></div></div><div id="37413962" class="c"><input type="checkbox" id="c-37413962" checked=""/><div class="controls bullet"><span class="by">MatmaRex</span><span>|</span><a href="#37413714">parent</a><span>|</span><a href="#37414856">prev</a><span>|</span><a href="#37414291">next</a><span>|</span><label class="collapse" for="c-37413962">[-]</label><label class="expand" for="c-37413962">[1 more]</label></div><br/><div class="children"><div class="content">Apparently, each coordinate is an array of 3 rational values representing the degrees, minutes and seconds, where the numerator and denominator are 32-bit unsigned integers (plus a separate field to represent the sign). That&#x27;s a lot of precision.</div><br/></div></div><div id="37414291" class="c"><input type="checkbox" id="c-37414291" checked=""/><div class="controls bullet"><span class="by">WaitWaitWha</span><span>|</span><a href="#37413714">parent</a><span>|</span><a href="#37413962">prev</a><span>|</span><a href="#37413927">next</a><span>|</span><label class="collapse" for="c-37414291">[-]</label><label class="expand" for="c-37414291">[1 more]</label></div><br/><div class="children"><div class="content">The GPS encoding depends on the software that generates the EXIF.  In case of the article with iPhone this is reasonably consistent across the apps. But, EXIF GPS (and other fields) can be very inconsistent across other software, both on mobile phones with cameras, and cameras themselves.  In my experience I seen the most errors in knock off devices.<p>IF you are interested to learn more, look into &quot;deadbox&quot; digital forensics.</div><br/></div></div><div id="37413927" class="c"><input type="checkbox" id="c-37413927" checked=""/><div class="controls bullet"><span class="by">lelandbatey</span><span>|</span><a href="#37413714">parent</a><span>|</span><a href="#37414291">prev</a><span>|</span><a href="#37414309">next</a><span>|</span><label class="collapse" for="c-37413927">[-]</label><label class="expand" for="c-37413927">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;re right they don&#x27;t usually include that many significant digits. Here is an example sample of some GPS data I specifically extracted from a cross-country bike trip from photos I took on my phone, for comparison:<p><a href="https:&#x2F;&#x2F;github.com&#x2F;lelandbatey&#x2F;batey_bike_trip_records&#x2F;blob&#x2F;master&#x2F;2016_batey_bike_trip&#x2F;2016_pictures_gps_data.json">https:&#x2F;&#x2F;github.com&#x2F;lelandbatey&#x2F;batey_bike_trip_records&#x2F;blob&#x2F;...</a></div><br/></div></div></div></div><div id="37414309" class="c"><input type="checkbox" id="c-37414309" checked=""/><div class="controls bullet"><span class="by">leeoniya</span><span>|</span><a href="#37413714">prev</a><span>|</span><a href="#37412896">next</a><span>|</span><label class="collapse" for="c-37414309">[-]</label><label class="expand" for="c-37414309">[1 more]</label></div><br/><div class="children"><div class="content">somewhat related, i used a tool to extract embedded jpeg preview images from raw images. much faster than actually using software to process the raw files if you just need to quickly share, your camera already &quot;developed&quot; them :)<p><a href="http:&#x2F;&#x2F;www.fsoft.it&#x2F;ERawP&#x2F;" rel="nofollow noreferrer">http:&#x2F;&#x2F;www.fsoft.it&#x2F;ERawP&#x2F;</a><p>exiftool apparently can extract these also:<p>exiftool -a -b -W %d%f_%t%-c.%s -preview:all dir<p>Extract all types of preview images (ThumbnailImage, PreviewImage, JpgFromRaw, etc.) from files in directory &quot;dir&quot;, adding the tag name to the output preview image file names.<p><a href="https:&#x2F;&#x2F;exiftool.org&#x2F;exiftool_pod.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;exiftool.org&#x2F;exiftool_pod.html</a></div><br/></div></div><div id="37412896" class="c"><input type="checkbox" id="c-37412896" checked=""/><div class="controls bullet"><span class="by">jll29</span><span>|</span><a href="#37414309">prev</a><span>|</span><a href="#37413983">next</a><span>|</span><label class="collapse" for="c-37412896">[-]</label><label class="expand" for="c-37412896">[2 more]</label></div><br/><div class="children"><div class="content">Interesting post.<p>From the metadata of a person&#x27;s photos, you can extract, inter alia:<p>...whether they took some photos from a plane or helicopter (viewshed, angle and altitude are preserved);<p>...how conscientious someone is (by looking at their iPhone&#x27;s uptime, perhaps the over-conscientious person with an extreme uptime is borderline OCD?).</div><br/><div id="37414493" class="c"><input type="checkbox" id="c-37414493" checked=""/><div class="controls bullet"><span class="by">myself248</span><span>|</span><a href="#37412896">parent</a><span>|</span><a href="#37413983">next</a><span>|</span><label class="collapse" for="c-37414493">[-]</label><label class="expand" for="c-37414493">[1 more]</label></div><br/><div class="children"><div class="content">Extreme uptime probably means they haven&#x27;t installed updates in a while, that&#x27;s the only reason I reboot my phone anymore.</div><br/></div></div></div></div><div id="37413983" class="c"><input type="checkbox" id="c-37413983" checked=""/><div class="controls bullet"><span class="by">testbjjl</span><span>|</span><a href="#37412896">prev</a><span>|</span><a href="#37412616">next</a><span>|</span><label class="collapse" for="c-37413983">[-]</label><label class="expand" for="c-37413983">[1 more]</label></div><br/><div class="children"><div class="content">Doesn’t this information get stripped from photos, at least on iOS when you share them. Seems to be what I recall experiencing.</div><br/></div></div><div id="37412616" class="c"><input type="checkbox" id="c-37412616" checked=""/><div class="controls bullet"><span class="by">cratermoon</span><span>|</span><a href="#37413983">prev</a><span>|</span><a href="#37413124">next</a><span>|</span><label class="collapse" for="c-37412616">[-]</label><label class="expand" for="c-37412616">[3 more]</label></div><br/><div class="children"><div class="content">FYI if you didn’t already know: pdf files also have EXIF data. I just learned that recently.</div><br/><div id="37413213" class="c"><input type="checkbox" id="c-37413213" checked=""/><div class="controls bullet"><span class="by">erikig</span><span>|</span><a href="#37412616">parent</a><span>|</span><a href="#37413124">next</a><span>|</span><label class="collapse" for="c-37413213">[-]</label><label class="expand" for="c-37413213">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for sharing this, I’ll need to explore this a little more.</div><br/><div id="37413800" class="c"><input type="checkbox" id="c-37413800" checked=""/><div class="controls bullet"><span class="by">cratermoon</span><span>|</span><a href="#37412616">root</a><span>|</span><a href="#37413213">parent</a><span>|</span><a href="#37413124">next</a><span>|</span><label class="collapse" for="c-37413800">[-]</label><label class="expand" for="c-37413800">[1 more]</label></div><br/><div class="children"><div class="content">I use exiftool[1] and pdfinfo[2] to add or correct title and author for PDF files. With pdfinfo I can easily generate an index to my PDF file directories.<p>1 <a href="https:&#x2F;&#x2F;exiftool.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;exiftool.org&#x2F;</a><p>2 <a href="https:&#x2F;&#x2F;www.xpdfreader.com&#x2F;&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.xpdfreader.com&#x2F;&#x2F;</a></div><br/></div></div></div></div></div></div><div id="37413124" class="c"><input type="checkbox" id="c-37413124" checked=""/><div class="controls bullet"><span class="by">cratermoon</span><span>|</span><a href="#37412616">prev</a><span>|</span><a href="#37413160">next</a><span>|</span><label class="collapse" for="c-37413124">[-]</label><label class="expand" for="c-37413124">[6 more]</label></div><br/><div class="children"><div class="content">Be careful about posting your phone camera images publicly if you’re protective of your privacy. Some social media trim location and other sensitive EXIF tags, but it’s best to not trust them.</div><br/><div id="37413232" class="c"><input type="checkbox" id="c-37413232" checked=""/><div class="controls bullet"><span class="by">erikig</span><span>|</span><a href="#37413124">parent</a><span>|</span><a href="#37413583">next</a><span>|</span><label class="collapse" for="c-37413232">[-]</label><label class="expand" for="c-37413232">[1 more]</label></div><br/><div class="children"><div class="content">100% which is why, as mentioned in the article, iOS trims the EXIF data when uploading images to the web.<p>What was most alarming to me, (I’m not sure why it was a surprise) was that all this rich EXIF data is available to any app that I grant full access to my photo gallery.</div><br/></div></div><div id="37413583" class="c"><input type="checkbox" id="c-37413583" checked=""/><div class="controls bullet"><span class="by">13of40</span><span>|</span><a href="#37413124">parent</a><span>|</span><a href="#37413232">prev</a><span>|</span><a href="#37414351">next</a><span>|</span><label class="collapse" for="c-37413583">[-]</label><label class="expand" for="c-37413583">[1 more]</label></div><br/><div class="children"><div class="content">Presumably a place like Meta saves all of EXIF data for themselves and serves the end users sanitized ones.  I bet you could still fingerprint an image and know what actual camera it came from based on imperfections in the optical sensor, though.</div><br/></div></div><div id="37414351" class="c"><input type="checkbox" id="c-37414351" checked=""/><div class="controls bullet"><span class="by">accrual</span><span>|</span><a href="#37413124">parent</a><span>|</span><a href="#37413583">prev</a><span>|</span><a href="#37414228">next</a><span>|</span><label class="collapse" for="c-37414351">[-]</label><label class="expand" for="c-37414351">[1 more]</label></div><br/><div class="children"><div class="content">I recently learned Windows has this functionality built-in. Right-click &gt; Properties &gt; Details &gt; Remove Properties and Personal Information.<p>It&#x27;s saved me from digging out a purpose-specific tool a couple times.</div><br/></div></div><div id="37414228" class="c"><input type="checkbox" id="c-37414228" checked=""/><div class="controls bullet"><span class="by">ternaus</span><span>|</span><a href="#37413124">parent</a><span>|</span><a href="#37414351">prev</a><span>|</span><a href="#37414732">next</a><span>|</span><label class="collapse" for="c-37414228">[-]</label><label class="expand" for="c-37414228">[1 more]</label></div><br/><div class="children"><div class="content">Yep, that&#x27;s why I wrote a tool to cut all metadata from photos<p><a href="https:&#x2F;&#x2F;cutexif.com&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;cutexif.com&#x2F;</a><p>Which I use before uploading photos to pubic services.<p>Exif has surprising amount of infomration</div><br/></div></div><div id="37414732" class="c"><input type="checkbox" id="c-37414732" checked=""/><div class="controls bullet"><span class="by">yashg</span><span>|</span><a href="#37413124">parent</a><span>|</span><a href="#37414228">prev</a><span>|</span><a href="#37413160">next</a><span>|</span><label class="collapse" for="c-37414732">[-]</label><label class="expand" for="c-37414732">[1 more]</label></div><br/><div class="children"><div class="content">I have created a tool called ExifPurge to remove EXIF data from multiple photos in one go.<p><a href="https:&#x2F;&#x2F;www.exifpurge.com" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.exifpurge.com</a></div><br/></div></div></div></div><div id="37413160" class="c"><input type="checkbox" id="c-37413160" checked=""/><div class="controls bullet"><span class="by">bobsmooth</span><span>|</span><a href="#37413124">prev</a><span>|</span><a href="#37413158">next</a><span>|</span><label class="collapse" for="c-37413160">[-]</label><label class="expand" for="c-37413160">[1 more]</label></div><br/><div class="children"><div class="content">That is way more information in a single photo than I ever would have guessed.</div><br/></div></div><div id="37413158" class="c"><input type="checkbox" id="c-37413158" checked=""/><div class="controls bullet"><span class="by">lofaszvanitt</span><span>|</span><a href="#37413160">prev</a><span>|</span><label class="collapse" for="c-37413158">[-]</label><label class="expand" for="c-37413158">[3 more]</label></div><br/><div class="children"><div class="content">Someone tell me does any library exists that handles exif, xmp, iptc and has machine output (json)?</div><br/><div id="37413683" class="c"><input type="checkbox" id="c-37413683" checked=""/><div class="controls bullet"><span class="by">dereg</span><span>|</span><a href="#37413158">parent</a><span>|</span><label class="collapse" for="c-37413683">[-]</label><label class="expand" for="c-37413683">[2 more]</label></div><br/><div class="children"><div class="content">ExifTool[0] does all that from the command line. I use it for automating my photo organization workflow and, as a bonus, I use it for reading the metadata  of damn near any filetype.<p>[0]: <a href="https:&#x2F;&#x2F;exiftool.org" rel="nofollow noreferrer">https:&#x2F;&#x2F;exiftool.org</a></div><br/><div id="37414899" class="c"><input type="checkbox" id="c-37414899" checked=""/><div class="controls bullet"><span class="by">mceachen</span><span>|</span><a href="#37413158">root</a><span>|</span><a href="#37413683">parent</a><span>|</span><label class="collapse" for="c-37414899">[-]</label><label class="expand" for="c-37414899">[1 more]</label></div><br/><div class="children"><div class="content">Know that although ExifTool is written in perl, you can run it in &quot;batch mode&quot; which makes it quite fast--only a couple of ms to parse a file. I&#x27;ve written an open source library to manage the subprocesses for you if you&#x27;re using node.js (and I also wrote the ruby variant ages ago):<p><a href="https:&#x2F;&#x2F;github.com&#x2F;photostructure&#x2F;exiftool-vendored.js">https:&#x2F;&#x2F;github.com&#x2F;photostructure&#x2F;exiftool-vendored.js</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>