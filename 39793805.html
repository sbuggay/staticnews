<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1711184455146" as="style"/><link rel="stylesheet" href="styles.css?v=1711184455146"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://pack.ac/note/pack">Pack: A new container format for compressed files</a> <span class="domain">(<a href="https://pack.ac">pack.ac</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>141 comments</span></div><br/><div><div id="39794235" class="c"><input type="checkbox" id="c-39794235" checked=""/><div class="controls bullet"><span class="by">bno1</span><span>|</span><a href="#39797901">next</a><span>|</span><label class="collapse" for="c-39794235">[-]</label><label class="expand" for="c-39794235">[24 more]</label></div><br/><div class="children"><div class="content">I found squashfs to be a great archive format. It preserves Linux file ownership and permissions, you can extract individual files without parsing the entire archive like tar and it&#x27;s mountable. It&#x27;s also openable in 7zip.<p>I wonder how pack compares to it, but its home page and github don&#x27;t tell much.</div><br/><div id="39798139" class="c"><input type="checkbox" id="c-39798139" checked=""/><div class="controls bullet"><span class="by">lathiat</span><span>|</span><a href="#39794235">parent</a><span>|</span><a href="#39797064">next</a><span>|</span><label class="collapse" for="c-39798139">[-]</label><label class="expand" for="c-39798139">[1 more]</label></div><br/><div class="children"><div class="content">Yeah squashfs is one of the good ones right now.<p>for sosreports (archives with lots of diagnostic commands and logfiles from a linux host), I wanted to find a file format that can both used zstd compression (or maybe something else that is about as fast and compressible, currently often uses xz which is very very slow) -and- that lets you unpack a single file fast, with an index, ideally so you can mount it loopback or with fuse or otherwise just quickly unpack a single file in a many-GB archive.<p>You&#x27;d be surprised that this basically doesn&#x27;t exist right now. Theres a bunch of half solutions, but no real good easily available one. Some things add indexes to tar, zstd does support partial&#x2F;offset unpacking without reading the entire archive in the code but basically no one uses that function, it&#x27;s kindof silly. There are zip and rar tools with zstd support, but they are not all cross compatible and mostly doesn&#x27;t exist in the packaged Linux versions.<p>squashfs with zstd added mostly fits the bill.<p>I was really surprised not to find anything else given we had this in Zip and RAR files 2 decades ago. But nothing so far that would or could ship on a standard open source system managed to modernise that featureset.<p>(If anyone has any pointers let me know :-)</div><br/></div></div><div id="39797064" class="c"><input type="checkbox" id="c-39797064" checked=""/><div class="controls bullet"><span class="by">toomuchtodo</span><span>|</span><a href="#39794235">parent</a><span>|</span><a href="#39798139">prev</a><span>|</span><a href="#39796610">next</a><span>|</span><label class="collapse" for="c-39797064">[-]</label><label class="expand" for="c-39797064">[3 more]</label></div><br/><div class="children"><div class="content">Are you able to seek and selectively extract from squashfs archives using range headers if stored in object storage systems like S3?<p>Example: <a href="https:&#x2F;&#x2F;alexwlchan.net&#x2F;2019&#x2F;working-with-large-s3-objects&#x2F;" rel="nofollow">https:&#x2F;&#x2F;alexwlchan.net&#x2F;2019&#x2F;working-with-large-s3-objects&#x2F;</a></div><br/><div id="39798313" class="c"><input type="checkbox" id="c-39798313" checked=""/><div class="controls bullet"><span class="by">nolist_policy</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39797064">parent</a><span>|</span><a href="#39796610">next</a><span>|</span><label class="collapse" for="c-39798313">[-]</label><label class="expand" for="c-39798313">[2 more]</label></div><br/><div class="children"><div class="content">Certainly, squashfs is designed to be random-access.</div><br/><div id="39798416" class="c"><input type="checkbox" id="c-39798416" checked=""/><div class="controls bullet"><span class="by">jillesvangurp</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39798313">parent</a><span>|</span><a href="#39796610">next</a><span>|</span><label class="collapse" for="c-39798416">[-]</label><label class="expand" for="c-39798416">[1 more]</label></div><br/><div class="children"><div class="content">But S3 isn&#x27;t.</div><br/></div></div></div></div></div></div><div id="39796610" class="c"><input type="checkbox" id="c-39796610" checked=""/><div class="controls bullet"><span class="by">qwerty456127</span><span>|</span><a href="#39794235">parent</a><span>|</span><a href="#39797064">prev</a><span>|</span><a href="#39795838">next</a><span>|</span><label class="collapse" for="c-39796610">[-]</label><label class="expand" for="c-39796610">[4 more]</label></div><br/><div class="children"><div class="content">&gt; It&#x27;s also openable in 7zip<p>If only 7zip could also create them on Windows (it apparently can WIM which seems a direct Windows-native counterpart, also mountable on Linux).</div><br/><div id="39796651" class="c"><input type="checkbox" id="c-39796651" checked=""/><div class="controls bullet"><span class="by">dataflow</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39796610">parent</a><span>|</span><a href="#39795838">next</a><span>|</span><label class="collapse" for="c-39796651">[-]</label><label class="expand" for="c-39796651">[3 more]</label></div><br/><div class="children"><div class="content">WIM is the closest thing Windows has to a full file-based capture, but I&#x27;ve noticed that even that doesn&#x27;t capture everything, unfortunately. I forget exactly, but think it was extended attributes that DISM wouldn&#x27;t capture, despite the &#x2F;EA flag. Not sure if that was a file format limitation or just a DISM bug.</div><br/><div id="39796787" class="c"><input type="checkbox" id="c-39796787" checked=""/><div class="controls bullet"><span class="by">qwerty456127</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39796651">parent</a><span>|</span><a href="#39796990">next</a><span>|</span><label class="collapse" for="c-39796787">[-]</label><label class="expand" for="c-39796787">[1 more]</label></div><br/><div class="children"><div class="content">Very sad. Cross-platform extended attributes are the very thing I would love. I even imagine a new archive format which would be just a key-key-value (I mean it - two keys, a set of key-value pairs for every top level key - this is EA &#x2F; NTFS streams) store with values compressed using a common dictionary (also possibly encrypted&#x2F;signed with a common key). Needless to say such a format would enable almost any use case, especially if the layout of the file itself is architectured right. MacOS wouldn&#x27;t have to add their special folder (they add to every ZIP) anymore, tagging files and saving any metadata about them would be possible, saving multiple versions of the same file, alternative names (e.g. what you received it with and what you renamed it to) for the same file.<p>I even dream about the days when a file main stream would be pure data and all the metadata would go to EAs. Imagine an MP3 file where the main stream only records the sound but no ID3, all the metadata like the artist and the song names are handled as EAs and can be used in file operation commands.<p>This also can be made tape-friendly and eliminate need in TAR. Just make sure files (streamms&#x2F;EAs are written contiguous, closely-related streams go right near, compression is optional and the ToC+dictionary is replicated in a number of places like the beginning, the middle and the end).<p>As you might have guessed I use all the major OSes and single-OS solutions are of little use to me. Apparently I&#x27;d just use SquashFS but it&#x27;s use is limited on Windows because you can hardly make or mount one there - only unpack with 7zip.</div><br/></div></div><div id="39796990" class="c"><input type="checkbox" id="c-39796990" checked=""/><div class="controls bullet"><span class="by">mappu</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39796651">parent</a><span>|</span><a href="#39796787">prev</a><span>|</span><a href="#39795838">next</a><span>|</span><label class="collapse" for="c-39796990">[-]</label><label class="expand" for="c-39796990">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s easy to forget about supporting EAs on Windows - they are extremely uncommon because you practically need to be in kernelspace to write them. Ntoskrnl.exe has one or two EAs, almost nothing else does.<p>(ADS are super commonplace and the closer analogue to posix xattrs.)</div><br/></div></div></div></div></div></div><div id="39795838" class="c"><input type="checkbox" id="c-39795838" checked=""/><div class="controls bullet"><span class="by">Aachen</span><span>|</span><a href="#39794235">parent</a><span>|</span><a href="#39796610">prev</a><span>|</span><a href="#39794741">next</a><span>|</span><label class="collapse" for="c-39795838">[-]</label><label class="expand" for="c-39795838">[13 more]</label></div><br/><div class="children"><div class="content">That&#x27;s exactly what I&#x27;d like to avoid. I want to transfer a group of files (either to myself, friends, or website visitors), not make assumptions about the target system&#x27;s permission set. For copies of my own data where permissions are relevant, I&#x27;ve got a restic backup<p>Wake me up if a simple standard comes to pass that neither has user&#x2F;group ID, mode fields, nor bit-packed two-second-precision timestamps or similar silliness. Perhaps an executable bit for systems that insist on such things for being able to use the download in the intended way<p>(I self-made this before: a simple length-prefixed concatenation of filename and contents fields. The problem is that people would have to download an unpacker. That&#x27;s not broadly useful unless it is, as in that one case, a software distribution which they&#x27;re going to run anyway)</div><br/><div id="39796340" class="c"><input type="checkbox" id="c-39796340" checked=""/><div class="controls bullet"><span class="by">Brian_K_White</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39795838">parent</a><span>|</span><a href="#39796724">next</a><span>|</span><label class="collapse" for="c-39796340">[-]</label><label class="expand" for="c-39796340">[4 more]</label></div><br/><div class="children"><div class="content">No, too simple.<p>Sometimes you want to include data and sometimes you don&#x27;t for different reasons in different contexts. It&#x27;s not a data handlers job to decide what data is or isn&#x27;t included, it&#x27;s the senders job to decide what not to include and the receivers job to decide what to ignore.<p>The simplest example is probably just the file path. tar or zip don&#x27;t try to say whether or not a file in the container includes the full absolute path, a portion of the path, or no path.<p>The container should ideally be able to contain anything that any filesystem might have, or else it&#x27;s not a generally useful tool, it&#x27;s some annoying domain-specific specialized tool that one guy just luuuuuvs for his one use-case he thinks is obviously the most rational thing for anyone.<p>If you don&#x27;t want to include something like a uid, say for security reasons not to disclose the internal workings of something on your end, then arrange not to include it when creating the archive, the same way you wouldn&#x27;t necessarily include the full path to the same files. Or outside of a security concern like that, include all the data and let the recipient simply ignore any data that it doesn&#x27;t support.</div><br/><div id="39796704" class="c"><input type="checkbox" id="c-39796704" checked=""/><div class="controls bullet"><span class="by">maxerickson</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39796340">parent</a><span>|</span><a href="#39796724">next</a><span>|</span><label class="collapse" for="c-39796704">[-]</label><label class="expand" for="c-39796704">[3 more]</label></div><br/><div class="children"><div class="content">Is &quot;absolute path&quot; a coherent concept when you are talking about 2 systems?</div><br/><div id="39797807" class="c"><input type="checkbox" id="c-39797807" checked=""/><div class="controls bullet"><span class="by">Brian_K_White</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39796704">parent</a><span>|</span><a href="#39797363">next</a><span>|</span><label class="collapse" for="c-39797807">[-]</label><label class="expand" for="c-39797807">[1 more]</label></div><br/><div class="children"><div class="content">Is this question a coherent concept when it doesn&#x27;t change anything when you substitute any other term like &quot;full path&quot; or &quot;as much path as exists&quot; or &quot;any path&quot;?</div><br/></div></div><div id="39797363" class="c"><input type="checkbox" id="c-39797363" checked=""/><div class="controls bullet"><span class="by">wakawaka28</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39796704">parent</a><span>|</span><a href="#39797807">prev</a><span>|</span><a href="#39796724">next</a><span>|</span><label class="collapse" for="c-39797363">[-]</label><label class="expand" for="c-39797363">[1 more]</label></div><br/><div class="children"><div class="content">It can be if you make assumptions about the basic structure of both systems. Some people rely on this behavior. It can be a good idea or a bad idea, depending on what you&#x27;re doing.</div><br/></div></div></div></div></div></div><div id="39796724" class="c"><input type="checkbox" id="c-39796724" checked=""/><div class="controls bullet"><span class="by">jrockway</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39795838">parent</a><span>|</span><a href="#39796340">prev</a><span>|</span><a href="#39795893">next</a><span>|</span><label class="collapse" for="c-39796724">[-]</label><label class="expand" for="c-39796724">[3 more]</label></div><br/><div class="children"><div class="content">I agree very much with this.  Something that annoys me is how much information tar files leak.  Like, you don&#x27;t need to know the username or groupname of the person that originally owned the files.  You don&#x27;t need to copy around any mode bit other than &quot;executable&quot;.  You definitely don&#x27;t need &quot;last modified&quot; timestamps, which exist only to make builds that produce archives non-hermetic.<p>Frankly, I don&#x27;t even want any of these things on my mounted filesystem either.<p>&gt; The problem is that people would have to download an unpacker.<p>Your archive format just needs to be an executable that runs on every platform.  <a href="https:&#x2F;&#x2F;github.com&#x2F;jart&#x2F;cosmopolitan">https:&#x2F;&#x2F;github.com&#x2F;jart&#x2F;cosmopolitan</a> is something that could help with that.  (&quot;Who would execute an archive?  It could do anything,&quot; I hear you scream.  Well, tell that to anyone who has run &quot;curl | bash&quot;.)</div><br/><div id="39796974" class="c"><input type="checkbox" id="c-39796974" checked=""/><div class="controls bullet"><span class="by">theamk</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39796724">parent</a><span>|</span><a href="#39797377">next</a><span>|</span><label class="collapse" for="c-39796974">[-]</label><label class="expand" for="c-39796974">[1 more]</label></div><br/><div class="children"><div class="content">I know it may not seem this way, but a lot of people don&#x27;t ever run &quot;curl | bash&quot;, or if they do, they do so in throwaway VM (or container if source is mostly trusted)</div><br/></div></div><div id="39797377" class="c"><input type="checkbox" id="c-39797377" checked=""/><div class="controls bullet"><span class="by">wakawaka28</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39796724">parent</a><span>|</span><a href="#39796974">prev</a><span>|</span><a href="#39795893">next</a><span>|</span><label class="collapse" for="c-39797377">[-]</label><label class="expand" for="c-39797377">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s really a bad idea most of the time to have an archive that doubles as an executable. It&#x27;s not possible to cover every possible platform, and in the distant future those self-extracting archives may be impossible to extract without the required host system.</div><br/></div></div></div></div><div id="39795893" class="c"><input type="checkbox" id="c-39795893" checked=""/><div class="controls bullet"><span class="by">lmz</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39795838">parent</a><span>|</span><a href="#39796724">prev</a><span>|</span><a href="#39794741">next</a><span>|</span><label class="collapse" for="c-39795893">[-]</label><label class="expand" for="c-39795893">[5 more]</label></div><br/><div class="children"><div class="content">&gt; Wake me up if a simple standard comes to pass that neither has user&#x2F;group ID, mode fields, nor bit-packed two-second-precision timestamps or similar silliness. Perhaps an executable bit for systems that insist on such things for being able to use the download in the intended way<p>Other than having timestamps isn&#x27;t this a ZIP file? No user id, no x bit, widely available implementations... Not very simple though I guess.</div><br/><div id="39795937" class="c"><input type="checkbox" id="c-39795937" checked=""/><div class="controls bullet"><span class="by">sph</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39795893">parent</a><span>|</span><a href="#39794741">next</a><span>|</span><label class="collapse" for="c-39795937">[-]</label><label class="expand" for="c-39795937">[4 more]</label></div><br/><div class="children"><div class="content">Zip is extremely simple, and well documented.<p>I wrote a ReadableStream to Zip encoder (with no compression) in 50 lines of Javascript.</div><br/><div id="39796031" class="c"><input type="checkbox" id="c-39796031" checked=""/><div class="controls bullet"><span class="by">Aachen</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39795937">parent</a><span>|</span><a href="#39794741">next</a><span>|</span><label class="collapse" for="c-39796031">[-]</label><label class="expand" for="c-39796031">[3 more]</label></div><br/><div class="children"><div class="content">Me too but in php. I couldn&#x27;t find a streaming zip encoder that you can just require() and use without further hassle, so I wrote one (it&#x27;s on github somewhere).<p>The problem is that zip is finicky and extremely poorly documented. I had to look at what other implementations do to figure out some of the fields. About at least one field, the spec (from the early 90s or late 80s I think) says it is up to you to figure out what you want to put there! After all that, I additionally wrote my own docs in case someone coming after me needs to understand the format as well, but some things are just assumptions and &quot;everyone does it this way&quot;s, leading to me having only moderate confidence that I&#x27;ve followed the spec correctly. I haven&#x27;t found incompatibilities yet, but I&#x27;d also not be surprised if an old decoder doesn&#x27;t eat it or if a modern one made a different choice somewhere.<p>It&#x27;s also not as if I haven&#x27;t come across third party zip files that the Debian command line tool wouldn&#x27;t open but the standard Debian&#x2F;Cinnamon GUI utility was perfectly happy about. If it were so well-documented and standard, that shouldn&#x27;t be a thing. (Similarly, customers on macOS can&#x27;t open our encrypted 7z pentest report files. The Finder asks for the password and then flat-out tells them &quot;incorrect password&quot;, whereas in reality it seems to be unable to handle filename encryption. Idk if that is per the spec but incompatibilities are abound.)</div><br/><div id="39796119" class="c"><input type="checkbox" id="c-39796119" checked=""/><div class="controls bullet"><span class="by">canucker2016</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39796031">parent</a><span>|</span><a href="#39794741">next</a><span>|</span><label class="collapse" for="c-39796119">[-]</label><label class="expand" for="c-39796119">[2 more]</label></div><br/><div class="children"><div class="content">The PKWare Zip file spec is reasonably detailed.<p>If you&#x27;re not sure what the spec is trying to say, then either the PKZip binaries or the Info-ZIP zip&#x2F;unzip source code is your usual source of truth.<p>When one unzip works but another unzip app doesn&#x27;t, then you can usually point the finger at the last zip app that modified the zip file. There&#x27;s some inconsistency in the zip file.<p>Running &quot;unzip -t -v&quot; on the zip file in question may yield more info about the problem.</div><br/><div id="39796253" class="c"><input type="checkbox" id="c-39796253" checked=""/><div class="controls bullet"><span class="by">canucker2016</span><span>|</span><a href="#39794235">root</a><span>|</span><a href="#39796119">parent</a><span>|</span><a href="#39794741">next</a><span>|</span><label class="collapse" for="c-39796253">[-]</label><label class="expand" for="c-39796253">[1 more]</label></div><br/><div class="children"><div class="content">Here&#x27;s the link to the PKWARE APPNOTE.TXT<p><a href="https:&#x2F;&#x2F;pkware.cachefly.net&#x2F;webdocs&#x2F;casestudies&#x2F;APPNOTE.TXT" rel="nofollow">https:&#x2F;&#x2F;pkware.cachefly.net&#x2F;webdocs&#x2F;casestudies&#x2F;APPNOTE.TXT</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="39794741" class="c"><input type="checkbox" id="c-39794741" checked=""/><div class="controls bullet"><span class="by">bonki</span><span>|</span><a href="#39794235">parent</a><span>|</span><a href="#39795838">prev</a><span>|</span><a href="#39794794">next</a><span>|</span><label class="collapse" for="c-39794741">[-]</label><label class="expand" for="c-39794741">[1 more]</label></div><br/><div class="children"><div class="content">I second this.</div><br/></div></div></div></div><div id="39797901" class="c"><input type="checkbox" id="c-39797901" checked=""/><div class="controls bullet"><span class="by">t43562</span><span>|</span><a href="#39794235">prev</a><span>|</span><a href="#39795070">next</a><span>|</span><label class="collapse" for="c-39797901">[-]</label><label class="expand" for="c-39797901">[2 more]</label></div><br/><div class="children"><div class="content">I had to make an archiver once (commercial) so I did think about it a bit. I am not sure pack would solve anything for me.  It obviously solves the authors usecases but tar has some tricks which I don&#x27;t want to lose;<p>* Able to write to a pipe&#x2F;socket - lets you not waste space or time by writing to disc something that you intend to transmit over a pipe or TCP socket anyhow. It&#x27;s almost a &quot;virtual&quot; archive and it should be possible to make one that is far too big to fit into memory - because as you send each bit of it you deallocate that memory.  At the receiver each bit can be written to disc or extracted and then that memory is reused for the next bit - so the archive never fully &quot;exists&quot; but it does the job of serialising some data. An example could be piping the output of tar to an ssh command which untars it on a remote machine.<p>* Metadata has to be with the file data - not stuck at the end of the file - because you need to be able to start work without waiting till the file is fully received through your pipe.  You don&#x27;t want to be forced to have space to store the archive <i>and</i> the extracted files (may be a huge archive).<p>* Choice of compression - lzop is super fast such that using it can sometimes give slightly better performance than writing uncompressed data. OTOH that might not be your concern and XZ might suit you by compressing much more thoroughly. Either way it&#x27;s very nice to have compression that works across multiple files - which is especially helpful when compressing a lot of small files such as source code.<p>* Ability to encapsulate - should be able to put the packed data into any imaginable container like an encryption or data transmission protocol without insisting that the entire archive has to be fully read before members can start to be extracted&#x2F;processed. This is essentially the same as the pipe&#x2F;socket requirement.<p>I&#x27;m not saying that these things matter to everyone - I have just found them incredibly useful in a few critical situations. The world of ZIP users on Windows seems to be sort of blind to them - thinking firmly in that box.</div><br/><div id="39798187" class="c"><input type="checkbox" id="c-39798187" checked=""/><div class="controls bullet"><span class="by">masklinn</span><span>|</span><a href="#39797901">parent</a><span>|</span><a href="#39795070">next</a><span>|</span><label class="collapse" for="c-39798187">[-]</label><label class="expand" for="c-39798187">[1 more]</label></div><br/><div class="children"><div class="content">&gt; The world of ZIP users on Windows seems to be sort of blind to them - thinking firmly in that box.<p>Seems to me like this is you being blind to certain use cases, and so stuck in your streaming oriented box that you can not conceive of other use cases where a streaming format is actively detrimental.</div><br/></div></div></div></div><div id="39795070" class="c"><input type="checkbox" id="c-39795070" checked=""/><div class="controls bullet"><span class="by">SyrupThinker</span><span>|</span><a href="#39797901">prev</a><span>|</span><a href="#39797916">next</a><span>|</span><label class="collapse" for="c-39795070">[-]</label><label class="expand" for="c-39795070">[2 more]</label></div><br/><div class="children"><div class="content">Interesting, I&#x27;ve recently spent an unhealthy amount of time researching archival formats to build the same setup of using SQLite with ZStd.<p>My use case is extremely redundant data (specific website dumps + logs) that I want decently quick random access into,
and I was unhappy with either the access speed, quality&#x2F;usability or even existence of libraries for several formats.<p>Glancing over the code this seems to use the following setup:<p>- Aggregate files<p>- Chunk into blocks<p>- Compress blocks of fixed size<p>- Store file to chunk and chunk to block associations<p>What I did not see is a deduplication step for the chunks, or an attempt to group files (and by extend, blocks) by similarity in an attempt improve compression.<p>But I might have just missed that due to lack of familiarity with Pascal.<p>For anyone interested in this strategy, take a look at ZPAQ [1] by Matt Mahoney, you might know him from the Hutter Prize competition [2] &#x2F; Large Text Compression Benchmark. It takes 14th place with tuned parameters.<p>There&#x27;s also a maintained fork called zpaqfranz, but I ran into some issues like incorrect disk size estimates with it.
For me the code was also sometimes hard to read due to being a mix of English and Italian. So your mileage may vary.<p>[1]: <a href="http:&#x2F;&#x2F;mattmahoney.net&#x2F;dc&#x2F;zpaq.html" rel="nofollow">http:&#x2F;&#x2F;mattmahoney.net&#x2F;dc&#x2F;zpaq.html</a>
[2]: <a href="http:&#x2F;&#x2F;prize.hutter1.net" rel="nofollow">http:&#x2F;&#x2F;prize.hutter1.net</a>
[3]: <a href="https:&#x2F;&#x2F;github.com&#x2F;fcorbelli&#x2F;zpaqfranz">https:&#x2F;&#x2F;github.com&#x2F;fcorbelli&#x2F;zpaqfranz</a></div><br/><div id="39796022" class="c"><input type="checkbox" id="c-39796022" checked=""/><div class="controls bullet"><span class="by">juitpykyk</span><span>|</span><a href="#39795070">parent</a><span>|</span><a href="#39797916">next</a><span>|</span><label class="collapse" for="c-39796022">[-]</label><label class="expand" for="c-39796022">[1 more]</label></div><br/><div class="children"><div class="content">For your use case you might want to look at RocksDB.<p>It supports zstandard compression, random access, and it&#x27;s very robust.</div><br/></div></div></div></div><div id="39797916" class="c"><input type="checkbox" id="c-39797916" checked=""/><div class="controls bullet"><span class="by">rurban</span><span>|</span><a href="#39795070">prev</a><span>|</span><a href="#39794172">next</a><span>|</span><label class="collapse" for="c-39797916">[-]</label><label class="expand" for="c-39797916">[1 more]</label></div><br/><div class="children"><div class="content">Unfortunate name:<p>dnf info pack<p><pre><code>    Summary      : Convert code into runnable images
    URL          : https:&#x2F;&#x2F;github.com&#x2F;buildpacks&#x2F;pack
    License      : Apache-2.0 and BSD-2-Clause and BSD-3-Clause and ISC and MIT
    Description  : pack is a CLI implementation of the Platform Interface Specification
                 : for Cloud Native Buildpacks.</code></pre></div><br/></div></div><div id="39794172" class="c"><input type="checkbox" id="c-39794172" checked=""/><div class="controls bullet"><span class="by">jlhawn</span><span>|</span><a href="#39797916">prev</a><span>|</span><a href="#39794128">next</a><span>|</span><label class="collapse" for="c-39794172">[-]</label><label class="expand" for="c-39794172">[2 more]</label></div><br/><div class="children"><div class="content">When I read the title, I thought it was a new operating system-level containerization image format for filesystem layers and runtime config. But it looks like &quot;container format&quot; is a more general term for a collection of multiple files or streams into one. <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Container_format" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Container_format</a> TIL.<p>OS containers could use an update too, though. They&#x27;re often so big and tend to use multiple tar.gz files.</div><br/><div id="39797628" class="c"><input type="checkbox" id="c-39797628" checked=""/><div class="controls bullet"><span class="by">drpixie</span><span>|</span><a href="#39794172">parent</a><span>|</span><a href="#39794128">next</a><span>|</span><label class="collapse" for="c-39797628">[-]</label><label class="expand" for="c-39797628">[1 more]</label></div><br/><div class="children"><div class="content">Similar. I though it would be a media file format ... containing audio, video, tags, pics, etc.</div><br/></div></div></div></div><div id="39794128" class="c"><input type="checkbox" id="c-39794128" checked=""/><div class="controls bullet"><span class="by">kevmo314</span><span>|</span><a href="#39794172">prev</a><span>|</span><a href="#39794319">next</a><span>|</span><label class="collapse" for="c-39794128">[-]</label><label class="expand" for="c-39794128">[10 more]</label></div><br/><div class="children"><div class="content">Wow, Pascal! Haven&#x27;t seen a project in Pascal in a while. <a href="https:&#x2F;&#x2F;github.com&#x2F;PackOrganization&#x2F;Pack">https:&#x2F;&#x2F;github.com&#x2F;PackOrganization&#x2F;Pack</a></div><br/><div id="39794305" class="c"><input type="checkbox" id="c-39794305" checked=""/><div class="controls bullet"><span class="by">nkozyra</span><span>|</span><a href="#39794128">parent</a><span>|</span><a href="#39795041">next</a><span>|</span><label class="collapse" for="c-39794305">[-]</label><label class="expand" for="c-39794305">[2 more]</label></div><br/><div class="children"><div class="content">Yeah, I&#x27;ll wait for the ALGOL 68 port.</div><br/><div id="39796561" class="c"><input type="checkbox" id="c-39796561" checked=""/><div class="controls bullet"><span class="by">jksmith</span><span>|</span><a href="#39794128">root</a><span>|</span><a href="#39794305">parent</a><span>|</span><a href="#39795041">next</a><span>|</span><label class="collapse" for="c-39796561">[-]</label><label class="expand" for="c-39796561">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Argumentum_ad_populum" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Argumentum_ad_populum</a> can be a mistake of the youth. Just sayin.</div><br/></div></div></div></div><div id="39795041" class="c"><input type="checkbox" id="c-39795041" checked=""/><div class="controls bullet"><span class="by">mikepurvis</span><span>|</span><a href="#39794128">parent</a><span>|</span><a href="#39794305">prev</a><span>|</span><a href="#39794743">next</a><span>|</span><label class="collapse" for="c-39795041">[-]</label><label class="expand" for="c-39795041">[4 more]</label></div><br/><div class="children"><div class="content">Indeed, this is the kind of thing I would have expected to see written in Go or Rust. I wonder what the motivation for this implementation choice was.</div><br/><div id="39796490" class="c"><input type="checkbox" id="c-39796490" checked=""/><div class="controls bullet"><span class="by">jksmith</span><span>|</span><a href="#39794128">root</a><span>|</span><a href="#39795041">parent</a><span>|</span><a href="#39795468">next</a><span>|</span><label class="collapse" for="c-39796490">[-]</label><label class="expand" for="c-39796490">[2 more]</label></div><br/><div class="children"><div class="content">Let&#x27;s say the tyranny of the C children has diverted our attention. I&#x27;ll make a wild ass statement: If Modula-2 (Wirth family with Pascal) had caught on, you would have had whatever you wanted from Rust 20 years ago. But the C noise dominated the narrative.<p>Use the language that makes you money and encourages you to write code that addresses domains requiring more than just bolting together framework pieces. AI can do a measurable chunk of that work.</div><br/><div id="39797078" class="c"><input type="checkbox" id="c-39797078" checked=""/><div class="controls bullet"><span class="by">theamk</span><span>|</span><a href="#39794128">root</a><span>|</span><a href="#39796490">parent</a><span>|</span><a href="#39795468">next</a><span>|</span><label class="collapse" for="c-39797078">[-]</label><label class="expand" for="c-39797078">[1 more]</label></div><br/><div class="children"><div class="content">20 years ago was 2004, and Borland Delphi 7 was out. It was Pascal-based, but it didn&#x27;t had that much difference from C programs.<p>It had a nice unit system with separate interface &amp; implementation sections. This was very nice. The unit files were not compatible with anything else, including previous versions of Delphi - this was not nice, especially since a lot of libraries were distributed in compiled form.<p>The compilation speed was amazingly fast. This is one thing that was unequivocally better than C at this time.<p>There were range types (type TExample = 1..1000), but they more of a gimmick - turns out there are very few use cases for build-time limits. There were some uses back in DOS days when you&#x27;d have hardcoded resolution of 640x480, but in the windows time most variables were just Integer.<p>Arrays had optional range checks on access, that was also nice. We&#x27;d turn them off if we felt programs were too slow.<p>Otherwise, it was basically same as C with a bit of classes - custom memory allocation&#x2F;deallocation, dangling pointers, NULLs, threads you start and stop, mutexes and critical sections. When I finally switched from Pascal to C, I didn&#x27;t see that much difference (except compilation got much slower)<p>Maybe you&#x27;d say that Borland did something wrong, and Wirth&#x27;s Modula-2 would be much better than Borland&#x27;s Pascal, but I doubt this.</div><br/></div></div></div></div><div id="39795468" class="c"><input type="checkbox" id="c-39795468" checked=""/><div class="controls bullet"><span class="by">benignslime</span><span>|</span><a href="#39794128">root</a><span>|</span><a href="#39795041">parent</a><span>|</span><a href="#39796490">prev</a><span>|</span><a href="#39794743">next</a><span>|</span><label class="collapse" for="c-39795468">[-]</label><label class="expand" for="c-39795468">[1 more]</label></div><br/><div class="children"><div class="content">In the &quot;Source&quot; section of the site:<p>&gt; It is written in the Pascal language, a well-stabilized standard language with compatibility promises for decades. Using the FreePascal compiler and the Lazarus IDE for free and easy development.
The code is written to be seen as pseudocode. In place of need, comments are written to help.</div><br/></div></div></div></div><div id="39794743" class="c"><input type="checkbox" id="c-39794743" checked=""/><div class="controls bullet"><span class="by">p0w3n3d</span><span>|</span><a href="#39794128">parent</a><span>|</span><a href="#39795041">prev</a><span>|</span><a href="#39794319">next</a><span>|</span><label class="collapse" for="c-39794743">[-]</label><label class="expand" for="c-39794743">[3 more]</label></div><br/><div class="children"><div class="content">Last time is did some Pascal was 2006&#x2F;7. I think I never saw production-grade code myself.<p>I wonder if this line is an array in-situ?<p><pre><code>  Split(APath, [sfodpoWithoutPathDelimiter, sfodpoWithoutExtension], P, N)</code></pre></div><br/><div id="39795541" class="c"><input type="checkbox" id="c-39795541" checked=""/><div class="controls bullet"><span class="by">mananaysiempre</span><span>|</span><a href="#39794128">root</a><span>|</span><a href="#39794743">parent</a><span>|</span><a href="#39796503">next</a><span>|</span><label class="collapse" for="c-39795541">[-]</label><label class="expand" for="c-39795541">[1 more]</label></div><br/><div class="children"><div class="content">No, it’s a set (bitmask) constant[1].<p>[1] <a href="https:&#x2F;&#x2F;www.freepascal.org&#x2F;docs-html&#x2F;current&#x2F;ref&#x2F;refse83.html" rel="nofollow">https:&#x2F;&#x2F;www.freepascal.org&#x2F;docs-html&#x2F;current&#x2F;ref&#x2F;refse83.htm...</a></div><br/></div></div><div id="39796503" class="c"><input type="checkbox" id="c-39796503" checked=""/><div class="controls bullet"><span class="by">jksmith</span><span>|</span><a href="#39794128">root</a><span>|</span><a href="#39794743">parent</a><span>|</span><a href="#39795541">prev</a><span>|</span><a href="#39794319">next</a><span>|</span><label class="collapse" for="c-39796503">[-]</label><label class="expand" for="c-39796503">[1 more]</label></div><br/><div class="children"><div class="content">But yeah FPC supports ref counted dynamic arrays with &quot;+&quot; operator.</div><br/></div></div></div></div></div></div><div id="39794319" class="c"><input type="checkbox" id="c-39794319" checked=""/><div class="controls bullet"><span class="by">xcdzvyn</span><span>|</span><a href="#39794128">prev</a><span>|</span><a href="#39797104">next</a><span>|</span><label class="collapse" for="c-39794319">[-]</label><label class="expand" for="c-39794319">[24 more]</label></div><br/><div class="children"><div class="content">With all due respect, I find it hard to believe the author stumbled upon a trivial method of improving tarballing performance by several orders of magnitude that nobody else had considered before.<p>If I understand correctly, they&#x27;re suggesting Pack, which both archives and compresses, is 30x faster than creating a plain tar archive. That just sounds like you used multithreading and tar didn&#x27;t.<p>Either way, it&#x27;d be nice to see [a version of] Pack support plain archival, rather than being forced to tack on Zstd.</div><br/><div id="39794333" class="c"><input type="checkbox" id="c-39794333" checked=""/><div class="controls bullet"><span class="by">TylerE</span><span>|</span><a href="#39794319">parent</a><span>|</span><a href="#39797199">next</a><span>|</span><label class="collapse" for="c-39794333">[-]</label><label class="expand" for="c-39794333">[11 more]</label></div><br/><div class="children"><div class="content">That’s more because plain tar is actually a really dumb way of handling files that aren’t going to tape.<p>Being better than that is not a hard bar.</div><br/><div id="39794426" class="c"><input type="checkbox" id="c-39794426" checked=""/><div class="controls bullet"><span class="by">cogman10</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794333">parent</a><span>|</span><a href="#39797199">next</a><span>|</span><label class="collapse" for="c-39794426">[-]</label><label class="expand" for="c-39794426">[10 more]</label></div><br/><div class="children"><div class="content">The tar file format is REALLY bad.  It&#x27;s pretty much impossible to thread because it&#x27;s just doing metadata then content and repeatably concatenating.<p>IE<p><pre><code>    &#x2F;foo.txt 21
    This is the foo file
    &#x2F;bar.txt 21
    This is the bar file
</code></pre>
That makes it super hard to deal with as you essentially need to navigate the entire tar file before you can list the directories in a tar file.  To add a file you have to wait for the previous file to be added.<p>Using something like sqlite solves this particular problem because you can have a table with file names and a table with file contents that can both be inserted into in parallel (though that will mean the contents aren&#x27;t guaranteed to be contiguous.)  Since SQLite is just a btree it&#x27;s easy (well, known) how to concurrently modify the contents of the tree.</div><br/><div id="39798040" class="c"><input type="checkbox" id="c-39798040" checked=""/><div class="controls bullet"><span class="by">sargun</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794426">parent</a><span>|</span><a href="#39794534">next</a><span>|</span><label class="collapse" for="c-39798040">[-]</label><label class="expand" for="c-39798040">[1 more]</label></div><br/><div class="children"><div class="content">Funnily enough, tar is like 3 different formats (PaX, tar, ustar). One of the annoying parts of the tar format is that even though you scan all the metadata upfront, you have to keep the directory metadata in RAM until the end and have to wait to apply it at the end.</div><br/></div></div><div id="39794534" class="c"><input type="checkbox" id="c-39794534" checked=""/><div class="controls bullet"><span class="by">TylerE</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794426">parent</a><span>|</span><a href="#39798040">prev</a><span>|</span><a href="#39797199">next</a><span>|</span><label class="collapse" for="c-39794534">[-]</label><label class="expand" for="c-39794534">[8 more]</label></div><br/><div class="children"><div class="content">Or just what zip and every other format does an skits put all the metadata at the beginning - enough to list all files, and extract any single one efficiently</div><br/><div id="39794731" class="c"><input type="checkbox" id="c-39794731" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794534">parent</a><span>|</span><a href="#39794586">next</a><span>|</span><label class="collapse" for="c-39794731">[-]</label><label class="expand" for="c-39794731">[3 more]</label></div><br/><div class="children"><div class="content">zip interestingly sticks the metadata at the end.  That lets you add files to a zip without touching what&#x27;s already been zipped.  Just new metadata at the end.<p>Modern tape archives like LTFS do the same thing as well.</div><br/><div id="39797803" class="c"><input type="checkbox" id="c-39797803" checked=""/><div class="controls bullet"><span class="by">t43562</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794731">parent</a><span>|</span><a href="#39794586">next</a><span>|</span><label class="collapse" for="c-39797803">[-]</label><label class="expand" for="c-39797803">[2 more]</label></div><br/><div class="children"><div class="content">That sounds like you need to have fetched the whole zip before you can unzip it - which is not what one wants when making &quot;virtual tarfiles&quot; which only exist in a pipe. (i.e. you&#x27;re packing files in at one end of the pipe and unpacking them at the other)</div><br/><div id="39798446" class="c"><input type="checkbox" id="c-39798446" checked=""/><div class="controls bullet"><span class="by">bdhcuidbebe</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39797803">parent</a><span>|</span><a href="#39794586">next</a><span>|</span><label class="collapse" for="c-39798446">[-]</label><label class="expand" for="c-39798446">[1 more]</label></div><br/><div class="children"><div class="content">Just fseek to the end.<p>Zip format was not designed for piping.</div><br/></div></div></div></div></div></div><div id="39794586" class="c"><input type="checkbox" id="c-39794586" checked=""/><div class="controls bullet"><span class="by">nullindividual</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794534">parent</a><span>|</span><a href="#39794731">prev</a><span>|</span><a href="#39797199">next</a><span>|</span><label class="collapse" for="c-39794586">[-]</label><label class="expand" for="c-39794586">[4 more]</label></div><br/><div class="children"><div class="content">Tapes don&#x27;t (? certainly didn&#x27;t) operate this way. You need to read the entire tape to list the contents.<p>Since tar is a Tape ARchive, the way tar operates makes sense (as it was designed for both output to file <i>and</i> device, i.e. tape).</div><br/><div id="39794800" class="c"><input type="checkbox" id="c-39794800" checked=""/><div class="controls bullet"><span class="by">tredre3</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794586">parent</a><span>|</span><a href="#39794718">next</a><span>|</span><label class="collapse" for="c-39794800">[-]</label><label class="expand" for="c-39794800">[1 more]</label></div><br/><div class="children"><div class="content">That point is always raised on every criticism of tar (that it&#x27;s good at tape).<p>Yes! It is! But it&#x27;s awful at archive files, which is what it&#x27;s used for nowadays and what&#x27;s being discussed right now.<p>Over the past 50 years some people did try to improve tar. People did develop ways to append a file table at the end of an archive file. Maintaining compatibility with tapes, all tar utilities, and piping.<p>Similarly, driven people did extend (pk)zip to cover all the unix-y needs. In fact the current zip utility still supports permissions and symlinks to this day.<p>But despite those better methods, people keep pushing og tar. Because it&#x27;s good at tape archival. Sigh.</div><br/></div></div><div id="39794718" class="c"><input type="checkbox" id="c-39794718" checked=""/><div class="controls bullet"><span class="by">monocasa</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794586">parent</a><span>|</span><a href="#39794800">prev</a><span>|</span><a href="#39797199">next</a><span>|</span><label class="collapse" for="c-39794718">[-]</label><label class="expand" for="c-39794718">[2 more]</label></div><br/><div class="children"><div class="content">Tapes currently don&#x27;t really operate like tar anymore either.  Filesystems like LTFS stick the metadata all in one blob somewhere.</div><br/><div id="39794808" class="c"><input type="checkbox" id="c-39794808" checked=""/><div class="controls bullet"><span class="by">nullindividual</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794718">parent</a><span>|</span><a href="#39797199">next</a><span>|</span><label class="collapse" for="c-39794808">[-]</label><label class="expand" for="c-39794808">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s been a long time since I&#x27;ve operated tape, so good to know things have changed for the better.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="39797199" class="c"><input type="checkbox" id="c-39797199" checked=""/><div class="controls bullet"><span class="by">jrockway</span><span>|</span><a href="#39794319">parent</a><span>|</span><a href="#39794333">prev</a><span>|</span><a href="#39794928">next</a><span>|</span><label class="collapse" for="c-39797199">[-]</label><label class="expand" for="c-39797199">[1 more]</label></div><br/><div class="children"><div class="content">gzip is really, really, really slow, so it&#x27;s pretty easy to make a thing that uses gzip fast by switching to Zstandard.</div><br/></div></div><div id="39794928" class="c"><input type="checkbox" id="c-39794928" checked=""/><div class="controls bullet"><span class="by">Hello71</span><span>|</span><a href="#39794319">parent</a><span>|</span><a href="#39797199">prev</a><span>|</span><a href="#39794355">next</a><span>|</span><label class="collapse" for="c-39794928">[-]</label><label class="expand" for="c-39794928">[4 more]</label></div><br/><div class="children"><div class="content">Also, 4.7 seconds to read 1345 MB in 81k files is suspiciously slow. On my six-year-old low&#x2F;mid-range Intel 660p with Linux 6.8, tar -c &#x2F;usr&#x2F;lib &gt;&#x2F;dev&#x2F;null with 2.4 GiB in 49k files takes about 1.25s cold and 0.32s warm. Of course, the sales pitch has no explanation of which hardware, software, parameters, or test procedures were used. I reckon tar was tested with cold cache and pack with warm cache, and both are basically benchmarking I&#x2F;O speed.</div><br/><div id="39795558" class="c"><input type="checkbox" id="c-39795558" checked=""/><div class="controls bullet"><span class="by">lilyball</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794928">parent</a><span>|</span><a href="#39794355">next</a><span>|</span><label class="collapse" for="c-39795558">[-]</label><label class="expand" for="c-39795558">[3 more]</label></div><br/><div class="children"><div class="content">The footnotes at the bottom says<p>&gt; <i>Development machine with a two-year-old CPU and NVMe disk, using Windows with the NTFS file system. The differences are even greater on Linux using ext4. Value holds on an old HDD and one-core CPU.</i><p>&gt; <i>All corresponding official programs were used in an out-of-the-box configuration at the time of writing in a warm state.</i></div><br/><div id="39797884" class="c"><input type="checkbox" id="c-39797884" checked=""/><div class="controls bullet"><span class="by">Hello71</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39795558">parent</a><span>|</span><a href="#39795845">next</a><span>|</span><label class="collapse" for="c-39797884">[-]</label><label class="expand" for="c-39797884">[1 more]</label></div><br/><div class="children"><div class="content">My apologies, the text color is barely legible on my machine. Those details are still minimal though; what versions of software? How much RAM is installed? Why is 7-Zip set to maximum compression but zstd is not? Why is tar.zst not included for a fair comparison of the Pack-specific (SQLite) improvements on top of from the standard solution?</div><br/></div></div><div id="39795845" class="c"><input type="checkbox" id="c-39795845" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39795558">parent</a><span>|</span><a href="#39797884">prev</a><span>|</span><a href="#39794355">next</a><span>|</span><label class="collapse" for="c-39795845">[-]</label><label class="expand" for="c-39795845">[1 more]</label></div><br/><div class="children"><div class="content">HDD for testing is a pretty big caveat for modern tooling benchmarks. Maybe everything holds the same if done on a SSD, but that feels like a pretty big assumption given the wildly different performance characteristics between the two.</div><br/></div></div></div></div></div></div><div id="39794355" class="c"><input type="checkbox" id="c-39794355" checked=""/><div class="controls bullet"><span class="by">darby_eight</span><span>|</span><a href="#39794319">parent</a><span>|</span><a href="#39794928">prev</a><span>|</span><a href="#39796233">next</a><span>|</span><label class="collapse" for="c-39794355">[-]</label><label class="expand" for="c-39794355">[6 more]</label></div><br/><div class="children"><div class="content">Eh, it&#x27;s not that hard to imagine given how rare it is to zip 81k files of around 1kb each.</div><br/><div id="39794457" class="c"><input type="checkbox" id="c-39794457" checked=""/><div class="controls bullet"><span class="by">iscoelho</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794355">parent</a><span>|</span><a href="#39794740">next</a><span>|</span><label class="collapse" for="c-39794457">[-]</label><label class="expand" for="c-39794457">[3 more]</label></div><br/><div class="children"><div class="content">Not that rare at all. Take a full disk zip&#x2F;tar of any Linux&#x2F;Windows filesystem and you&#x27;ll encounter a lot of small files.</div><br/><div id="39794504" class="c"><input type="checkbox" id="c-39794504" checked=""/><div class="controls bullet"><span class="by">darby_eight</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794457">parent</a><span>|</span><a href="#39794740">next</a><span>|</span><label class="collapse" for="c-39794504">[-]</label><label class="expand" for="c-39794504">[2 more]</label></div><br/><div class="children"><div class="content">Ok? How are you comparing these systems to the benchmark so they might be considered relevant?  Compressing &quot;Lots of small files&quot; describes an infinite variety of workloads. To achieve anything close to the benchmark you&#x27;d need to specifically only compress only small files in a single directory of an average small size. And even the contents of those files would have large implications as to expected performance....</div><br/><div id="39795254" class="c"><input type="checkbox" id="c-39795254" checked=""/><div class="controls bullet"><span class="by">iscoelho</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794504">parent</a><span>|</span><a href="#39794740">next</a><span>|</span><label class="collapse" for="c-39795254">[-]</label><label class="expand" for="c-39795254">[1 more]</label></div><br/><div class="children"><div class="content">My comment is not making any claims about that. It&#x27;s just a correction that filesystems with &quot;81k 1KB files&quot; are indeed common.</div><br/></div></div></div></div></div></div><div id="39794740" class="c"><input type="checkbox" id="c-39794740" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794355">parent</a><span>|</span><a href="#39794457">prev</a><span>|</span><a href="#39796233">next</a><span>|</span><label class="collapse" for="c-39794740">[-]</label><label class="expand" for="c-39794740">[2 more]</label></div><br/><div class="children"><div class="content">That&#x27;s basically any large source repo.</div><br/><div id="39795870" class="c"><input type="checkbox" id="c-39795870" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#39794319">root</a><span>|</span><a href="#39794740">parent</a><span>|</span><a href="#39796233">next</a><span>|</span><label class="collapse" for="c-39795870">[-]</label><label class="expand" for="c-39795870">[1 more]</label></div><br/><div class="children"><div class="content">Zipping up a project directory even without git can be a big file collection. Python virtual environment or node_modules, can quickly get into thousands of small files.</div><br/></div></div></div></div></div></div><div id="39796233" class="c"><input type="checkbox" id="c-39796233" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#39794319">parent</a><span>|</span><a href="#39794355">prev</a><span>|</span><a href="#39797104">next</a><span>|</span><label class="collapse" for="c-39796233">[-]</label><label class="expand" for="c-39796233">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s like 3x not 30x but yes same skepticism</div><br/></div></div></div></div><div id="39797104" class="c"><input type="checkbox" id="c-39797104" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#39794319">prev</a><span>|</span><a href="#39794136">next</a><span>|</span><label class="collapse" for="c-39797104">[-]</label><label class="expand" for="c-39797104">[3 more]</label></div><br/><div class="children"><div class="content">sqlite is great as a &quot;file format&quot; for a particular application, but I think it&#x27;s a bad interchange format.<p>As mediocre as zip and tar are, you can cobble together read&#x2F;write support without even needing a library. With sqlite, your only real option is to bundle sqlite itself, and while it&#x27;s relatively lightweight, it&#x27;s far from trivial.<p>zip has support for zstd, and if you wanted to make it go faster, you could embed some index metadata.<p>I can&#x27;t see any specs for their format, not even a description of the sqlite tables.</div><br/><div id="39797154" class="c"><input type="checkbox" id="c-39797154" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#39797104">parent</a><span>|</span><a href="#39794136">next</a><span>|</span><label class="collapse" for="c-39797154">[-]</label><label class="expand" for="c-39797154">[2 more]</label></div><br/><div class="children"><div class="content">After overwriting the &quot;Pack&quot; magic bytes back to the SQLite default values, I was able to open it and see the following tables<p><pre><code>    CREATE TABLE Content(ID INTEGER PRIMARY KEY, Value BLOB);
    CREATE TABLE Item(ID INTEGER PRIMARY KEY, Parent INTEGER, Kind INTEGER, Name TEXT);
    CREATE TABLE ItemContent(ID INTEGER PRIMARY KEY, Item INTEGER, ItemPosition INTEGER, Content INTEGER, ContentPosition INTEGER, Size INTEGER);
</code></pre>
According to the `.indexes` directive, there are... no indexes. What&#x27;s the point of sqlite if you&#x27;re not going to index things?<p>All the data is stored in one big blob (the &quot;Value&quot; column of the &quot;Content&quot; table), with the metadata storing offsets into it. It looks like there&#x27;s still the possibility of things being split over multiple blobs (to circumvent the 2GB blob size limit)</div><br/><div id="39797637" class="c"><input type="checkbox" id="c-39797637" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#39797104">root</a><span>|</span><a href="#39797154">parent</a><span>|</span><a href="#39794136">next</a><span>|</span><label class="collapse" for="c-39797637">[-]</label><label class="expand" for="c-39797637">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve reverse engineered the format and written up my findings here: <a href="https:&#x2F;&#x2F;github.com&#x2F;DavidBuchanan314&#x2F;pack-analysis">https:&#x2F;&#x2F;github.com&#x2F;DavidBuchanan314&#x2F;pack-analysis</a><p>Summary:<p>- Custom sqlite magic bytes makes the format incompatible with all existing sqlite tooling.<p>- No support for file metadata.<p>- There&#x27;s no version field (afaict), making future format improvements difficult.<p>Edit: A previous version of this comment had a much longer list of complaints, but after taking a closer look, I retract them. I was looking at the MediaKit.pack file as an example, which, due to being relatively small, packed all its files into a single BLOB. I was under the mistaken impression that the same approach was taken for larger files, but after some further testing I see that they&#x27;re split up into ~8MB chunks.<p>Though, if you have lots of small files (say, a couple of kilobytes each) then random access performance could suffer.</div><br/></div></div></div></div></div></div><div id="39794136" class="c"><input type="checkbox" id="c-39794136" checked=""/><div class="controls bullet"><span class="by">mmastrac</span><span>|</span><a href="#39797104">prev</a><span>|</span><a href="#39794773">next</a><span>|</span><label class="collapse" for="c-39794136">[-]</label><label class="expand" for="c-39794136">[14 more]</label></div><br/><div class="children"><div class="content">Sqlite3 is universal, but now your spec is entirely reliant on Sqlite3&#x27;s format and all the quirks required to support that.<p>If you actually care about the future, spec out your own database format and use that instead. It could even be mostly a copy of Sqlite3, but at least it would be part of the spec itself.</div><br/><div id="39794309" class="c"><input type="checkbox" id="c-39794309" checked=""/><div class="controls bullet"><span class="by">hgs3</span><span>|</span><a href="#39794136">parent</a><span>|</span><a href="#39794147">next</a><span>|</span><label class="collapse" for="c-39794309">[-]</label><label class="expand" for="c-39794309">[5 more]</label></div><br/><div class="children"><div class="content">You&#x27;re not &quot;wrong&quot; but Sqlite isn&#x27;t your run-of-the-mill project. &quot;The SQLite file format is stable, cross-platform, and backwards compatible and the developers pledge to keep it that way through the year 2050.&quot; [1]<p>[1] <a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;</a></div><br/><div id="39796217" class="c"><input type="checkbox" id="c-39796217" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#39794136">root</a><span>|</span><a href="#39794309">parent</a><span>|</span><a href="#39794756">next</a><span>|</span><label class="collapse" for="c-39796217">[-]</label><label class="expand" for="c-39796217">[3 more]</label></div><br/><div class="children"><div class="content">How many sqlite implementations are there?<p>Do you need to generate sqlite bindings for every language&#x2F;runtime? E g. Cloudflare workers</div><br/><div id="39797394" class="c"><input type="checkbox" id="c-39797394" checked=""/><div class="controls bullet"><span class="by">wakawaka28</span><span>|</span><a href="#39794136">root</a><span>|</span><a href="#39796217">parent</a><span>|</span><a href="#39794756">next</a><span>|</span><label class="collapse" for="c-39797394">[-]</label><label class="expand" for="c-39797394">[2 more]</label></div><br/><div class="children"><div class="content">I suppose you do need bindings for every language. But sqlite is in C and is extremely popular. If you can&#x27;t get bindings as one of the first third party libraries your language supports, it&#x27;s probably a shitty language anyway.</div><br/><div id="39797504" class="c"><input type="checkbox" id="c-39797504" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#39794136">root</a><span>|</span><a href="#39797394">parent</a><span>|</span><a href="#39794756">next</a><span>|</span><label class="collapse" for="c-39797504">[-]</label><label class="expand" for="c-39797504">[1 more]</label></div><br/><div class="children"><div class="content">Brilliant</div><br/></div></div></div></div></div></div><div id="39794756" class="c"><input type="checkbox" id="c-39794756" checked=""/><div class="controls bullet"><span class="by">orf</span><span>|</span><a href="#39794136">root</a><span>|</span><a href="#39794309">parent</a><span>|</span><a href="#39796217">prev</a><span>|</span><a href="#39794147">next</a><span>|</span><label class="collapse" for="c-39794756">[-]</label><label class="expand" for="c-39794756">[1 more]</label></div><br/><div class="children"><div class="content">How different is this to any other run of the mill project with few active developers on a single implementation, with backwards compatibility based entirely on promises?<p>Hot take: SQLite has bugs and quirks.</div><br/></div></div></div></div><div id="39794147" class="c"><input type="checkbox" id="c-39794147" checked=""/><div class="controls bullet"><span class="by">kevmo314</span><span>|</span><a href="#39794136">parent</a><span>|</span><a href="#39794309">prev</a><span>|</span><a href="#39794338">next</a><span>|</span><label class="collapse" for="c-39794147">[-]</label><label class="expand" for="c-39794147">[5 more]</label></div><br/><div class="children"><div class="content">On the other hand, by using Sqlite one can reimplement this format in another language with very little effort.</div><br/><div id="39794530" class="c"><input type="checkbox" id="c-39794530" checked=""/><div class="controls bullet"><span class="by">KerrAvon</span><span>|</span><a href="#39794136">root</a><span>|</span><a href="#39794147">parent</a><span>|</span><a href="#39794338">next</a><span>|</span><label class="collapse" for="c-39794530">[-]</label><label class="expand" for="c-39794530">[4 more]</label></div><br/><div class="children"><div class="content">It requires the sqlite3 library bindings, which might be a lot of effort.</div><br/><div id="39794780" class="c"><input type="checkbox" id="c-39794780" checked=""/><div class="controls bullet"><span class="by">0cf8612b2e1e</span><span>|</span><a href="#39794136">root</a><span>|</span><a href="#39794530">parent</a><span>|</span><a href="#39794338">next</a><span>|</span><label class="collapse" for="c-39794780">[-]</label><label class="expand" for="c-39794780">[3 more]</label></div><br/><div class="children"><div class="content">Is there a mainstream language which does not have SQLite bindings?</div><br/><div id="39795786" class="c"><input type="checkbox" id="c-39795786" checked=""/><div class="controls bullet"><span class="by">0x457</span><span>|</span><a href="#39794136">root</a><span>|</span><a href="#39794780">parent</a><span>|</span><a href="#39794338">next</a><span>|</span><label class="collapse" for="c-39795786">[-]</label><label class="expand" for="c-39795786">[2 more]</label></div><br/><div class="children"><div class="content">Probably Go because of CGO.</div><br/><div id="39797096" class="c"><input type="checkbox" id="c-39797096" checked=""/><div class="controls bullet"><span class="by">klabb3</span><span>|</span><a href="#39794136">root</a><span>|</span><a href="#39795786">parent</a><span>|</span><a href="#39794338">next</a><span>|</span><label class="collapse" for="c-39797096">[-]</label><label class="expand" for="c-39797096">[1 more]</label></div><br/><div class="children"><div class="content">Go has both. The CGO-bindings are preferable, generally. It’s very mature, fast and works great.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;mattn&#x2F;go-sqlite3">https:&#x2F;&#x2F;github.com&#x2F;mattn&#x2F;go-sqlite3</a></div><br/></div></div></div></div></div></div></div></div></div></div><div id="39794338" class="c"><input type="checkbox" id="c-39794338" checked=""/><div class="controls bullet"><span class="by">sitkack</span><span>|</span><a href="#39794136">parent</a><span>|</span><a href="#39794147">prev</a><span>|</span><a href="#39794205">next</a><span>|</span><label class="collapse" for="c-39794338">[-]</label><label class="expand" for="c-39794338">[1 more]</label></div><br/><div class="children"><div class="content">sqlite should be an implementation detail. The table format should be fully documented and use a sqlite virtual table module.</div><br/></div></div><div id="39794205" class="c"><input type="checkbox" id="c-39794205" checked=""/><div class="controls bullet"><span class="by">lordmauve</span><span>|</span><a href="#39794136">parent</a><span>|</span><a href="#39794338">prev</a><span>|</span><a href="#39794773">next</a><span>|</span><label class="collapse" for="c-39794205">[-]</label><label class="expand" for="c-39794205">[2 more]</label></div><br/><div class="children"><div class="content">&gt; Most popular solutions like Zip, gzip, tar, RAR, or 7-Zip are near or more than three decades old.<p>If I can&#x27;t extract .pack archives 3 decades from now, the use of SQLite 3 will be the reason.</div><br/><div id="39797068" class="c"><input type="checkbox" id="c-39797068" checked=""/><div class="controls bullet"><span class="by">rpdillon</span><span>|</span><a href="#39794136">root</a><span>|</span><a href="#39794205">parent</a><span>|</span><a href="#39794773">next</a><span>|</span><label class="collapse" for="c-39797068">[-]</label><label class="expand" for="c-39797068">[1 more]</label></div><br/><div class="children"><div class="content">What makes you think that? It&#x27;s a very widely-used and stable format, cited as a great format for archival use.<p>The Library of Congress has a page that goes into some depth with respect to their sustainability analysis for the format.<p><a href="https:&#x2F;&#x2F;www.loc.gov&#x2F;preservation&#x2F;digital&#x2F;formats&#x2F;fdd&#x2F;fdd000461.shtml" rel="nofollow">https:&#x2F;&#x2F;www.loc.gov&#x2F;preservation&#x2F;digital&#x2F;formats&#x2F;fdd&#x2F;fdd0004...</a></div><br/></div></div></div></div></div></div><div id="39794773" class="c"><input type="checkbox" id="c-39794773" checked=""/><div class="controls bullet"><span class="by">smartmic</span><span>|</span><a href="#39794136">prev</a><span>|</span><a href="#39798211">next</a><span>|</span><label class="collapse" for="c-39794773">[-]</label><label class="expand" for="c-39794773">[3 more]</label></div><br/><div class="children"><div class="content">The whole thing makes sense to me and I can&#x27;t see any major points of criticism in the design rationale. Some thoughts:<p>* There is already a &quot;native&quot; Sqlite3 container solution called Sqlar [0].<p>* Sqlite3 itself is certainly suitable as a base and I wouldn&#x27;t worry about its future at all.<p>* Pascal is also an interesting choice, it is not the hippest language nor a new kid on the block, but offers its own advantages as being &quot;boring&quot; and &quot;normal&quot;. I am thinking especially of the Lindy effect [1].<p>All in all a nice surprise and I am curious to see the future of Pack. After all, it can only succeed if it gets a stable, critical mass of supporters, both from the user and maintainer spectrum.<p>[0]: <a href="https:&#x2F;&#x2F;sqlite.org&#x2F;sqlar&#x2F;doc&#x2F;trunk&#x2F;README.md" rel="nofollow">https:&#x2F;&#x2F;sqlite.org&#x2F;sqlar&#x2F;doc&#x2F;trunk&#x2F;README.md</a><p>[1]: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Lindy_effect" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Lindy_effect</a></div><br/><div id="39797018" class="c"><input type="checkbox" id="c-39797018" checked=""/><div class="controls bullet"><span class="by">sgammon</span><span>|</span><a href="#39794773">parent</a><span>|</span><a href="#39798211">next</a><span>|</span><label class="collapse" for="c-39797018">[-]</label><label class="expand" for="c-39797018">[2 more]</label></div><br/><div class="children"><div class="content">Related note: Lindy&#x27;s closed in 2018.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Lindy%27s" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Lindy%27s</a></div><br/><div id="39797201" class="c"><input type="checkbox" id="c-39797201" checked=""/><div class="controls bullet"><span class="by">epcoa</span><span>|</span><a href="#39794773">root</a><span>|</span><a href="#39797018">parent</a><span>|</span><a href="#39798211">next</a><span>|</span><label class="collapse" for="c-39797201">[-]</label><label class="expand" for="c-39797201">[1 more]</label></div><br/><div class="children"><div class="content">And that wasn’t even the original Lindy’s but an unrelated&#x2F;“unauthorized” reboot since the trademark was declared abandoned. The original closed in 1969 (for which the law was named as it predates that): from 1964 <a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20210619015733&#x2F;https:&#x2F;&#x2F;www.gwern.net&#x2F;docs&#x2F;statistics&#x2F;1964-goldman.pdf" rel="nofollow">https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20210619015733&#x2F;https:&#x2F;&#x2F;www.gwern...</a></div><br/></div></div></div></div></div></div><div id="39798211" class="c"><input type="checkbox" id="c-39798211" checked=""/><div class="controls bullet"><span class="by">SillyUsername</span><span>|</span><a href="#39794773">prev</a><span>|</span><a href="#39795970">next</a><span>|</span><label class="collapse" for="c-39798211">[-]</label><label class="expand" for="c-39798211">[1 more]</label></div><br/><div class="children"><div class="content">How does this compare to PAQ <a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;PAQ" rel="nofollow">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;PAQ</a> ?</div><br/></div></div><div id="39795970" class="c"><input type="checkbox" id="c-39795970" checked=""/><div class="controls bullet"><span class="by">Aachen</span><span>|</span><a href="#39798211">prev</a><span>|</span><a href="#39794131">next</a><span>|</span><label class="collapse" for="c-39795970">[-]</label><label class="expand" for="c-39795970">[3 more]</label></div><br/><div class="children"><div class="content">Complaining that all existing tools are old, but I&#x27;m looking at the documentation and the what immediately catches my eye is that it doesn&#x27;t use any modern convention I&#x27;ve gotten used to?<p>Overwrite with &quot;-w&quot;. I&#x27;ve never seen a tool not use &quot;-f&quot;<p>Not reserving &quot;-h&quot; for help text is also an interesting choice. Makes me think of the mantra &quot;be conservative in what you send out but liberal in what you accept&quot;. Per that philosophy, both &quot;--help&quot; and &quot;-h&quot; should be accepted because neither gained a decisive majority in usage and so people might try either. It&#x27;s not like you&#x27;d know what to use because it hasn&#x27;t told you yet<p>Forcing use of a long option &quot;--press=N&quot; (for the zstd level setting) is also new&#x2F;unique terminology for what is usually &quot;-N&quot; (like &quot;-1&quot; to &quot;-9&quot;)<p>(Basic) drop-in compatibility with every other tool from gzip to zstd would also have been nice, but archiving and compression are different things and everything from zip to 7z to tar works in unique ways so this makes enough sense I guess. Still, could have been useful<p>It&#x27;s still better than tar or ps, so if it catches on that&#x27;s still a step forwards in terms of command line standards</div><br/><div id="39797616" class="c"><input type="checkbox" id="c-39797616" checked=""/><div class="controls bullet"><span class="by">drpixie</span><span>|</span><a href="#39795970">parent</a><span>|</span><a href="#39796060">next</a><span>|</span><label class="collapse" for="c-39797616">[-]</label><label class="expand" for="c-39797616">[1 more]</label></div><br/><div class="children"><div class="content">Hmmm. I went to the doco hoping for something about the file format :(  No doco for me.  I guess that would be too old fashioned.<p>It seems to be &quot;read the code&quot; or nothing - which is fine until they update the code... It&#x27;s great (probably should be mandatory) to have a reference program, but if they&#x27;re promoting it as a container format, something along the lines of an RFC would be helpful.</div><br/></div></div></div></div><div id="39794131" class="c"><input type="checkbox" id="c-39794131" checked=""/><div class="controls bullet"><span class="by">bborud</span><span>|</span><a href="#39795970">prev</a><span>|</span><a href="#39794125">next</a><span>|</span><label class="collapse" for="c-39794131">[-]</label><label class="expand" for="c-39794131">[2 more]</label></div><br/><div class="children"><div class="content">Pascal!? My monocle nearly fell out.</div><br/><div id="39794594" class="c"><input type="checkbox" id="c-39794594" checked=""/><div class="controls bullet"><span class="by">esafak</span><span>|</span><a href="#39794131">parent</a><span>|</span><a href="#39794125">next</a><span>|</span><label class="collapse" for="c-39794594">[-]</label><label class="expand" for="c-39794594">[1 more]</label></div><br/><div class="children"><div class="content">Must be in honor of Wirth&#x27;s passing!</div><br/></div></div></div></div><div id="39794125" class="c"><input type="checkbox" id="c-39794125" checked=""/><div class="controls bullet"><span class="by">xuhu</span><span>|</span><a href="#39794131">prev</a><span>|</span><a href="#39797151">next</a><span>|</span><label class="collapse" for="c-39794125">[-]</label><label class="expand" for="c-39794125">[1 more]</label></div><br/><div class="children"><div class="content">Better, faster, stronger but I can&#x27;t tell from the homepage what&#x27;s different about it, except that it is based on SQLite and Zstd.</div><br/></div></div><div id="39794238" class="c"><input type="checkbox" id="c-39794238" checked=""/><div class="controls bullet"><span class="by">rodrigokumpera</span><span>|</span><a href="#39797151">prev</a><span>|</span><a href="#39796362">next</a><span>|</span><label class="collapse" for="c-39794238">[-]</label><label class="expand" for="c-39794238">[3 more]</label></div><br/><div class="children"><div class="content">ZStandard is... standardized under rfc 8878<p>Plus there&#x27;s no discussion against zstd itself and its container format.</div><br/><div id="39794604" class="c"><input type="checkbox" id="c-39794604" checked=""/><div class="controls bullet"><span class="by">rustyconover</span><span>|</span><a href="#39794238">parent</a><span>|</span><a href="#39796362">next</a><span>|</span><label class="collapse" for="c-39794604">[-]</label><label class="expand" for="c-39794604">[2 more]</label></div><br/><div class="children"><div class="content">If you&#x27;re looking for a debate against ZStandard, its hard to argue against it.<p>ZStandard is Pareto optimal.<p>For the argument why, I really recommend this investigation.<p><a href="https:&#x2F;&#x2F;insanity.industries&#x2F;post&#x2F;pareto-optimal-compression&#x2F;" rel="nofollow">https:&#x2F;&#x2F;insanity.industries&#x2F;post&#x2F;pareto-optimal-compression&#x2F;</a></div><br/><div id="39794839" class="c"><input type="checkbox" id="c-39794839" checked=""/><div class="controls bullet"><span class="by">bonki</span><span>|</span><a href="#39794238">root</a><span>|</span><a href="#39794604">parent</a><span>|</span><a href="#39796362">next</a><span>|</span><label class="collapse" for="c-39794839">[-]</label><label class="expand" for="c-39794839">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, superbly written and highly informative article!</div><br/></div></div></div></div></div></div><div id="39796362" class="c"><input type="checkbox" id="c-39796362" checked=""/><div class="controls bullet"><span class="by">jksmith</span><span>|</span><a href="#39794238">prev</a><span>|</span><a href="#39794577">next</a><span>|</span><label class="collapse" for="c-39796362">[-]</label><label class="expand" for="c-39796362">[1 more]</label></div><br/><div class="children"><div class="content">Hell yeah some fpc stuff showing its moves. Devs even put together an lpk to load up -bravo! Look for more of this stuff in the future as companies look for alternatives to corporate commodity programming and dbs tethered to major cloud resources. I have a major FPC effort going on right now that I hope to be able to offer on four platforms: browser, win, linux, and mac.<p>I wrote a similar general purpose pack way back in the early 90&#x27;s in TopSpeed Modula-2 and run from the command line. Needed to span multiple disks and self launch. Algorithm was fast, but not nearly the same compression ratios. Wore out Mark Nelson&#x27;s classic, &quot;The Data Compression Book&quot; along the way.</div><br/></div></div><div id="39794577" class="c"><input type="checkbox" id="c-39794577" checked=""/><div class="controls bullet"><span class="by">crq-yml</span><span>|</span><a href="#39796362">prev</a><span>|</span><a href="#39794358">next</a><span>|</span><label class="collapse" for="c-39794577">[-]</label><label class="expand" for="c-39794577">[2 more]</label></div><br/><div class="children"><div class="content">The web site behaves strangely on mobile and folds the text as I try to scroll around.</div><br/><div id="39794744" class="c"><input type="checkbox" id="c-39794744" checked=""/><div class="controls bullet"><span class="by">0x073</span><span>|</span><a href="#39794577">parent</a><span>|</span><a href="#39794358">next</a><span>|</span><label class="collapse" for="c-39794744">[-]</label><label class="expand" for="c-39794744">[1 more]</label></div><br/><div class="children"><div class="content">Yes at least on mobile absolute madness.</div><br/></div></div></div></div><div id="39794358" class="c"><input type="checkbox" id="c-39794358" checked=""/><div class="controls bullet"><span class="by">Kwpolska</span><span>|</span><a href="#39794577">prev</a><span>|</span><a href="#39796949">next</a><span>|</span><label class="collapse" for="c-39794358">[-]</label><label class="expand" for="c-39794358">[1 more]</label></div><br/><div class="children"><div class="content">If I need to compress stuff, it’s either to move a folder around (to places which may not have a niche compression tool, so ZIP wins), or to archive something long-term, where it can take a while to compress. I don’t see the advantages of this, since the compression output size seems quite mediocre even if it’s supposedly fast (compared to what implementations of the other formats?)</div><br/></div></div><div id="39796949" class="c"><input type="checkbox" id="c-39796949" checked=""/><div class="controls bullet"><span class="by">croemer</span><span>|</span><a href="#39794358">prev</a><span>|</span><a href="#39797030">next</a><span>|</span><label class="collapse" for="c-39796949">[-]</label><label class="expand" for="c-39796949">[2 more]</label></div><br/><div class="children"><div class="content">Who is behind this? It&#x27;s a new Github org, the committer (<a href="https:&#x2F;&#x2F;github.com&#x2F;OttoCoddo">https:&#x2F;&#x2F;github.com&#x2F;OttoCoddo</a>) has a totally private Github profile. There&#x27;s no name in &quot;Legal&quot;. Sure, one can be anonymous, but I won&#x27;t download it, don&#x27;t trust it.</div><br/><div id="39797816" class="c"><input type="checkbox" id="c-39797816" checked=""/><div class="controls bullet"><span class="by">Retr0id</span><span>|</span><a href="#39796949">parent</a><span>|</span><a href="#39797030">next</a><span>|</span><label class="collapse" for="c-39797816">[-]</label><label class="expand" for="c-39797816">[1 more]</label></div><br/><div class="children"><div class="content">They also mention depending on <a href="https:&#x2F;&#x2F;github.com&#x2F;SCLOrganization">https:&#x2F;&#x2F;github.com&#x2F;SCLOrganization</a>, which appears to have single similarly anonymous maintainer.<p>In fact, SCL has exactly two libraries, SQLite and Zstandard, so presumably it&#x27;s the same developer <a href="https:&#x2F;&#x2F;github.com&#x2F;SCLOrganization&#x2F;Libraries">https:&#x2F;&#x2F;github.com&#x2F;SCLOrganization&#x2F;Libraries</a></div><br/></div></div></div></div><div id="39797030" class="c"><input type="checkbox" id="c-39797030" checked=""/><div class="controls bullet"><span class="by">sgammon</span><span>|</span><a href="#39796949">prev</a><span>|</span><a href="#39795777">next</a><span>|</span><label class="collapse" for="c-39797030">[-]</label><label class="expand" for="c-39797030">[3 more]</label></div><br/><div class="children"><div class="content">I remember someone had made a package manager &#x2F; index tool for SQLite extensions. But I haven&#x27;t ever been able to find it again</div><br/><div id="39797050" class="c"><input type="checkbox" id="c-39797050" checked=""/><div class="controls bullet"><span class="by">toomuchtodo</span><span>|</span><a href="#39797030">parent</a><span>|</span><a href="#39795777">next</a><span>|</span><label class="collapse" for="c-39797050">[-]</label><label class="expand" for="c-39797050">[2 more]</label></div><br/><div class="children"><div class="content">sqlean or sqlpkg perhaps?<p><a href="https:&#x2F;&#x2F;github.com&#x2F;nalgeon&#x2F;sqlean">https:&#x2F;&#x2F;github.com&#x2F;nalgeon&#x2F;sqlean</a><p><a href="https:&#x2F;&#x2F;sqlpkg.org&#x2F;" rel="nofollow">https:&#x2F;&#x2F;sqlpkg.org&#x2F;</a></div><br/><div id="39797960" class="c"><input type="checkbox" id="c-39797960" checked=""/><div class="controls bullet"><span class="by">sgammon</span><span>|</span><a href="#39797030">root</a><span>|</span><a href="#39797050">parent</a><span>|</span><a href="#39795777">next</a><span>|</span><label class="collapse" for="c-39797960">[-]</label><label class="expand" for="c-39797960">[1 more]</label></div><br/><div class="children"><div class="content">I think it was sqlpkg! Thank you. That was bothering me so much!</div><br/></div></div></div></div></div></div><div id="39795777" class="c"><input type="checkbox" id="c-39795777" checked=""/><div class="controls bullet"><span class="by">chatmasta</span><span>|</span><a href="#39797030">prev</a><span>|</span><a href="#39797882">next</a><span>|</span><label class="collapse" for="c-39795777">[-]</label><label class="expand" for="c-39795777">[8 more]</label></div><br/><div class="children"><div class="content">What&#x27;s the best way to store a bunch of .zip files that all share some data? Assume that I can&#x27;t decompress or alter the zip files in any way.<p>Basically I want a shared encoding dictionary. Is there an easy solution for this?<p>The use case is maintaining an archive of .crx files.</div><br/><div id="39797001" class="c"><input type="checkbox" id="c-39797001" checked=""/><div class="controls bullet"><span class="by">mappu</span><span>|</span><a href="#39795777">parent</a><span>|</span><a href="#39796760">next</a><span>|</span><label class="collapse" for="c-39797001">[-]</label><label class="expand" for="c-39797001">[1 more]</label></div><br/><div class="children"><div class="content">Use precomp or antiz to losslessly pre-transform the zip, and then use solid compression (e.g. tar.xz or zpaq).</div><br/></div></div><div id="39796760" class="c"><input type="checkbox" id="c-39796760" checked=""/><div class="controls bullet"><span class="by">Scaevolus</span><span>|</span><a href="#39795777">parent</a><span>|</span><a href="#39797001">prev</a><span>|</span><a href="#39795983">next</a><span>|</span><label class="collapse" for="c-39796760">[-]</label><label class="expand" for="c-39796760">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s not an _easy_ way to do this right now.<p>Your best bet is a lossless transform that undoes the huffman coding in the zip files, converting the compressed streams from effectively uncorrelated bitstreams to largely similar byte streams, and then pass that through a large-window compression algorithm (zstd?).<p>Similar techniques are used in ChromeOS for delta updates.</div><br/></div></div><div id="39795983" class="c"><input type="checkbox" id="c-39795983" checked=""/><div class="controls bullet"><span class="by">sph</span><span>|</span><a href="#39795777">parent</a><span>|</span><a href="#39796760">prev</a><span>|</span><a href="#39797882">next</a><span>|</span><label class="collapse" for="c-39795983">[-]</label><label class="expand" for="c-39795983">[5 more]</label></div><br/><div class="children"><div class="content">Not sure if I understand the question.<p>Having a shared encoding dictionary is called compression.<p>If you want one across many zip files that you cannot modify, then compress them into another archive.</div><br/><div id="39796262" class="c"><input type="checkbox" id="c-39796262" checked=""/><div class="controls bullet"><span class="by">chatmasta</span><span>|</span><a href="#39795777">root</a><span>|</span><a href="#39795983">parent</a><span>|</span><a href="#39797882">next</a><span>|</span><label class="collapse" for="c-39796262">[-]</label><label class="expand" for="c-39796262">[4 more]</label></div><br/><div class="children"><div class="content">Yes, I have a bunch of zips I cannot modify. If I could uncompress them all, and zip them into one big archive, then it would be much smaller than if I put all the compressed zips into one big archive. This is because there&#x27;s a lot more shared strings between uncompressed files across different zips, than there are shared strings between the compressed zips.<p>(At least... this is my assumption based on how I understand the formats to work. I do need to measure and verify this.)<p>So basically I&#x27;m wondering if there is some way to tell the &quot;outer&quot; zip to reuse the encoding dictionaries of each smaller zip, or to somehow intelligently merge their encoding dictionaries rather than treating each inner zip like an opaque blob.</div><br/><div id="39796432" class="c"><input type="checkbox" id="c-39796432" checked=""/><div class="controls bullet"><span class="by">teraflop</span><span>|</span><a href="#39795777">root</a><span>|</span><a href="#39796262">parent</a><span>|</span><a href="#39797882">next</a><span>|</span><label class="collapse" for="c-39796432">[-]</label><label class="expand" for="c-39796432">[3 more]</label></div><br/><div class="children"><div class="content">No, the ZIP format compresses each embedded file <i>separately</i>, so it doesn&#x27;t matter how much commonality there is between different files in the same archive.</div><br/><div id="39796548" class="c"><input type="checkbox" id="c-39796548" checked=""/><div class="controls bullet"><span class="by">chatmasta</span><span>|</span><a href="#39795777">root</a><span>|</span><a href="#39796432">parent</a><span>|</span><a href="#39797882">next</a><span>|</span><label class="collapse" for="c-39796548">[-]</label><label class="expand" for="c-39796548">[2 more]</label></div><br/><div class="children"><div class="content">Wow, really? I always assumed that if I zipped a directory, it would use a shared dictionary to compress all the files. But I guess what you say makes sense, because otherwise it wouldn&#x27;t be possible to extract just one file.<p>Are there compression formats that do share an encoding dictionary across multiple files? I guess tar + gzip might do that?</div><br/><div id="39796596" class="c"><input type="checkbox" id="c-39796596" checked=""/><div class="controls bullet"><span class="by">teraflop</span><span>|</span><a href="#39795777">root</a><span>|</span><a href="#39796548">parent</a><span>|</span><a href="#39797882">next</a><span>|</span><label class="collapse" for="c-39796596">[-]</label><label class="expand" for="c-39796596">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, if you compress a tar file with gzip (or bzip2 or zstd or whatever) then the compressor doesn&#x27;t care about the file boundaries, so it will be able to take advantage of redundancies.<p>However, those compressors generally only have a small context window, so they&#x27;ll only be able to take advantage of relatively <i>nearby</i> redundancies in the archive. They won&#x27;t help you if the common substrings are separated by many megabytes of unrelated data. So the order in which you pack the files matters.<p>In theory, you could do a two-pass approach, where you first scan the entire set of files to create a (relatively small) shared dictionary that&#x27;s as useful as possible, and then uses that dictionary to compress each file independently. I don&#x27;t know of any archive format that does that, but you could roll your own using the zstd command line compressor.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="39797882" class="c"><input type="checkbox" id="c-39797882" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#39795777">prev</a><span>|</span><a href="#39795684">next</a><span>|</span><label class="collapse" for="c-39797882">[-]</label><label class="expand" for="c-39797882">[1 more]</label></div><br/><div class="children"><div class="content">How does tar take 4.7s in the benchmark, but Pack takes 1.3s (and 1&#x2F;7th the size)?<p>That seems fishy...</div><br/></div></div><div id="39795684" class="c"><input type="checkbox" id="c-39795684" checked=""/><div class="controls bullet"><span class="by">conception</span><span>|</span><a href="#39797882">prev</a><span>|</span><a href="#39794185">next</a><span>|</span><label class="collapse" for="c-39795684">[-]</label><label class="expand" for="c-39795684">[1 more]</label></div><br/><div class="children"><div class="content">Is anyone using this or sqllite archives for anything at scale? They always seemed like a good solution for certain scientific outputs. But data integrity obviously is a concern.</div><br/></div></div><div id="39794185" class="c"><input type="checkbox" id="c-39794185" checked=""/><div class="controls bullet"><span class="by">theamk</span><span>|</span><a href="#39795684">prev</a><span>|</span><a href="#39795455">next</a><span>|</span><label class="collapse" for="c-39794185">[-]</label><label class="expand" for="c-39794185">[16 more]</label></div><br/><div class="children"><div class="content">&gt; Pack format is based on the universal and arguably one of the most safe and stable file formats, SQLite3, and compression is based on Zstandard, the leading standard algorithm in the field.<p>yeah, no thanks. SQlite3 automatically means:<p>- Single implementation (yes, it&#x27;s a nice one but still a single dependency)<p>- No way to write directly to pipe (SQlite requires real on-disk file)<p>- No standard way to read without getting the whole file first<p>- No guarantees in number of disk seeks required to open the file (relevant for NFS, sshfs or any other remote filesystem use)<p>- The archive file might be changed just by opening in read-only mode<p>- Damaged file recovery is very hard<p>- Writing is explicitly not protected against several common scenarios, like backup being taken in the middle of file write<p>- No parallel reads from multiple threads<p>Look, sqlite3 is great for it&#x27;s designed purpose (embedded database). But trying to apply for other purposes is often a bad idea.</div><br/><div id="39794723" class="c"><input type="checkbox" id="c-39794723" checked=""/><div class="controls bullet"><span class="by">Deukhoofd</span><span>|</span><a href="#39794185">parent</a><span>|</span><a href="#39794842">next</a><span>|</span><label class="collapse" for="c-39794723">[-]</label><label class="expand" for="c-39794723">[5 more]</label></div><br/><div class="children"><div class="content">&gt; SQlite requires real on-disk file<p>You can run SQLite with an In Memory database, I use it quite a lot for unit tests.<p><a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;inmemorydb.html" rel="nofollow">https:&#x2F;&#x2F;www.sqlite.org&#x2F;inmemorydb.html</a></div><br/><div id="39795800" class="c"><input type="checkbox" id="c-39795800" checked=""/><div class="controls bullet"><span class="by">heftig</span><span>|</span><a href="#39794185">root</a><span>|</span><a href="#39794723">parent</a><span>|</span><a href="#39795821">next</a><span>|</span><label class="collapse" for="c-39795800">[-]</label><label class="expand" for="c-39795800">[1 more]</label></div><br/><div class="children"><div class="content">I think that point is about it not supporting streaming compression where the output of the packer is immediately fed into something like a pipe or a TCP connection.<p>You can do this with both tar and ZIP. If all you have is SQLite, you need to fully create the local database (be it in a file or in memory) before you can transmit it somewhere else to be stored or unpacked.</div><br/></div></div><div id="39795821" class="c"><input type="checkbox" id="c-39795821" checked=""/><div class="controls bullet"><span class="by">0x457</span><span>|</span><a href="#39794185">root</a><span>|</span><a href="#39794723">parent</a><span>|</span><a href="#39795800">prev</a><span>|</span><a href="#39794842">next</a><span>|</span><label class="collapse" for="c-39795821">[-]</label><label class="expand" for="c-39795821">[3 more]</label></div><br/><div class="children"><div class="content">Yes, but I think they meant something like this:<p>pack archive | ssh host2 pack extract<p>Which is a weird gripe - in this use case, `tar` makes most sense to use. It&#x27;s not like this format claims to be a full replacement for tar or anything close to that.</div><br/><div id="39796168" class="c"><input type="checkbox" id="c-39796168" checked=""/><div class="controls bullet"><span class="by">theamk</span><span>|</span><a href="#39794185">root</a><span>|</span><a href="#39795821">parent</a><span>|</span><a href="#39797014">next</a><span>|</span><label class="collapse" for="c-39796168">[-]</label><label class="expand" for="c-39796168">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s exactly what they do - they explicitly call out this format as replacement to tar and zip at least:<p>&gt; Most popular solutions like Zip, gzip, tar, RAR, or 7-Zip are near or more than three decades old. While holding value for such a long time (in the computer world) is testimony to their greatness, the work is far from done.<p>&gt; Pack tries to continue this path as the next step and proposes the next universal choice in the field.</div><br/></div></div></div></div></div></div><div id="39794842" class="c"><input type="checkbox" id="c-39794842" checked=""/><div class="controls bullet"><span class="by">raggi</span><span>|</span><a href="#39794185">parent</a><span>|</span><a href="#39794723">prev</a><span>|</span><a href="#39794762">next</a><span>|</span><label class="collapse" for="c-39794842">[-]</label><label class="expand" for="c-39794842">[1 more]</label></div><br/><div class="children"><div class="content">Often new things are met with an excess of skepticism but I agree here.<p>I&#x27;d take this more seriously if the format was documented at all, but so far it appears to be &quot;this implementation relies on sqlite and zstd therefore it&#x27;s better&quot;, without even a specification of the sql schema, let alone anything else.<p>The github repo contains precompiled binaries of zstd and sqlite. The sqlite builds appear to have thread support disabled so not only will it be single writer it&#x27;ll be single reader too.<p>The schema is missing strictly typed tables, and the implementation appears to lack explicit collation handling for names and content.<p>The described benchmark appears to involve files with an average size of 16KB. I suspect it was executed on Windows on top of NTFS with an AV package running, which is a pathological case for single threaded use of the POSIXy IO APIs that undoubtedly most of the selected implementations use.<p>It&#x27;s slightly odd that it appears to perform better when SQLite is being built with thread safety disabled (<a href="https:&#x2F;&#x2F;github.com&#x2F;PackOrganization&#x2F;Pack&#x2F;blob&#x2F;main&#x2F;Libraries&#x2F;SQLite3&#x2F;Build&#x2F;Build.sh#L3">https:&#x2F;&#x2F;github.com&#x2F;PackOrganization&#x2F;Pack&#x2F;blob&#x2F;main&#x2F;Libraries...</a>) and yet the implementation is inserting in a thread group: <a href="https:&#x2F;&#x2F;github.com&#x2F;PackOrganization&#x2F;Pack&#x2F;blob&#x2F;main&#x2F;Source&#x2F;Draft0&#x2F;UPackDraft0FileImporter.pas#L64">https:&#x2F;&#x2F;github.com&#x2F;PackOrganization&#x2F;Pack&#x2F;blob&#x2F;main&#x2F;Source&#x2F;Dr...</a>. I suspect the answer here is that because the implementation is using a thread group to read files and compress chunks, it&#x27;s amortizing the slow cost of file opens in this benchmark using threading, but is heavily constrained by the sqlite locking - and the compression ratio will take a substantial hit in some cases as a result of the limited range of each compression operation. I suspect that zstd(1) with -T0 would outperform this for speed and compression ratio, and it&#x27;s already installed on a lot of systems - even Windows 11 gained native support for .zst files recently.<p>The premise that we could do with something more portable than TAR and with less baggage is somewhat reasonable - we probably could do with a simple, safe format. There are a lot more key considerations to making such a format good, such as many you outline, such as choices around seeking, syncing, incremental updates, compression efficiency, parallelism, etc. There is no single set of trade-offs to cover all cases but it would be possible to make a file format that can be shared among them, while constraining the design somewhat for safety and ease of portability.</div><br/></div></div><div id="39794762" class="c"><input type="checkbox" id="c-39794762" checked=""/><div class="controls bullet"><span class="by">cogman10</span><span>|</span><a href="#39794185">parent</a><span>|</span><a href="#39794842">prev</a><span>|</span><a href="#39794711">next</a><span>|</span><label class="collapse" for="c-39794762">[-]</label><label class="expand" for="c-39794762">[3 more]</label></div><br/><div class="children"><div class="content">&gt; No parallel reads from multiple threads<p>Sqlite supports parallel reads from multiple threads.<p>It even supports parallel reads and writes from multiple threads.<p>What it doesn&#x27;t really support is parallel reads and writes from multiple processes.</div><br/><div id="39794926" class="c"><input type="checkbox" id="c-39794926" checked=""/><div class="controls bullet"><span class="by">raggi</span><span>|</span><a href="#39794185">root</a><span>|</span><a href="#39794762">parent</a><span>|</span><a href="#39794711">next</a><span>|</span><label class="collapse" for="c-39794926">[-]</label><label class="expand" for="c-39794926">[2 more]</label></div><br/><div class="children"><div class="content">Not when threading is disabled, as it is in this project.</div><br/><div id="39794944" class="c"><input type="checkbox" id="c-39794944" checked=""/><div class="controls bullet"><span class="by">cogman10</span><span>|</span><a href="#39794185">root</a><span>|</span><a href="#39794926">parent</a><span>|</span><a href="#39794711">next</a><span>|</span><label class="collapse" for="c-39794944">[-]</label><label class="expand" for="c-39794944">[1 more]</label></div><br/><div class="children"><div class="content">Sure, but single threading isn&#x27;t an inherent part of sqlite as OP implies.<p>&gt;  SQlite3 automatically means:<p>...<p>&gt; - No parallel reads from multiple threads</div><br/></div></div></div></div></div></div><div id="39794711" class="c"><input type="checkbox" id="c-39794711" checked=""/><div class="controls bullet"><span class="by">bonki</span><span>|</span><a href="#39794185">parent</a><span>|</span><a href="#39794762">prev</a><span>|</span><a href="#39794629">next</a><span>|</span><label class="collapse" for="c-39794711">[-]</label><label class="expand" for="c-39794711">[2 more]</label></div><br/><div class="children"><div class="content">Ad 2: SQLite has an in-memory DB option.</div><br/><div id="39797811" class="c"><input type="checkbox" id="c-39797811" checked=""/><div class="controls bullet"><span class="by">t43562</span><span>|</span><a href="#39794185">root</a><span>|</span><a href="#39794711">parent</a><span>|</span><a href="#39794629">next</a><span>|</span><label class="collapse" for="c-39797811">[-]</label><label class="expand" for="c-39797811">[1 more]</label></div><br/><div class="children"><div class="content">Then you cannot transfer through a pipe something that&#x27;s too big to fit in memory.</div><br/></div></div></div></div><div id="39794629" class="c"><input type="checkbox" id="c-39794629" checked=""/><div class="controls bullet"><span class="by">tredre3</span><span>|</span><a href="#39794185">parent</a><span>|</span><a href="#39794711">prev</a><span>|</span><a href="#39794759">next</a><span>|</span><label class="collapse" for="c-39794629">[-]</label><label class="expand" for="c-39794629">[3 more]</label></div><br/><div class="children"><div class="content">Pack may not be it, but it would be nice if Tar would go the way of the dodo. It has all the flaws that you mentioned (and more!).</div><br/><div id="39794699" class="c"><input type="checkbox" id="c-39794699" checked=""/><div class="controls bullet"><span class="by">viraptor</span><span>|</span><a href="#39794185">root</a><span>|</span><a href="#39794629">parent</a><span>|</span><a href="#39794727">next</a><span>|</span><label class="collapse" for="c-39794699">[-]</label><label class="expand" for="c-39794699">[1 more]</label></div><br/><div class="children"><div class="content">It does not in fact have most of the mentioned flaws. It&#x27;s pipeable, immutable, continuous, trivial to repair, safe for append-only writing.</div><br/></div></div><div id="39794727" class="c"><input type="checkbox" id="c-39794727" checked=""/><div class="controls bullet"><span class="by">epcoa</span><span>|</span><a href="#39794185">root</a><span>|</span><a href="#39794629">parent</a><span>|</span><a href="#39794699">prev</a><span>|</span><a href="#39794759">next</a><span>|</span><label class="collapse" for="c-39794727">[-]</label><label class="expand" for="c-39794727">[1 more]</label></div><br/><div class="children"><div class="content">It literally has none of the issues mentioned though. Not that it doesn’t have limitations but those listed aren’t them.</div><br/></div></div></div></div></div></div><div id="39795455" class="c"><input type="checkbox" id="c-39795455" checked=""/><div class="controls bullet"><span class="by">ericyd</span><span>|</span><a href="#39794185">prev</a><span>|</span><a href="#39794114">next</a><span>|</span><label class="collapse" for="c-39795455">[-]</label><label class="expand" for="c-39795455">[6 more]</label></div><br/><div class="children"><div class="content">Website is quite annoying to use on mobile. Scrolling behaviors get interpreted as taps which close the container you&#x27;re reading.</div><br/><div id="39796423" class="c"><input type="checkbox" id="c-39796423" checked=""/><div class="controls bullet"><span class="by">cpressland</span><span>|</span><a href="#39795455">parent</a><span>|</span><a href="#39795627">next</a><span>|</span><label class="collapse" for="c-39796423">[-]</label><label class="expand" for="c-39796423">[2 more]</label></div><br/><div class="children"><div class="content">Had the same issue, plus I think one of my Safari extensions was hiding a cookie banner so half the page was just “dark”. A more mobile friendly view is absolutely needed.</div><br/><div id="39796959" class="c"><input type="checkbox" id="c-39796959" checked=""/><div class="controls bullet"><span class="by">croemer</span><span>|</span><a href="#39795455">root</a><span>|</span><a href="#39796423">parent</a><span>|</span><a href="#39795627">next</a><span>|</span><label class="collapse" for="c-39796959">[-]</label><label class="expand" for="c-39796959">[1 more]</label></div><br/><div class="children"><div class="content">Nah, there&#x27;s no cookie banner. It&#x27;s just a strange&#x2F;innovative design.</div><br/></div></div></div></div><div id="39795627" class="c"><input type="checkbox" id="c-39795627" checked=""/><div class="controls bullet"><span class="by">throwaway67743</span><span>|</span><a href="#39795455">parent</a><span>|</span><a href="#39796423">prev</a><span>|</span><a href="#39796406">next</a><span>|</span><label class="collapse" for="c-39795627">[-]</label><label class="expand" for="c-39795627">[1 more]</label></div><br/><div class="children"><div class="content">Also if you dare try to naturally scroll up after opening a container it&#x27;s interpreted as a refresh as it redraws.  Might be an awesome format but web design fail negates it entirely.</div><br/></div></div><div id="39796406" class="c"><input type="checkbox" id="c-39796406" checked=""/><div class="controls bullet"><span class="by">megraf</span><span>|</span><a href="#39795455">parent</a><span>|</span><a href="#39795627">prev</a><span>|</span><a href="#39796698">next</a><span>|</span><label class="collapse" for="c-39796406">[-]</label><label class="expand" for="c-39796406">[1 more]</label></div><br/><div class="children"><div class="content">Yes, it&#x27;s horrendous - I thought I was intoxicated</div><br/></div></div></div></div><div id="39794114" class="c"><input type="checkbox" id="c-39794114" checked=""/><div class="controls bullet"><span class="by">ramses0</span><span>|</span><a href="#39795455">prev</a><span>|</span><a href="#39795732">next</a><span>|</span><label class="collapse" for="c-39794114">[-]</label><label class="expand" for="c-39794114">[1 more]</label></div><br/><div class="children"><div class="content">tldr: `cp * sqlite3:&#x2F;&#x2F;output.db` (basically?)<p>Really seems to make sense!  For another fun compression trick: <a href="https:&#x2F;&#x2F;github.com&#x2F;mxmlnkn&#x2F;ratarmount">https:&#x2F;&#x2F;github.com&#x2F;mxmlnkn&#x2F;ratarmount</a></div><br/></div></div><div id="39795732" class="c"><input type="checkbox" id="c-39795732" checked=""/><div class="controls bullet"><span class="by">Kalanos</span><span>|</span><a href="#39794114">prev</a><span>|</span><label class="collapse" for="c-39795732">[-]</label><label class="expand" for="c-39795732">[2 more]</label></div><br/><div class="children"><div class="content">is this as widely compatible as 7zip?</div><br/><div id="39796955" class="c"><input type="checkbox" id="c-39796955" checked=""/><div class="controls bullet"><span class="by">croemer</span><span>|</span><a href="#39795732">parent</a><span>|</span><label class="collapse" for="c-39796955">[-]</label><label class="expand" for="c-39796955">[1 more]</label></div><br/><div class="children"><div class="content">Of course not! There&#x27;s not even a version for macOS as far as I can tell. No one using it. This is a proposal.</div><br/></div></div></div></div></div></div></div></div></div></body></html>