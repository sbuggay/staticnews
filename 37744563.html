<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1696323664195" as="style"/><link rel="stylesheet" href="styles.css?v=1696323664195"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/primecitizens/pcz">Show HN: A new stdlib for Golang focusing on platform native support</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>Leotard6963</span> | <span>23 comments</span></div><br/><div><div id="37748738" class="c"><input type="checkbox" id="c-37748738" checked=""/><div class="controls bullet"><span class="by">weinzierl</span><span>|</span><a href="#37749208">next</a><span>|</span><label class="collapse" for="c-37748738">[-]</label><label class="expand" for="c-37748738">[2 more]</label></div><br/><div class="children"><div class="content">I love how they clearly state their goals at the beginning. This makes it immediately clear what it is about. Especially an importantly:<p><i>&quot;Non-Goals&quot;</i><p><i>&quot;Change the way the Go team works or make them change their decisions.&quot;</i><p>Not every project (and very much not every fork) is a political statement against the original. Sometimes people are glad what others do and want them to continue. Still, wanting their own  different version to coexist is completely OK.</div><br/><div id="37749350" class="c"><input type="checkbox" id="c-37749350" checked=""/><div class="controls bullet"><span class="by">jonathanstrange</span><span>|</span><a href="#37748738">parent</a><span>|</span><a href="#37749208">next</a><span>|</span><label class="collapse" for="c-37749350">[-]</label><label class="expand" for="c-37749350">[1 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t think the goals are explained very clearly. Or, to put it another way, after the goals were explained I still had no idea what it actually does or replaces.</div><br/></div></div></div></div><div id="37749208" class="c"><input type="checkbox" id="c-37749208" checked=""/><div class="controls bullet"><span class="by">bjackman</span><span>|</span><a href="#37748738">prev</a><span>|</span><a href="#37748683">next</a><span>|</span><label class="collapse" for="c-37749208">[-]</label><label class="expand" for="c-37749208">[2 more]</label></div><br/><div class="children"><div class="content">Interesting, I don&#x27;t fully understand the goals.<p>I have certainly encountered issues where Go is hiding the platform from me and this is very annoying. This was only ever a real problem on Windows though, the &quot;virtual platform&quot; that Go provides is generally fine for Linux IMO. Is this mainly about non-Linux platforms? (Which would be perfectly reasonable, BTW. Linux is not the only platform )<p>Meanwhile, I can see why someone would be interested in no-GC. But this seems orthogonal to the goal of &quot;adapting to the platform&quot; - am I missing something there?<p>And on the no-go routines thing, what&#x27;s the motivation for wanting that? Does their presence in the language have some related impact on it? Or is it just that you don&#x27;t think they&#x27;re useful and dropping them lets you focus on the other stuff?</div><br/><div id="37749383" class="c"><input type="checkbox" id="c-37749383" checked=""/><div class="controls bullet"><span class="by">Leotard6963</span><span>|</span><a href="#37749208">parent</a><span>|</span><a href="#37748683">next</a><span>|</span><label class="collapse" for="c-37749383">[-]</label><label class="expand" for="c-37749383">[1 more]</label></div><br/><div class="children"><div class="content">&quot;adapting to the platform&quot; is mostly related to the goroutine topic, as we are working on the js&#x2F;wasm support and these applications prefer async&#x2F;await operations.<p>re: goroutines<p>the official go runtime spawns goroutines during program startup, which makes the usage of M:N goruntine mandatory, and they have to call lockOSThread()[1] before initializing packages for certain applications (mostly GUI application).<p>We like the design of goroutines (especially the idea of a `g` register), but `pcz` currently doesn&#x27;t have goroutine support, and we are making it possible to spawn goroutines with custom allocator (with or without gc) and scheduler attached, so you can chose 1:1, M:N model for goroutines on your own (as decided by the scheduler attached).<p>you can find more details in the project ROADMAP.md[2]<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;go&#x2F;blob&#x2F;352c8835e7609ad72872b5a63bffeb6142b29d98&#x2F;src&#x2F;runtime&#x2F;proc.go#L174-L180">https:&#x2F;&#x2F;github.com&#x2F;golang&#x2F;go&#x2F;blob&#x2F;352c8835e7609ad72872b5a63b...</a>
[2]: <a href="https:&#x2F;&#x2F;github.com&#x2F;primecitizens&#x2F;pcz&#x2F;blob&#x2F;master&#x2F;ROADMAP.md">https:&#x2F;&#x2F;github.com&#x2F;primecitizens&#x2F;pcz&#x2F;blob&#x2F;master&#x2F;ROADMAP.md</a></div><br/></div></div></div></div><div id="37748683" class="c"><input type="checkbox" id="c-37748683" checked=""/><div class="controls bullet"><span class="by">DeathArrow</span><span>|</span><a href="#37749208">prev</a><span>|</span><a href="#37748528">next</a><span>|</span><label class="collapse" for="c-37748683">[-]</label><label class="expand" for="c-37748683">[5 more]</label></div><br/><div class="children"><div class="content">What is the point of Go without garbage collection and goroutines? You can use C.</div><br/><div id="37749458" class="c"><input type="checkbox" id="c-37749458" checked=""/><div class="controls bullet"><span class="by">actionfromafar</span><span>|</span><a href="#37748683">parent</a><span>|</span><a href="#37748734">next</a><span>|</span><label class="collapse" for="c-37749458">[-]</label><label class="expand" for="c-37749458">[1 more]</label></div><br/><div class="children"><div class="content">That is like saying what is the point of Pascal, you can use C. Well, one is a (dearly loved by me) footgun.</div><br/></div></div><div id="37748734" class="c"><input type="checkbox" id="c-37748734" checked=""/><div class="controls bullet"><span class="by">debatem1</span><span>|</span><a href="#37748683">parent</a><span>|</span><a href="#37749458">prev</a><span>|</span><a href="#37749201">next</a><span>|</span><label class="collapse" for="c-37748734">[-]</label><label class="expand" for="c-37748734">[2 more]</label></div><br/><div class="children"><div class="content">Golang is pretty good, but you can&#x27;t really count on gc and frankly goroutines are as much problem as solution. Nice to see a C with useful types and builtins.</div><br/><div id="37749262" class="c"><input type="checkbox" id="c-37749262" checked=""/><div class="controls bullet"><span class="by">JodieBenitez</span><span>|</span><a href="#37748683">root</a><span>|</span><a href="#37748734">parent</a><span>|</span><a href="#37749201">next</a><span>|</span><label class="collapse" for="c-37749262">[-]</label><label class="expand" for="c-37749262">[1 more]</label></div><br/><div class="children"><div class="content">Can you expand on why&#x2F;what situation you can&#x27;t count on GC and why goroutines are a problem ?</div><br/></div></div></div></div><div id="37749201" class="c"><input type="checkbox" id="c-37749201" checked=""/><div class="controls bullet"><span class="by">Cthulhu_</span><span>|</span><a href="#37748683">parent</a><span>|</span><a href="#37748734">prev</a><span>|</span><a href="#37748528">next</a><span>|</span><label class="collapse" for="c-37749201">[-]</label><label class="expand" for="c-37749201">[1 more]</label></div><br/><div class="children"><div class="content">Go has 25 keywords, C has 32; it&#x27;s an easier language. Even without the garbage collection, Go&#x27;s memory management is easier and safer (memory is automatically zeroed, no pointer arithmetic). Go&#x27;s toolchain is portable and straightforward.<p>TL;DR it keeps having advantages over C even if you takeaway GC and goroutines.</div><br/></div></div></div></div><div id="37748528" class="c"><input type="checkbox" id="c-37748528" checked=""/><div class="controls bullet"><span class="by">stefanos82</span><span>|</span><a href="#37748683">prev</a><span>|</span><label class="collapse" for="c-37748528">[-]</label><label class="expand" for="c-37748528">[13 more]</label></div><br/><div class="children"><div class="content">Goroutines was the selling point for me until they decided to introduce telemetry in their toolchain; that was what forced me to stop using Golang as a whole.<p>About GC, I would say: if you implement C++&#x27;s RAII mechanism to replace garbage collection, then I believe this project will have a bright future.<p>My final question is the following: how `pcz` compares to V language, from a syntax&#x27;s perspective [1]?<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;vlang&#x2F;v">https:&#x2F;&#x2F;github.com&#x2F;vlang&#x2F;v</a></div><br/><div id="37749214" class="c"><input type="checkbox" id="c-37749214" checked=""/><div class="controls bullet"><span class="by">arendtio</span><span>|</span><a href="#37748528">parent</a><span>|</span><a href="#37748647">next</a><span>|</span><label class="collapse" for="c-37749214">[-]</label><label class="expand" for="c-37749214">[2 more]</label></div><br/><div class="children"><div class="content">What bothers me: Since a while the documentation links to cs.opensource.google with the typical google flavor. Some years ago, you could simply click on some function in the documentation and view the source code. When I do this now, I find myself on a permission denied page. Just a random example:<p>Permission denied.<p>Please contact the administrator.<p><a href="https:&#x2F;&#x2F;cs.opensource.google&#x2F;go&#x2F;go&#x2F;+&#x2F;go1.21.1:src&#x2F;strings&#x2F;clone.go;l=21" rel="nofollow noreferrer">https:&#x2F;&#x2F;cs.opensource.google&#x2F;go&#x2F;go&#x2F;+&#x2F;go1.21.1:src&#x2F;strings&#x2F;cl...</a><p>I don&#x27;t know what causes this, but is seems to be related to my Firefox, because in Chromium I can see that page. I just wonder, what on earth makes it so hard to serve a <i>documentation</i> in a way that is available to all browsers.</div><br/><div id="37749275" class="c"><input type="checkbox" id="c-37749275" checked=""/><div class="controls bullet"><span class="by">elygre</span><span>|</span><a href="#37748528">root</a><span>|</span><a href="#37749214">parent</a><span>|</span><a href="#37748647">next</a><span>|</span><label class="collapse" for="c-37749275">[-]</label><label class="expand" for="c-37749275">[1 more]</label></div><br/><div class="children"><div class="content">For a counterpoint: I can see that page in Firefox. Probably related to some setting on your computer.</div><br/></div></div></div></div><div id="37748647" class="c"><input type="checkbox" id="c-37748647" checked=""/><div class="controls bullet"><span class="by">im_dario</span><span>|</span><a href="#37748528">parent</a><span>|</span><a href="#37749214">prev</a><span>|</span><a href="#37748595">next</a><span>|</span><label class="collapse" for="c-37748647">[-]</label><label class="expand" for="c-37748647">[5 more]</label></div><br/><div class="children"><div class="content">Telemetry is opt-in [0], it shouldn&#x27;t be a concern.<p>[0] <a href="https:&#x2F;&#x2F;research.swtch.com&#x2F;telemetry-opt-in" rel="nofollow noreferrer">https:&#x2F;&#x2F;research.swtch.com&#x2F;telemetry-opt-in</a></div><br/><div id="37748871" class="c"><input type="checkbox" id="c-37748871" checked=""/><div class="controls bullet"><span class="by">fweimer</span><span>|</span><a href="#37748528">root</a><span>|</span><a href="#37748647">parent</a><span>|</span><a href="#37748783">next</a><span>|</span><label class="collapse" for="c-37748871">[-]</label><label class="expand" for="c-37748871">[2 more]</label></div><br/><div class="children"><div class="content">GOPROXY is enabled by default. “Since Go 1.13, the go command by default downloads and authenticates modules using the Go module mirror and Go checksum database.” <a href="https:&#x2F;&#x2F;proxy.golang.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;proxy.golang.org&#x2F;</a></div><br/><div id="37749088" class="c"><input type="checkbox" id="c-37749088" checked=""/><div class="controls bullet"><span class="by">eddythompson80</span><span>|</span><a href="#37748528">root</a><span>|</span><a href="#37748871">parent</a><span>|</span><a href="#37748783">next</a><span>|</span><label class="collapse" for="c-37749088">[-]</label><label class="expand" for="c-37749088">[1 more]</label></div><br/><div class="children"><div class="content">Only if you’re not vendoring your dependencies, afaik.</div><br/></div></div></div></div><div id="37748783" class="c"><input type="checkbox" id="c-37748783" checked=""/><div class="controls bullet"><span class="by">hknmtt</span><span>|</span><a href="#37748528">root</a><span>|</span><a href="#37748647">parent</a><span>|</span><a href="#37748871">prev</a><span>|</span><a href="#37748595">next</a><span>|</span><label class="collapse" for="c-37748783">[-]</label><label class="expand" for="c-37748783">[2 more]</label></div><br/><div class="children"><div class="content">its mere existence is a concern. people are so dumb when they ignore these things. whenever there already is something, it can only go further.</div><br/><div id="37749059" class="c"><input type="checkbox" id="c-37749059" checked=""/><div class="controls bullet"><span class="by">eddythompson80</span><span>|</span><a href="#37748528">root</a><span>|</span><a href="#37748783">parent</a><span>|</span><a href="#37748595">next</a><span>|</span><label class="collapse" for="c-37749059">[-]</label><label class="expand" for="c-37749059">[1 more]</label></div><br/><div class="children"><div class="content">Debian, for example, has an opt-in telemetry. Would you apply that to Debian?</div><br/></div></div></div></div></div></div><div id="37748595" class="c"><input type="checkbox" id="c-37748595" checked=""/><div class="controls bullet"><span class="by">fsociety</span><span>|</span><a href="#37748528">parent</a><span>|</span><a href="#37748647">prev</a><span>|</span><a href="#37748770">next</a><span>|</span><label class="collapse" for="c-37748595">[-]</label><label class="expand" for="c-37748595">[4 more]</label></div><br/><div class="children"><div class="content">Sounds like go routines was not a selling point if telemetry tipped you over then.</div><br/></div></div><div id="37748770" class="c"><input type="checkbox" id="c-37748770" checked=""/><div class="controls bullet"><span class="by">Leotard6963</span><span>|</span><a href="#37748528">parent</a><span>|</span><a href="#37748595">prev</a><span>|</span><label class="collapse" for="c-37748770">[-]</label><label class="expand" for="c-37748770">[1 more]</label></div><br/><div class="children"><div class="content">re: telemetry<p>We don&#x27;t like it as well, just do not enable it :^<p>re: RAII<p>It is not possible to add RAII support without updating the compiler to call specific methods automatically, so currently it is not an option (as we are using unmodified official toolchain).<p>But the `g` register defined in Go is of great value, and we are making use of it to provide custom goroutine support, which means you can have custom allocator and scheduler for specific goroutines, so that you can have some of them with GC enabled and others not.<p>re: compare to V<p>pcz is a stdlib (plus a cli tool to build), not a new language, you still write Go code but in a slightly different style.</div><br/></div></div></div></div></div></div></div></div></div></body></html>