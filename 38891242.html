<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1704618054741" as="style"/><link rel="stylesheet" href="styles.css?v=1704618054741"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://mattkaras.info/?p=139">Red Tortoise Architecture</a> <span class="domain">(<a href="https://mattkaras.info">mattkaras.info</a>)</span></div><div class="subtext"><span>lucidguppy</span> | <span>28 comments</span></div><br/><div><div id="38893466" class="c"><input type="checkbox" id="c-38893466" checked=""/><div class="controls bullet"><span class="by">bob1029</span><span>|</span><a href="#38891741">next</a><span>|</span><label class="collapse" for="c-38893466">[-]</label><label class="expand" for="c-38893466">[4 more]</label></div><br/><div class="children"><div class="content">&gt; But why the hell are you putting two databases into the architecture out of the gate?!<p>&gt; There are a couple of reasons for this. Primarily I feel like the access patterns for the customer are sufficiently different to business access patterns and have different requirements.<p>The central problem I see with every article like this is the author&#x27;s &quot;business&quot; and my business are entirely different universes. &quot;Different requirements&quot; is the <i>entire game</i>. Everything depends on the customer&#x27;s expectations. When I read stuff like this I sometimes wonder if we are even speaking the same language.<p>For me the &quot;Red Tortoise&quot; architecture is to start with <i>A</i> SQL database and iterate the schema with business owners and customers until everyone is so bored with how obvious it all is that they have to take frequent breaks for naps.<p>I could take articles like this more seriously if there was some kind of introductory section that explained the actual business&#x2F;problem that needed solving. Otherwise, this feels like a pointless shiny technology rabbit chase through the fields of &quot;what if?&quot;.</div><br/><div id="38894917" class="c"><input type="checkbox" id="c-38894917" checked=""/><div class="controls bullet"><span class="by">brudgers</span><span>|</span><a href="#38893466">parent</a><span>|</span><a href="#38891741">next</a><span>|</span><label class="collapse" for="c-38894917">[-]</label><label class="expand" for="c-38894917">[3 more]</label></div><br/><div class="children"><div class="content">I agree that context is missing.<p>But I can&#x27;t think of an obvious class of business problems where the database schema for a customer facing system wouldn&#x27;t be served by working hand in hand with the customer.<p>But, that is probably due to my cognitive limitations, lack of specific experience, or absence of knowledge regarding the context you are thinking of.<p>Can you give some context to the sort of problems you are focused on? Thanks.</div><br/><div id="38898008" class="c"><input type="checkbox" id="c-38898008" checked=""/><div class="controls bullet"><span class="by">gmfawcett</span><span>|</span><a href="#38893466">root</a><span>|</span><a href="#38894917">parent</a><span>|</span><a href="#38897731">next</a><span>|</span><label class="collapse" for="c-38898008">[-]</label><label class="expand" for="c-38898008">[1 more]</label></div><br/><div class="children"><div class="content">It depends. In some applications, the business users are SQL power users who live and work in the schema, and every bad design choice hurts them every day. But in others, the schema is fully hidden behind UIs and canned output (reports, dashboards, ETLs). It never sees sunlight, so many bodies can be buried.<p>Even custom, tailored software often gets deployed as SaaS these days.</div><br/></div></div><div id="38897731" class="c"><input type="checkbox" id="c-38897731" checked=""/><div class="controls bullet"><span class="by">m0llusk</span><span>|</span><a href="#38893466">root</a><span>|</span><a href="#38894917">parent</a><span>|</span><a href="#38898008">prev</a><span>|</span><a href="#38891741">next</a><span>|</span><label class="collapse" for="c-38897731">[-]</label><label class="expand" for="c-38897731">[1 more]</label></div><br/><div class="children"><div class="content">Government regulation compliance:  It is necessary to make accounts, verify identity, request and pay for licenses.  Following rules, displaying required notifications, enforcing compliance with fines or status changes all comes across to most members of the public as completely byzantine and incomprehensible.  All of that needs to start with government officers who understand the related legal landscape.</div><br/></div></div></div></div></div></div><div id="38891741" class="c"><input type="checkbox" id="c-38891741" checked=""/><div class="controls bullet"><span class="by">koliber</span><span>|</span><a href="#38893466">prev</a><span>|</span><a href="#38891637">next</a><span>|</span><label class="collapse" for="c-38891741">[-]</label><label class="expand" for="c-38891741">[10 more]</label></div><br/><div class="children"><div class="content">How does this architecture handle this concern:<p>Say I have a web application, written in JS running in the client browser. It uses the REST API.<p>I also need an Android app.<p>Does the Android app use the same REST API? If so, is the business logic re-implement both in the front end web JS code and inside of the Android app?<p>Or is the business logic embedded in the API?<p>If the rest API is pure, it will provide low-level CRUD operations with minimal business logic. The business logic will need to be written in each frontend. Making sure the business logic is correct and in sync across the front ends becomes a challenge.<p>If the business logic is embedded in the API, then many of the API endpoints will be less REST and more RPC style. But then the utility of Django REST framework is diminished.<p>How would you navigate this?</div><br/><div id="38892040" class="c"><input type="checkbox" id="c-38892040" checked=""/><div class="controls bullet"><span class="by">arcbyte</span><span>|</span><a href="#38891741">parent</a><span>|</span><a href="#38892281">next</a><span>|</span><label class="collapse" for="c-38892040">[-]</label><label class="expand" for="c-38892040">[7 more]</label></div><br/><div class="children"><div class="content">Business logic is never, never, never in any UI. ALWAYS in the API. APIs with business logic have no bearing on RESTful vs RPC. None whatsoever.<p>I don&#x27;t trust the article author to understand this based on the choices made.</div><br/><div id="38892291" class="c"><input type="checkbox" id="c-38892291" checked=""/><div class="controls bullet"><span class="by">radicalbyte</span><span>|</span><a href="#38891741">root</a><span>|</span><a href="#38892040">parent</a><span>|</span><a href="#38892378">next</a><span>|</span><label class="collapse" for="c-38892291">[-]</label><label class="expand" for="c-38892291">[1 more]</label></div><br/><div class="children"><div class="content">I like it when people like that work at banks. You can have a lot of fun with &quot;pure REST APIs which provide CRUD operations&quot; on bank accounts. Especially when the important business logic - such as credits and debits - are implemented in the frontend :-)</div><br/></div></div><div id="38892378" class="c"><input type="checkbox" id="c-38892378" checked=""/><div class="controls bullet"><span class="by">isoprophlex</span><span>|</span><a href="#38891741">root</a><span>|</span><a href="#38892040">parent</a><span>|</span><a href="#38892291">prev</a><span>|</span><a href="#38892390">next</a><span>|</span><label class="collapse" for="c-38892378">[-]</label><label class="expand" for="c-38892378">[1 more]</label></div><br/><div class="children"><div class="content">The whole thing defending that you must absolutely &quot;ETL into NoSQL and do state management into a separate RDBMS&quot; is a red flag for me, too.</div><br/></div></div><div id="38892390" class="c"><input type="checkbox" id="c-38892390" checked=""/><div class="controls bullet"><span class="by">Etheryte</span><span>|</span><a href="#38891741">root</a><span>|</span><a href="#38892040">parent</a><span>|</span><a href="#38892378">prev</a><span>|</span><a href="#38892281">next</a><span>|</span><label class="collapse" for="c-38892390">[-]</label><label class="expand" for="c-38892390">[4 more]</label></div><br/><div class="children"><div class="content">I think you&#x27;re missing the point. Business logic isn&#x27;t only what you commit to a database, it&#x27;s also how the user interacts with the data. Of course you always validate what the user sent you in the end, but there&#x27;s a lot to be done on the frontend as well. A good example is validation. You often want to have validation of some sorts and that belongs both in the backend and on the frontend. The backend part ensures your database is always safe and sound while the frontend part is responsible for giving the user early feedback. The question the comment above yours is asking if and how do you keep that in sync between your API, your Android app and and your webapp.</div><br/><div id="38892545" class="c"><input type="checkbox" id="c-38892545" checked=""/><div class="controls bullet"><span class="by">arcbyte</span><span>|</span><a href="#38891741">root</a><span>|</span><a href="#38892390">parent</a><span>|</span><a href="#38892699">next</a><span>|</span><label class="collapse" for="c-38892545">[-]</label><label class="expand" for="c-38892545">[2 more]</label></div><br/><div class="children"><div class="content">&gt; A good example is validation.<p>It is a good example to bring up because front end validation is not business logic, it is presentation logic. For some simple use cases that might not be obvious to many people but let&#x27;s just consider a sign up form accepting an email address and a password. There definitely validations you want to perform in both places - the password needs to be 10 characters and have at least 3 of numbers, uppercase, lowercase, and special characters. Those exact password validations will be the same in both the UI and API. 
But let&#x27;s consider the email. The business rule here is that only deliverable emails that are openable by the person signing up should be accepted for new users. You cant validate that on the front end. The best you can do is check for an @ symbol or run a more complicated regex (whales be there) before passing it off to the backend to actually send an email, encode signup details into a special link, and do all the work necessary to satisfy the business rule.<p>Its trivial to further drive that point home that UI validations are not business logic even when the same validation appears as part of business logic. You do some minimal checks to save the user time on the UI, but those shouldn&#x27;t even be looked at as validations. They should be thought of as affordable for the user to prevent wasting their time with trivial, predictable errors.</div><br/><div id="38892656" class="c"><input type="checkbox" id="c-38892656" checked=""/><div class="controls bullet"><span class="by">Etheryte</span><span>|</span><a href="#38891741">root</a><span>|</span><a href="#38892545">parent</a><span>|</span><a href="#38892699">next</a><span>|</span><label class="collapse" for="c-38892656">[-]</label><label class="expand" for="c-38892656">[1 more]</label></div><br/><div class="children"><div class="content">This is a very narrow take on what validation is and what it&#x27;s used for. A better example would be managing resources, what operations you can perform, what resources are assignable to what groups etc, are all validation and if you don&#x27;t have that structure on the frontend your UI is as usable as picking a date by writing a cron expression. No one is saying you don&#x27;t need this logic on the backend. What we are saying is you need it on the frontend too, otherwise you don&#x27;t have a UI to begin with.</div><br/></div></div></div></div><div id="38892699" class="c"><input type="checkbox" id="c-38892699" checked=""/><div class="controls bullet"><span class="by">radicalbyte</span><span>|</span><a href="#38891741">root</a><span>|</span><a href="#38892390">parent</a><span>|</span><a href="#38892545">prev</a><span>|</span><a href="#38892281">next</a><span>|</span><label class="collapse" for="c-38892699">[-]</label><label class="expand" for="c-38892699">[1 more]</label></div><br/><div class="children"><div class="content">He&#x27;s replying to a post which suggests that a REST API should just be CRUD* over a database &amp; implement everything else &quot;in the front-end&quot;.<p>The unfortunate truth is that our industry is full of examples where people have done exactly this. With predictably bad results.</div><br/></div></div></div></div></div></div><div id="38892281" class="c"><input type="checkbox" id="c-38892281" checked=""/><div class="controls bullet"><span class="by">radicalbyte</span><span>|</span><a href="#38891741">parent</a><span>|</span><a href="#38892040">prev</a><span>|</span><a href="#38891966">next</a><span>|</span><label class="collapse" for="c-38892281">[-]</label><label class="expand" for="c-38892281">[1 more]</label></div><br/><div class="children"><div class="content">The logic has to run server side either way.. but that&#x27;s obvious. Otherwise any idiot with an API key has full control over your system. That&#x27;s why you don&#x27;t &quot;make a pure REST API which provides low-level CRUD operations&quot; as you&#x27;ve suggested. If you have invariants which must be held then you can&#x27;t do that - and with any meaningful system you will have such invariants.<p>Frontend? You can implement it in a shared library and cross compile. Or implement it in a DSL and interpret (or compile) that for each target platform.<p>Is that overkill? Then implement the bits (it&#x27;s almost always a subset) you need in the frontend.<p>Don&#x27;t like that but your app can assume an internet connection? Then keep a connection open (i.e. Signal R) and call procedures on the server.</div><br/></div></div><div id="38891966" class="c"><input type="checkbox" id="c-38891966" checked=""/><div class="controls bullet"><span class="by">ahoka</span><span>|</span><a href="#38891741">parent</a><span>|</span><a href="#38892281">prev</a><span>|</span><a href="#38891637">next</a><span>|</span><label class="collapse" for="c-38891966">[-]</label><label class="expand" for="c-38891966">[1 more]</label></div><br/><div class="children"><div class="content">The proposed “architecture” doesn’t address this, because it’s a nothingburger. What about authn&#x2F;authz, etc? The only good piece of advice here is to separate your management and customer data.</div><br/></div></div></div></div><div id="38891637" class="c"><input type="checkbox" id="c-38891637" checked=""/><div class="controls bullet"><span class="by">dsabanin</span><span>|</span><a href="#38891741">prev</a><span>|</span><a href="#38891575">next</a><span>|</span><label class="collapse" for="c-38891637">[-]</label><label class="expand" for="c-38891637">[9 more]</label></div><br/><div class="children"><div class="content">I choked seeing how frontend was relegated to a single box at the end of the diagram, given that it&#x27;s complexity often dwarfs the rest of the system. Most backends these days can be had out of the box by using something like Supabase,  AppWrite, Firebase or tons of others. These days web app backends seem almost too trivial to bother.</div><br/><div id="38892384" class="c"><input type="checkbox" id="c-38892384" checked=""/><div class="controls bullet"><span class="by">radicalbyte</span><span>|</span><a href="#38891637">parent</a><span>|</span><a href="#38892168">next</a><span>|</span><label class="collapse" for="c-38892384">[-]</label><label class="expand" for="c-38892384">[1 more]</label></div><br/><div class="children"><div class="content">What kind of systems do you work on? This might be true for a certain class of mobile apps &#x2F; websites it is absolutely not true for significant systems.<p>Just because your TODO app only needs a BLOB storage with OIDC for the backend does not mean that &quot;all of the complexity is in the frontend&quot;.<p>Pick a random Fortune-500 company. Their IT system complexity will be dominated by the &quot;backend&quot;. Easily 90-99% of their complexity and budget will go into building and maintaining those systems.</div><br/></div></div><div id="38892168" class="c"><input type="checkbox" id="c-38892168" checked=""/><div class="controls bullet"><span class="by">pc86</span><span>|</span><a href="#38891637">parent</a><span>|</span><a href="#38892384">prev</a><span>|</span><a href="#38892737">next</a><span>|</span><label class="collapse" for="c-38892168">[-]</label><label class="expand" for="c-38892168">[1 more]</label></div><br/><div class="children"><div class="content">There was a day not too long ago when the front end <i>was</i> a single box on a diagram. HTML forms posting to an API, then a redirect to a different page covered 99% of your front end.<p>There are quite a few react nextjs etc etc apps that could benefit from being a little more on that end of the spectrum.</div><br/></div></div><div id="38892737" class="c"><input type="checkbox" id="c-38892737" checked=""/><div class="controls bullet"><span class="by">evantbyrne</span><span>|</span><a href="#38891637">parent</a><span>|</span><a href="#38892168">prev</a><span>|</span><a href="#38891877">next</a><span>|</span><label class="collapse" for="c-38892737">[-]</label><label class="expand" for="c-38892737">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s quite the self-snitch. Even the most complex web applications don&#x27;t need a separate frontend server, let alone multiple. The only exception would be having an app or something that can&#x27;t just render HTML sent straight from the backend.</div><br/></div></div><div id="38891877" class="c"><input type="checkbox" id="c-38891877" checked=""/><div class="controls bullet"><span class="by">Etheryte</span><span>|</span><a href="#38891637">parent</a><span>|</span><a href="#38892737">prev</a><span>|</span><a href="#38891845">next</a><span>|</span><label class="collapse" for="c-38891877">[-]</label><label class="expand" for="c-38891877">[2 more]</label></div><br/><div class="children"><div class="content">Quoting the article makes it clear the author doesn&#x27;t understand the problem space. &quot;Just keep things as simple as possible&quot; is not an architecture.<p>&gt; For the front end – use whatever technology your front end developers prefer. Just keep things as simple as possible.</div><br/><div id="38892995" class="c"><input type="checkbox" id="c-38892995" checked=""/><div class="controls bullet"><span class="by">lucidguppy</span><span>|</span><a href="#38891637">root</a><span>|</span><a href="#38891877">parent</a><span>|</span><a href="#38891845">next</a><span>|</span><label class="collapse" for="c-38892995">[-]</label><label class="expand" for="c-38892995">[1 more]</label></div><br/><div class="children"><div class="content">Your correct I&#x27;m not super well versed on the front end.  I was under the impression that a react app could be hosted on an s3 bucket with reasonable performance.</div><br/></div></div></div></div><div id="38891845" class="c"><input type="checkbox" id="c-38891845" checked=""/><div class="controls bullet"><span class="by">mhuffman</span><span>|</span><a href="#38891637">parent</a><span>|</span><a href="#38891877">prev</a><span>|</span><a href="#38891725">next</a><span>|</span><label class="collapse" for="c-38891845">[-]</label><label class="expand" for="c-38891845">[1 more]</label></div><br/><div class="children"><div class="content">In many cases a front end is just a view of some API call which can be much more than a db query. Some times it is the other way around where the the front end is just pulling data and all the business logic is done in the browser. So I guess it depends on your needs.</div><br/></div></div><div id="38891725" class="c"><input type="checkbox" id="c-38891725" checked=""/><div class="controls bullet"><span class="by">danparsonson</span><span>|</span><a href="#38891637">parent</a><span>|</span><a href="#38891845">prev</a><span>|</span><a href="#38892215">next</a><span>|</span><label class="collapse" for="c-38891725">[-]</label><label class="expand" for="c-38891725">[1 more]</label></div><br/><div class="children"><div class="content">Did you mean complexity of deployment? What does a modern front-end need beyond something to serve up resources at a reasonable rate?</div><br/></div></div><div id="38892215" class="c"><input type="checkbox" id="c-38892215" checked=""/><div class="controls bullet"><span class="by">hobs</span><span>|</span><a href="#38891637">parent</a><span>|</span><a href="#38891725">prev</a><span>|</span><a href="#38891575">next</a><span>|</span><label class="collapse" for="c-38892215">[-]</label><label class="expand" for="c-38892215">[1 more]</label></div><br/><div class="children"><div class="content">A backend isn&#x27;t just a database, it sounds like you&#x27;ve just made your frontend your backend as well.</div><br/></div></div></div></div><div id="38891575" class="c"><input type="checkbox" id="c-38891575" checked=""/><div class="controls bullet"><span class="by">SoylentBob</span><span>|</span><a href="#38891637">prev</a><span>|</span><a href="#38894440">next</a><span>|</span><label class="collapse" for="c-38891575">[-]</label><label class="expand" for="c-38891575">[1 more]</label></div><br/><div class="children"><div class="content">Seems like the hug of death already reached the site. It returns a &quot;Error establishing a database connection&quot; message right now.</div><br/></div></div><div id="38894440" class="c"><input type="checkbox" id="c-38894440" checked=""/><div class="controls bullet"><span class="by">charcircuit</span><span>|</span><a href="#38891575">prev</a><span>|</span><a href="#38892193">next</a><span>|</span><label class="collapse" for="c-38894440">[-]</label><label class="expand" for="c-38894440">[1 more]</label></div><br/><div class="children"><div class="content">&gt;wins races<p>With how many round trips that are happening due to serving clients a static page, I wouldn&#x27;t call that winning a race, but I can see how tortoise may be accurate in that case.</div><br/></div></div><div id="38892193" class="c"><input type="checkbox" id="c-38892193" checked=""/><div class="controls bullet"><span class="by">amacbride</span><span>|</span><a href="#38894440">prev</a><span>|</span><label class="collapse" for="c-38892193">[-]</label><label class="expand" for="c-38892193">[2 more]</label></div><br/><div class="children"><div class="content">The Hug of Death seems to have shown that it&#x27;s not a * scalable * architecture.</div><br/></div></div></div></div></div></div></div></body></html>