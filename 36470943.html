<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1687770058094" as="style"/><link rel="stylesheet" href="styles.css?v=1687770058094"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.warrant.dev/why-zanzibar-shines-at-building-authorization/">Why Google Zanzibar shines at building authorization</a> <span class="domain">(<a href="https://blog.warrant.dev">blog.warrant.dev</a>)</span></div><div class="subtext"><span>kkajla</span> | <span>72 comments</span></div><br/><div><div id="36471794" class="c"><input type="checkbox" id="c-36471794" checked=""/><div class="controls bullet"><span class="by">AndreasHae</span><span>|</span><a href="#36473521">next</a><span>|</span><label class="collapse" for="c-36471794">[-]</label><label class="expand" for="c-36471794">[13 more]</label></div><br/><div class="children"><div class="content">We successfully used a Relationship-based Authorization System based on the Zanzibar paper at my last job building a B2B SaaS leaning heavily on cross-company integration.<p>The flexibility in defining rules through tuples helped us iterate rapidly on new product features. We used self-hosted Ory Keto [0] instances as the implementation, though we would have preferred a managed solution. We were checking out Auth0 Fine Grained Authorization [1] but it was still in Alpha back then.<p>[0]: <a href="https:&#x2F;&#x2F;www.ory.sh&#x2F;keto&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.ory.sh&#x2F;keto&#x2F;</a>
[1]: <a href="https:&#x2F;&#x2F;auth0.com&#x2F;developers&#x2F;lab&#x2F;fine-grained-authorization" rel="nofollow noreferrer">https:&#x2F;&#x2F;auth0.com&#x2F;developers&#x2F;lab&#x2F;fine-grained-authorization</a></div><br/><div id="36473083" class="c"><input type="checkbox" id="c-36473083" checked=""/><div class="controls bullet"><span class="by">kkajla</span><span>|</span><a href="#36471794">parent</a><span>|</span><a href="#36473531">next</a><span>|</span><label class="collapse" for="c-36473083">[-]</label><label class="expand" for="c-36473083">[2 more]</label></div><br/><div class="children"><div class="content">&gt; though we would have preferred a managed solution<p>We completely agree here, which is why we initially started out with our managed cloud offering, Warrant Cloud[1]. While Zanzibar is powerful, operating it with solid latency&#x2F;availability can be quite challenging.<p>[1] <a href="https:&#x2F;&#x2F;warrant.dev&#x2F;">https:&#x2F;&#x2F;warrant.dev&#x2F;</a></div><br/><div id="36475362" class="c"><input type="checkbox" id="c-36475362" checked=""/><div class="controls bullet"><span class="by">free652</span><span>|</span><a href="#36471794">root</a><span>|</span><a href="#36473083">parent</a><span>|</span><a href="#36473531">next</a><span>|</span><label class="collapse" for="c-36475362">[-]</label><label class="expand" for="c-36475362">[1 more]</label></div><br/><div class="children"><div class="content">So how do you manage filtering of a billion records?</div><br/></div></div></div></div><div id="36473531" class="c"><input type="checkbox" id="c-36473531" checked=""/><div class="controls bullet"><span class="by">comboy</span><span>|</span><a href="#36471794">parent</a><span>|</span><a href="#36473083">prev</a><span>|</span><a href="#36476538">next</a><span>|</span><label class="collapse" for="c-36473531">[-]</label><label class="expand" for="c-36473531">[9 more]</label></div><br/><div class="children"><div class="content">Can anybody explain me why there seem to be much focus on scalability in this context? I mean we have 8 billion people. If the whole planet registers, home PC can handle it, plus it partitions beautifully if necessary in case of authentication. So what am I missing?</div><br/><div id="36473566" class="c"><input type="checkbox" id="c-36473566" checked=""/><div class="controls bullet"><span class="by">smarx007</span><span>|</span><a href="#36471794">root</a><span>|</span><a href="#36473531">parent</a><span>|</span><a href="#36476538">next</a><span>|</span><label class="collapse" for="c-36473566">[-]</label><label class="expand" for="c-36473566">[8 more]</label></div><br/><div class="children"><div class="content">Forget about 8B people in this context. If you have 1000 microservices in the company and each has 100 rps, you are looking at ca. 100k rps to a Zanzibar-style system to authorize every request (not to authenticate a user).</div><br/><div id="36477240" class="c"><input type="checkbox" id="c-36477240" checked=""/><div class="controls bullet"><span class="by">mort96</span><span>|</span><a href="#36471794">root</a><span>|</span><a href="#36473566">parent</a><span>|</span><a href="#36475094">next</a><span>|</span><label class="collapse" for="c-36477240">[-]</label><label class="expand" for="c-36477240">[1 more]</label></div><br/><div class="children"><div class="content">This isn&#x27;t meant to invalidate what you&#x27;re saying, but this whole thread reads like a parody to me. 1000 services all making requests to Zanzibar, and this oreo keto thing.<p>Makes me think of this: <a href="https:&#x2F;&#x2F;m.youtube.com&#x2F;watch?v=y8OnoxKotPQ">https:&#x2F;&#x2F;m.youtube.com&#x2F;watch?v=y8OnoxKotPQ</a></div><br/></div></div><div id="36475094" class="c"><input type="checkbox" id="c-36475094" checked=""/><div class="controls bullet"><span class="by">dietr1ch</span><span>|</span><a href="#36471794">root</a><span>|</span><a href="#36473566">parent</a><span>|</span><a href="#36477240">prev</a><span>|</span><a href="#36473591">next</a><span>|</span><label class="collapse" for="c-36475094">[-]</label><label class="expand" for="c-36475094">[5 more]</label></div><br/><div class="children"><div class="content">Why does it need to be checked on a per-request level?<p>I&#x27;d expect you to be able to give short-lived capability tokens to clients that each machine can verify down the stack without making new rpcs. This would avoid the fan-out of all the internal services.<p>Is it just to prevent abuse?</div><br/><div id="36475769" class="c"><input type="checkbox" id="c-36475769" checked=""/><div class="controls bullet"><span class="by">akajla</span><span>|</span><a href="#36471794">root</a><span>|</span><a href="#36475094">parent</a><span>|</span><a href="#36475676">next</a><span>|</span><label class="collapse" for="c-36475769">[-]</label><label class="expand" for="c-36475769">[2 more]</label></div><br/><div class="children"><div class="content">You can encode capabilities&#x2F;permissions as scopes in distributed tokens (e.g. OAuth) but this can start to break down if you have very granular, fine-grained permissions (e.g. user:1 has &#x27;editor&#x27; access to 1000s of documents&#x2F;objects). This is similar to the problem that Carta ran into while building out their permissions[1].<p>In addition, yes - validating permissions on each request makes it so that you can revoke privilege(s) with immediate effect without needing a token to be invalidated.<p>[1] <a href="https:&#x2F;&#x2F;medium.com&#x2F;building-carta&#x2F;authz-cartas-highly-scalable-permissions-system-782a7f2c840f" rel="nofollow noreferrer">https:&#x2F;&#x2F;medium.com&#x2F;building-carta&#x2F;authz-cartas-highly-scalab...</a></div><br/></div></div><div id="36475676" class="c"><input type="checkbox" id="c-36475676" checked=""/><div class="controls bullet"><span class="by">AlphaSite</span><span>|</span><a href="#36471794">root</a><span>|</span><a href="#36475094">parent</a><span>|</span><a href="#36475769">prev</a><span>|</span><a href="#36475757">next</a><span>|</span><label class="collapse" for="c-36475676">[-]</label><label class="expand" for="c-36475676">[1 more]</label></div><br/><div class="children"><div class="content">Does the token identify every resource you have access to? I think is for multi tenant applications with fine grained access control.</div><br/></div></div><div id="36475757" class="c"><input type="checkbox" id="c-36475757" checked=""/><div class="controls bullet"><span class="by">paulddraper</span><span>|</span><a href="#36471794">root</a><span>|</span><a href="#36475094">parent</a><span>|</span><a href="#36475676">prev</a><span>|</span><a href="#36473591">next</a><span>|</span><label class="collapse" for="c-36475757">[-]</label><label class="expand" for="c-36475757">[1 more]</label></div><br/><div class="children"><div class="content">&quot;Oh, you just [insert complex solution here]&quot;<p>You need one capability token per principal and resource and perhaps access right.</div><br/></div></div></div></div><div id="36473591" class="c"><input type="checkbox" id="c-36473591" checked=""/><div class="controls bullet"><span class="by">comboy</span><span>|</span><a href="#36471794">root</a><span>|</span><a href="#36473566">parent</a><span>|</span><a href="#36475094">prev</a><span>|</span><a href="#36476538">next</a><span>|</span><label class="collapse" for="c-36473591">[-]</label><label class="expand" for="c-36473591">[1 more]</label></div><br/><div class="children"><div class="content">Thanks.</div><br/></div></div></div></div></div></div><div id="36476538" class="c"><input type="checkbox" id="c-36476538" checked=""/><div class="controls bullet"><span class="by">arekkas</span><span>|</span><a href="#36471794">parent</a><span>|</span><a href="#36473531">prev</a><span>|</span><a href="#36473521">next</a><span>|</span><label class="collapse" for="c-36476538">[-]</label><label class="expand" for="c-36476538">[1 more]</label></div><br/><div class="children"><div class="content">Glad to see that you used Ory Keto! :)<p>Ory does have a managed service offering now for Ory Keto as well!</div><br/></div></div></div></div><div id="36473521" class="c"><input type="checkbox" id="c-36473521" checked=""/><div class="controls bullet"><span class="by">smarx007</span><span>|</span><a href="#36471794">prev</a><span>|</span><a href="#36477259">next</a><span>|</span><label class="collapse" for="c-36473521">[-]</label><label class="expand" for="c-36473521">[3 more]</label></div><br/><div class="children"><div class="content">Very happy to see industry discover the power of graphs and especially, a triple-based representation (cf. RDF [0]; subjects are “subjects”, relationships are “predicates”, and objects are “objects”).<p>Now, a genuine question: why try to shoehorn a freeform graph (because the list of relationships is not hardcoded) into a relational DB instead of using a graph DBMS like Neo4j, Apache Jena (Fuseki) etc. From looking at the source code briefly [1], I didn’t see any extreme SQL optimizations. This indicates to me that Warrant would either support a very limited set of query types, or be very slow on quite a few types of them. Also see “billion triple challenge” in the academia around this.<p>Good luck with your startup!<p>[0]: <a href="https:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;rdf11-primer&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.w3.org&#x2F;TR&#x2F;rdf11-primer&#x2F;</a><p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;warrant-dev&#x2F;warrant&#x2F;tree&#x2F;main&#x2F;pkg&#x2F;authz&#x2F;object">https:&#x2F;&#x2F;github.com&#x2F;warrant-dev&#x2F;warrant&#x2F;tree&#x2F;main&#x2F;pkg&#x2F;authz&#x2F;o...</a></div><br/><div id="36473633" class="c"><input type="checkbox" id="c-36473633" checked=""/><div class="controls bullet"><span class="by">zdragnar</span><span>|</span><a href="#36473521">parent</a><span>|</span><a href="#36477259">next</a><span>|</span><label class="collapse" for="c-36473633">[-]</label><label class="expand" for="c-36473633">[2 more]</label></div><br/><div class="children"><div class="content">Is Neo4j a good option? I&#x27;ve not heard great things about it performance-wise, though this was some years ago when tinkerpop&#x2F;gremlin was starting to make news in my circles, and we were operating on extremely dense graphs.</div><br/><div id="36474898" class="c"><input type="checkbox" id="c-36474898" checked=""/><div class="controls bullet"><span class="by">WirelessGigabit</span><span>|</span><a href="#36473521">root</a><span>|</span><a href="#36473633">parent</a><span>|</span><a href="#36477259">next</a><span>|</span><label class="collapse" for="c-36474898">[-]</label><label class="expand" for="c-36474898">[1 more]</label></div><br/><div class="children"><div class="content">I have experience with Neo4j as a consumer of the database, but as part of a project where someone else wrote the queries.<p>I hate it. It&#x27;s extremely expensive. It&#x27;s slow. Very slow. It only recently had multiple databases per instance. It doesn&#x27;t support per database encryption. Did I mention it&#x27;s slow?<p>We also looked at the ongdb effort, but that went offline all of the sudden due to licensing issues. Now it&#x27;s back but they reset (?) the version number. Confusing. Also, that one is built in version 3-ish. So no multi-db. While you can spin up multiple instance (it&#x27;s free?, it&#x27;s still Java, i.e. slow and eats memory.</div><br/></div></div></div></div></div></div><div id="36477259" class="c"><input type="checkbox" id="c-36477259" checked=""/><div class="controls bullet"><span class="by">simongray</span><span>|</span><a href="#36473521">prev</a><span>|</span><a href="#36471993">next</a><span>|</span><label class="collapse" for="c-36477259">[-]</label><label class="expand" for="c-36477259">[1 more]</label></div><br/><div class="children"><div class="content">Add this to the list of blog posts praising RDF without anyone realising it.<p>And the additional element added to the tuple is reminiscent of quads, also in heavy use in RDF implementations or similar graph databases.</div><br/></div></div><div id="36471993" class="c"><input type="checkbox" id="c-36471993" checked=""/><div class="controls bullet"><span class="by">susscrofa</span><span>|</span><a href="#36477259">prev</a><span>|</span><a href="#36472380">next</a><span>|</span><label class="collapse" for="c-36471993">[-]</label><label class="expand" for="c-36471993">[15 more]</label></div><br/><div class="children"><div class="content">The Zanzibar paper has a section on the consistency model, which says that the race conditions outlined are solved by respecting update order. It then solves it by using Spanner as underlying storage (which is kind of lazy).<p>How does Warrant deal with consistency?</div><br/><div id="36472506" class="c"><input type="checkbox" id="c-36472506" checked=""/><div class="controls bullet"><span class="by">kkajla</span><span>|</span><a href="#36471993">parent</a><span>|</span><a href="#36472729">next</a><span>|</span><label class="collapse" for="c-36472506">[-]</label><label class="expand" for="c-36472506">[1 more]</label></div><br/><div class="children"><div class="content">You&#x27;ve highlighted a very important part of the paper. A lot of the external consistency guarantees provided by Zanzibar are facilitated by Spanner and its TrueTime mechanism. Warrant doesn&#x27;t currently support&#x2F;use Spanner. However, for the databases we do support (MySQL and Postgres - which are both ACID compliant), we&#x27;ve implemented the zookie protocol using the incrementing transaction ids they provide. This approach works for single writer deployments of these databases, so know that write throughput and overall availability will be lower. We started with this approach because most teams still use MySQL&#x2F;Postgres. Warrant is built to support running on different types of databases, so we will be working on support for Spanner and other multi-writer distributed databases like Cockroach and Yugabyte in the future. I hope that helps.</div><br/></div></div><div id="36472729" class="c"><input type="checkbox" id="c-36472729" checked=""/><div class="controls bullet"><span class="by">aseipp</span><span>|</span><a href="#36471993">parent</a><span>|</span><a href="#36472506">prev</a><span>|</span><a href="#36472455">next</a><span>|</span><label class="collapse" for="c-36472729">[-]</label><label class="expand" for="c-36472729">[11 more]</label></div><br/><div class="children"><div class="content">The fact they did it that way is actually a perfect example of why Google is considered so far ahead of competitors technologically and operationally by their engineers. When you have a powerful building block like Spanner that engineers can use, they then can work on the product instead of wasting time on brittle consistency models, custom storage layers, and providing their own uptime guarantees.<p>This goes for every part of their stack. As a result, things like Colossus, BigTable, and Spanner effectively act like force multipliers for their engineers, because they provide the guarantees they can&#x27;t get elsewhere. The fact other people at other random companies can&#x27;t do that? Not their problem in the slightest, actually.</div><br/><div id="36473883" class="c"><input type="checkbox" id="c-36473883" checked=""/><div class="controls bullet"><span class="by">skybrian</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36472729">parent</a><span>|</span><a href="#36474363">next</a><span>|</span><label class="collapse" for="c-36473883">[-]</label><label class="expand" for="c-36473883">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s been many years, but a downside back when I worked there was infrastructure churn. Migrating off deprecated infrastructure meant you had to do a lot of work just to stay where you are. Mostly unstaffed products (like Google Reader, say) were at risk of going under due to technical debt.<p>When App Engine launched, that was great for me because I could write internal tools that were mostly off the treadmill. Unless you used one of App Engine&#x27;s less-used API&#x27;s (which themselves eventually got deprecated), your more obscure team-specific services could keep running.<p>So, lots of great technology is not necessarily great for productivity. I don&#x27;t know what&#x27;s happened since. I expected that launching Cloud would result in more mature infrastructure because external customers won&#x27;t tolerate churn as much. I guess it&#x27;s sort of true?</div><br/><div id="36476440" class="c"><input type="checkbox" id="c-36476440" checked=""/><div class="controls bullet"><span class="by">hn_go_brrrrr</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36473883">parent</a><span>|</span><a href="#36474363">next</a><span>|</span><label class="collapse" for="c-36476440">[-]</label><label class="expand" for="c-36476440">[2 more]</label></div><br/><div class="children"><div class="content">They updated the churn policy to require infrastructure teams to migrate their users, not just dump the work on them. That greatly eased the unfunded mandate load on product teams. That hasn&#x27;t stopped infrastructure teams from making sweeping changes, though. There&#x27;s one in particular happening now that&#x27;s enormous -- to riff on the &quot;changing the engines midflight&quot; analogy, it&#x27;s replacing the fuselage without anyone noticing.</div><br/><div id="36476942" class="c"><input type="checkbox" id="c-36476942" checked=""/><div class="controls bullet"><span class="by">danpalmer</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36476440">parent</a><span>|</span><a href="#36474363">next</a><span>|</span><label class="collapse" for="c-36476942">[-]</label><label class="expand" for="c-36476942">[1 more]</label></div><br/><div class="children"><div class="content">Which one is that? Feel free to just hint or PM me.</div><br/></div></div></div></div></div></div><div id="36474363" class="c"><input type="checkbox" id="c-36474363" checked=""/><div class="controls bullet"><span class="by">javier2</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36472729">parent</a><span>|</span><a href="#36473883">prev</a><span>|</span><a href="#36474012">next</a><span>|</span><label class="collapse" for="c-36474363">[-]</label><label class="expand" for="c-36474363">[1 more]</label></div><br/><div class="children"><div class="content">I worked for a place that didnt value solid engineering in this way, and our systems where always so janky and half broken. I dont expect building Spanner, but being able to migrate certain huge tables at all would be nice. But no, they always balked at spending time building engineering tools. Even a solid job execution system would be cool, but no, janky it is.</div><br/></div></div><div id="36474012" class="c"><input type="checkbox" id="c-36474012" checked=""/><div class="controls bullet"><span class="by">iainmerrick</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36472729">parent</a><span>|</span><a href="#36474363">prev</a><span>|</span><a href="#36472982">next</a><span>|</span><label class="collapse" for="c-36474012">[-]</label><label class="expand" for="c-36474012">[5 more]</label></div><br/><div class="children"><div class="content">I think that view might be a bit out of date.<p>Most of that stuff is available to external users in Google Cloud; so why isn’t Google Cloud more popular? I don’t have hard numbers handy, but it seems to me that GCP is behind both AWS and Azure in terms of dev mindshare.<p>GCP has plenty of great tools, but it can also be quite awkward to use, and it’s lacking some useful stuff like lightweight edge functions.</div><br/><div id="36474515" class="c"><input type="checkbox" id="c-36474515" checked=""/><div class="controls bullet"><span class="by">kevincox</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36474012">parent</a><span>|</span><a href="#36474110">next</a><span>|</span><label class="collapse" for="c-36474515">[-]</label><label class="expand" for="c-36474515">[1 more]</label></div><br/><div class="children"><div class="content">A lot of stuff is proprietary so adopting it as a third party can be much riskier. While Google Cloud does have a pretty solid depreciation policy it still means that you are locked to Google Cloud and whatever their future is. At least internal users can escalate if there are serious issues.</div><br/></div></div><div id="36474110" class="c"><input type="checkbox" id="c-36474110" checked=""/><div class="controls bullet"><span class="by">re-thc</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36474012">parent</a><span>|</span><a href="#36474515">prev</a><span>|</span><a href="#36472982">next</a><span>|</span><label class="collapse" for="c-36474110">[-]</label><label class="expand" for="c-36474110">[3 more]</label></div><br/><div class="children"><div class="content">&gt; but it seems to me that GCP is behind both AWS and Azure in terms of dev mindshare<p>AWS has 1st mover advantage and the biggest ecosystem.<p>Azure has Microsoft behind it = everyone that used Office, Sharepoint, SQL Server, C#, etc that wanted to move to the cloud.<p>Google doesn&#x27;t have such a backing. Oracle cloud (huge growth) might be stronger in that sense.</div><br/><div id="36474209" class="c"><input type="checkbox" id="c-36474209" checked=""/><div class="controls bullet"><span class="by">iainmerrick</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36474110">parent</a><span>|</span><a href="#36472982">next</a><span>|</span><label class="collapse" for="c-36474209">[-]</label><label class="expand" for="c-36474209">[2 more]</label></div><br/><div class="children"><div class="content">I agree, but it’s surprising that things are that way, especially as they’re not short of cash. If they have this big tech edge over their competitors, where’s the benefit?</div><br/><div id="36474312" class="c"><input type="checkbox" id="c-36474312" checked=""/><div class="controls bullet"><span class="by">re-thc</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36474209">parent</a><span>|</span><a href="#36472982">next</a><span>|</span><label class="collapse" for="c-36474312">[-]</label><label class="expand" for="c-36474312">[1 more]</label></div><br/><div class="children"><div class="content">&gt; If they have this big tech edge over their competitors, where’s the benefit?<p>Most of it is behind huge paywalls compared to their competitors. There&#x27;s e.g. no serverless version of spanner that is pay-per-usage. Same with Big Table. Even the newly released AlloyDB has a huge starting cost.<p>If no 1 knows and no 1 can feel for the advantage it doesn&#x27;t really help.</div><br/></div></div></div></div></div></div></div></div><div id="36472982" class="c"><input type="checkbox" id="c-36472982" checked=""/><div class="controls bullet"><span class="by">kjgkjhfkjf</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36472729">parent</a><span>|</span><a href="#36474012">prev</a><span>|</span><a href="#36472455">next</a><span>|</span><label class="collapse" for="c-36472982">[-]</label><label class="expand" for="c-36472982">[1 more]</label></div><br/><div class="children"><div class="content">Ironically, by the time Spanner became generally available, Google had largely lost their appetite for launching new products.</div><br/></div></div></div></div><div id="36472455" class="c"><input type="checkbox" id="c-36472455" checked=""/><div class="controls bullet"><span class="by">noah_buddy</span><span>|</span><a href="#36471993">parent</a><span>|</span><a href="#36472729">prev</a><span>|</span><a href="#36472380">next</a><span>|</span><label class="collapse" for="c-36472455">[-]</label><label class="expand" for="c-36472455">[2 more]</label></div><br/><div class="children"><div class="content">Why is it lazy? Seems like leveraging a tool Google built for distributed systems specifically for consistency guarantees.</div><br/><div id="36473479" class="c"><input type="checkbox" id="c-36473479" checked=""/><div class="controls bullet"><span class="by">sunk1st</span><span>|</span><a href="#36471993">root</a><span>|</span><a href="#36472455">parent</a><span>|</span><a href="#36472380">next</a><span>|</span><label class="collapse" for="c-36473479">[-]</label><label class="expand" for="c-36473479">[1 more]</label></div><br/><div class="children"><div class="content">As I understood it from context, the word lazy was being used to complain that the reference to Spanner wasn’t in-lined.</div><br/></div></div></div></div></div></div><div id="36472380" class="c"><input type="checkbox" id="c-36472380" checked=""/><div class="controls bullet"><span class="by">sulam</span><span>|</span><a href="#36471993">prev</a><span>|</span><a href="#36472660">next</a><span>|</span><label class="collapse" for="c-36472380">[-]</label><label class="expand" for="c-36472380">[9 more]</label></div><br/><div class="children"><div class="content">I was super curious to hear how Zanzibar is being used to control access to buildings. Don’t be fooled, this is not that post. ;)</div><br/><div id="36472688" class="c"><input type="checkbox" id="c-36472688" checked=""/><div class="controls bullet"><span class="by">amelius</span><span>|</span><a href="#36472380">parent</a><span>|</span><a href="#36476157">next</a><span>|</span><label class="collapse" for="c-36472688">[-]</label><label class="expand" for="c-36472688">[2 more]</label></div><br/><div class="children"><div class="content">I was super curious to hear why the Zanzibar office of Google was somehow better at authorization than e.g. their Mountain View office.</div><br/><div id="36473647" class="c"><input type="checkbox" id="c-36473647" checked=""/><div class="controls bullet"><span class="by">jnwatson</span><span>|</span><a href="#36472380">root</a><span>|</span><a href="#36472688">parent</a><span>|</span><a href="#36476157">next</a><span>|</span><label class="collapse" for="c-36473647">[-]</label><label class="expand" for="c-36473647">[1 more]</label></div><br/><div class="children"><div class="content">At least one Google office I know has building access controlled by Zanzibar.</div><br/></div></div></div></div><div id="36476157" class="c"><input type="checkbox" id="c-36476157" checked=""/><div class="controls bullet"><span class="by">ryanjshaw</span><span>|</span><a href="#36472380">parent</a><span>|</span><a href="#36472688">prev</a><span>|</span><a href="#36472697">next</a><span>|</span><label class="collapse" for="c-36476157">[-]</label><label class="expand" for="c-36476157">[2 more]</label></div><br/><div class="children"><div class="content">I was surprised that Google even had offices in Zanzibar.</div><br/><div id="36476753" class="c"><input type="checkbox" id="c-36476753" checked=""/><div class="controls bullet"><span class="by">scotty79</span><span>|</span><a href="#36472380">root</a><span>|</span><a href="#36476157">parent</a><span>|</span><a href="#36472697">next</a><span>|</span><label class="collapse" for="c-36476753">[-]</label><label class="expand" for="c-36476753">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s such a weird name. It&#x27;s like naming a product Google California.</div><br/></div></div></div></div><div id="36472697" class="c"><input type="checkbox" id="c-36472697" checked=""/><div class="controls bullet"><span class="by">kkajla</span><span>|</span><a href="#36472380">parent</a><span>|</span><a href="#36476157">prev</a><span>|</span><a href="#36472918">next</a><span>|</span><label class="collapse" for="c-36472697">[-]</label><label class="expand" for="c-36472697">[1 more]</label></div><br/><div class="children"><div class="content">Apologies for the confusion! Maybe an interesting idea for us to explore next :P</div><br/></div></div><div id="36472918" class="c"><input type="checkbox" id="c-36472918" checked=""/><div class="controls bullet"><span class="by">ants_everywhere</span><span>|</span><a href="#36472380">parent</a><span>|</span><a href="#36472697">prev</a><span>|</span><a href="#36472594">next</a><span>|</span><label class="collapse" for="c-36472918">[-]</label><label class="expand" for="c-36472918">[2 more]</label></div><br/><div class="children"><div class="content">I wouldn&#x27;t be surprised if it is somewhere. Just have the smart card system use Cloud IAM for access control decisions.</div><br/><div id="36476473" class="c"><input type="checkbox" id="c-36476473" checked=""/><div class="controls bullet"><span class="by">hn_go_brrrrr</span><span>|</span><a href="#36472380">root</a><span>|</span><a href="#36472918">parent</a><span>|</span><a href="#36472594">next</a><span>|</span><label class="collapse" for="c-36476473">[-]</label><label class="expand" for="c-36476473">[1 more]</label></div><br/><div class="children"><div class="content">That sounds like a nightmare. A cloud outage means no one can badge in anywhere, including at DCs?</div><br/></div></div></div></div><div id="36472594" class="c"><input type="checkbox" id="c-36472594" checked=""/><div class="controls bullet"><span class="by">alxcb</span><span>|</span><a href="#36472380">parent</a><span>|</span><a href="#36472918">prev</a><span>|</span><a href="#36472660">next</a><span>|</span><label class="collapse" for="c-36472594">[-]</label><label class="expand" for="c-36472594">[1 more]</label></div><br/><div class="children"><div class="content">hahah, exactly, tought the same.</div><br/></div></div></div></div><div id="36472660" class="c"><input type="checkbox" id="c-36472660" checked=""/><div class="controls bullet"><span class="by">seymon</span><span>|</span><a href="#36472380">prev</a><span>|</span><a href="#36472164">next</a><span>|</span><label class="collapse" for="c-36472660">[-]</label><label class="expand" for="c-36472660">[4 more]</label></div><br/><div class="children"><div class="content">One thing I find difficult using access control systems as a distributed service like Zanzibar is a convenient and performant way to search and filter resource data using permissions. For example defining database queries that should only return resources a subject has access to based on Zanzibar permissions.</div><br/><div id="36477095" class="c"><input type="checkbox" id="c-36477095" checked=""/><div class="controls bullet"><span class="by">h1fra</span><span>|</span><a href="#36472660">parent</a><span>|</span><a href="#36472848">next</a><span>|</span><label class="collapse" for="c-36477095">[-]</label><label class="expand" for="c-36477095">[1 more]</label></div><br/><div class="children"><div class="content">Same reason I didn&#x27;t invest much in this field yet.<p>When you access one resource it&#x27;s fine to a do a roundtrip, but with listing, filtering, searching if you don&#x27;t join at query time it doesn&#x27;t work. I&#x27;m not entirely sure how they achieve it and I found it annoying that it&#x27;s never mentioned because it&#x27;s very common.</div><br/></div></div><div id="36472848" class="c"><input type="checkbox" id="c-36472848" checked=""/><div class="controls bullet"><span class="by">kkajla</span><span>|</span><a href="#36472660">parent</a><span>|</span><a href="#36477095">prev</a><span>|</span><a href="#36473348">next</a><span>|</span><label class="collapse" for="c-36472848">[-]</label><label class="expand" for="c-36472848">[1 more]</label></div><br/><div class="children"><div class="content">At Google, I believe some client applications build and maintain &quot;permission-aware&quot; search indexes based on the permissions in Zanzibar. In essence, Zanzibar can be queried to figure out the object ids a particular subject has access to. These object ids can  then be hydrated via a database query or separate service call.<p>At Warrant, we&#x27;re experimenting with allowing customers to maintain searchable metadata in Warrant and exposing a &quot;query&quot; API[1] that can automatically hydrate objects based on that metadata.<p>[1] <a href="https:&#x2F;&#x2F;docs.warrant.dev&#x2F;warrants&#x2F;query-warrants&#x2F;">https:&#x2F;&#x2F;docs.warrant.dev&#x2F;warrants&#x2F;query-warrants&#x2F;</a></div><br/></div></div><div id="36473348" class="c"><input type="checkbox" id="c-36473348" checked=""/><div class="controls bullet"><span class="by">rektide</span><span>|</span><a href="#36472660">parent</a><span>|</span><a href="#36472848">prev</a><span>|</span><a href="#36472164">next</a><span>|</span><label class="collapse" for="c-36473348">[-]</label><label class="expand" for="c-36473348">[1 more]</label></div><br/><div class="children"><div class="content">SpiceDB&#x2F;Authzed has &quot;Lookup&quot;s. There&#x27;s LookupResources for finding what a user has access to, and LookupSubjects now too to see who has access to a resource. Great capability. <a href="https:&#x2F;&#x2F;authzed.com&#x2F;blog&#x2F;lookup-subjects">https:&#x2F;&#x2F;authzed.com&#x2F;blog&#x2F;lookup-subjects</a></div><br/></div></div></div></div><div id="36472164" class="c"><input type="checkbox" id="c-36472164" checked=""/><div class="controls bullet"><span class="by">scarmig</span><span>|</span><a href="#36472660">prev</a><span>|</span><a href="#36473848">next</a><span>|</span><label class="collapse" for="c-36472164">[-]</label><label class="expand" for="c-36472164">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s exciting to see so much action in this space.<p>How would you compare Warrant to other Zanzibar (ZaaS?) offerings? Particularly Ory and Authzed&#x2F;SpiceDb.</div><br/></div></div><div id="36473848" class="c"><input type="checkbox" id="c-36473848" checked=""/><div class="controls bullet"><span class="by">AceJohnny2</span><span>|</span><a href="#36472164">prev</a><span>|</span><a href="#36472264">next</a><span>|</span><label class="collapse" for="c-36473848">[-]</label><label class="expand" for="c-36473848">[1 more]</label></div><br/><div class="children"><div class="content">Plugging another company that&#x27;s been implementing Google-Zanzibar-like auth tech: <a href="https:&#x2F;&#x2F;authzed.com&#x2F;">https:&#x2F;&#x2F;authzed.com&#x2F;</a><p>They&#x27;ve posted a number of interesting articles on the topic here, such as this one listing competing implementations (but 2y old): <a href="https:&#x2F;&#x2F;authzed.com&#x2F;blog&#x2F;zanzibar-implementations">https:&#x2F;&#x2F;authzed.com&#x2F;blog&#x2F;zanzibar-implementations</a></div><br/></div></div><div id="36472264" class="c"><input type="checkbox" id="c-36472264" checked=""/><div class="controls bullet"><span class="by">gneray</span><span>|</span><a href="#36473848">prev</a><span>|</span><a href="#36471730">next</a><span>|</span><label class="collapse" for="c-36472264">[-]</label><label class="expand" for="c-36472264">[1 more]</label></div><br/><div class="children"><div class="content">Is anyone here using Warrant or other Zanzibar-like services?<p>If so, how did you evaluate them relative to each other and&#x2F;or building yourselves?</div><br/></div></div><div id="36471730" class="c"><input type="checkbox" id="c-36471730" checked=""/><div class="controls bullet"><span class="by">sails</span><span>|</span><a href="#36472264">prev</a><span>|</span><a href="#36471393">next</a><span>|</span><label class="collapse" for="c-36471730">[-]</label><label class="expand" for="c-36471730">[3 more]</label></div><br/><div class="children"><div class="content">&gt; A Flexible, Uniform Data Model for Authorization<p>Are there good examples of similar applications of data modules for similarly niche use cases? I get that there are obviously endless data models, but this seems to extend beyond that into a more integrated concept and I don’t quite know why that seems to be the case.</div><br/><div id="36472066" class="c"><input type="checkbox" id="c-36472066" checked=""/><div class="controls bullet"><span class="by">kkajla</span><span>|</span><a href="#36471730">parent</a><span>|</span><a href="#36471393">next</a><span>|</span><label class="collapse" for="c-36472066">[-]</label><label class="expand" for="c-36472066">[2 more]</label></div><br/><div class="children"><div class="content">I think GraphQL might be a good example. Some might not consider it to be very niche, but its intention is to consolidate dependent API queries such that the client can fetch all the data it needs in a single request. In both Zanzibar and GraphQL, the idea behind the schema&#x2F;modeling language is to provide a layer where logic specific to relationships between data (in the case of GraphQL) or logic specific to authorization (in the case of Zanzibar) can be specified such that neither the server nor the client need to worry about it and can instead query for data in a simpler way.</div><br/><div id="36476991" class="c"><input type="checkbox" id="c-36476991" checked=""/><div class="controls bullet"><span class="by">sails</span><span>|</span><a href="#36471730">root</a><span>|</span><a href="#36472066">parent</a><span>|</span><a href="#36471393">next</a><span>|</span><label class="collapse" for="c-36476991">[-]</label><label class="expand" for="c-36476991">[1 more]</label></div><br/><div class="children"><div class="content">Thanks, I suppose GraphQL is a valid example, I was thinking niche in terms of application eg Zanzibar is auth only, and you would struggle to use it for much else</div><br/></div></div></div></div></div></div><div id="36471393" class="c"><input type="checkbox" id="c-36471393" checked=""/><div class="controls bullet"><span class="by">fiddlerwoaroof</span><span>|</span><a href="#36471730">prev</a><span>|</span><a href="#36473096">next</a><span>|</span><label class="collapse" for="c-36471393">[-]</label><label class="expand" for="c-36471393">[5 more]</label></div><br/><div class="children"><div class="content">How does Zanzibar relate to capability-based schemes?</div><br/><div id="36471787" class="c"><input type="checkbox" id="c-36471787" checked=""/><div class="controls bullet"><span class="by">kkajla</span><span>|</span><a href="#36471393">parent</a><span>|</span><a href="#36471587">next</a><span>|</span><label class="collapse" for="c-36471787">[-]</label><label class="expand" for="c-36471787">[1 more]</label></div><br/><div class="children"><div class="content">Another interesting feature of capability-based systems (that is outside Zanzibar&#x27;s scope) is that capabilities can themselves be used to gain access to an object. This is because they are unforgeable tokens, meaning they essentially have authentication baked into them. Zanzibar leaves the authentication piece to an external service and focuses on providing the ability to define, store, and query access rights for subjects.</div><br/></div></div><div id="36471587" class="c"><input type="checkbox" id="c-36471587" checked=""/><div class="controls bullet"><span class="by">kkajla</span><span>|</span><a href="#36471393">parent</a><span>|</span><a href="#36471787">prev</a><span>|</span><a href="#36471556">next</a><span>|</span><label class="collapse" for="c-36471587">[-]</label><label class="expand" for="c-36471587">[2 more]</label></div><br/><div class="children"><div class="content">As I understand it, &quot;capabilities&quot; in capability-based schemes uniquely reference an object and specify a list of access rights on that object. This seems fairly similar to tuples in Zanzibar, which reference a unique object, an access right, and a unique subject whom the access right belongs to. You can think of Zanzibar as a layer used for defining, storing, and querying for capabilities.</div><br/><div id="36472536" class="c"><input type="checkbox" id="c-36472536" checked=""/><div class="controls bullet"><span class="by">hamburglar</span><span>|</span><a href="#36471393">root</a><span>|</span><a href="#36471587">parent</a><span>|</span><a href="#36471556">next</a><span>|</span><label class="collapse" for="c-36472536">[-]</label><label class="expand" for="c-36472536">[1 more]</label></div><br/><div class="children"><div class="content">Yeah, I believe capability&#x2F;verb simply maps directly to relation in Zanzibar speak.   “Can edit” vs “is an editor”.  I’m more accustomed to the verb style, so whenever I read about authz systems that use relations or roles, I’m constantly mapping the concepts in my head to try to find examples where they <i>aren&#x27;t</i> 1:1 and have yet to think of any.</div><br/></div></div></div></div><div id="36471556" class="c"><input type="checkbox" id="c-36471556" checked=""/><div class="controls bullet"><span class="by">leetrout</span><span>|</span><a href="#36471393">parent</a><span>|</span><a href="#36471587">prev</a><span>|</span><a href="#36473096">next</a><span>|</span><label class="collapse" for="c-36471556">[-]</label><label class="expand" for="c-36471556">[1 more]</label></div><br/><div class="children"><div class="content">Have you seen authzed&#x27;s caveats?<p><a href="https:&#x2F;&#x2F;authzed.com&#x2F;blog&#x2F;caveats">https:&#x2F;&#x2F;authzed.com&#x2F;blog&#x2F;caveats</a></div><br/></div></div></div></div><div id="36473096" class="c"><input type="checkbox" id="c-36473096" checked=""/><div class="controls bullet"><span class="by">deanCommie</span><span>|</span><a href="#36471393">prev</a><span>|</span><a href="#36473634">next</a><span>|</span><label class="collapse" for="c-36473096">[-]</label><label class="expand" for="c-36473096">[5 more]</label></div><br/><div class="children"><div class="content">Can anyone who&#x27;s taken a close look at both Zanzibar and Amazon&#x27;s IAM compare and contrast them?</div><br/><div id="36474085" class="c"><input type="checkbox" id="c-36474085" checked=""/><div class="controls bullet"><span class="by">TheNewsIsHere</span><span>|</span><a href="#36473096">parent</a><span>|</span><a href="#36473634">next</a><span>|</span><label class="collapse" for="c-36474085">[-]</label><label class="expand" for="c-36474085">[4 more]</label></div><br/><div class="children"><div class="content">These services aren’t really going after the same problems.<p>Zanzibar is a Google-internal implementation of the concepts outlined in this paper, focused on managing authorization as a function of relationships between objects.<p>AWS IAM is primarily for AAA services with AWS, though you can use it with AWS Identity Center to provide SSO to other systems via IAM.</div><br/><div id="36475616" class="c"><input type="checkbox" id="c-36475616" checked=""/><div class="controls bullet"><span class="by">deanCommie</span><span>|</span><a href="#36473096">root</a><span>|</span><a href="#36474085">parent</a><span>|</span><a href="#36473634">next</a><span>|</span><label class="collapse" for="c-36475616">[-]</label><label class="expand" for="c-36475616">[3 more]</label></div><br/><div class="children"><div class="content">Oh I assumed Zanzibar would have also been the model for GCP&#x27;s public IAM?</div><br/><div id="36476232" class="c"><input type="checkbox" id="c-36476232" checked=""/><div class="controls bullet"><span class="by">TheNewsIsHere</span><span>|</span><a href="#36473096">root</a><span>|</span><a href="#36475616">parent</a><span>|</span><a href="#36473634">next</a><span>|</span><label class="collapse" for="c-36476232">[-]</label><label class="expand" for="c-36476232">[2 more]</label></div><br/><div class="children"><div class="content">I don’t know one way or the other. OP claimed elsewhere in this threat that Zanzibar is used to manage authorization records for services like Google Drive and YouTube.<p>But as far as Zanzibar itself, it’s not something Google makes available externally.<p>Having played in all the major (and common) sandboxes (so not like, Oracle), the GCP, Azure, and AWS permission systems are all fairly similar. They each have their foibles but their conceptual designs are all fairly similar. But that’s not a criticism: anyone designing that kind of IAM service really isn’t going to end up with something that different given the goals involved.</div><br/><div id="36477372" class="c"><input type="checkbox" id="c-36477372" checked=""/><div class="controls bullet"><span class="by">torgard</span><span>|</span><a href="#36473096">root</a><span>|</span><a href="#36476232">parent</a><span>|</span><a href="#36473634">next</a><span>|</span><label class="collapse" for="c-36477372">[-]</label><label class="expand" for="c-36477372">[1 more]</label></div><br/><div class="children"><div class="content">Zanzibar is their internal system, and they&#x27;ve released a paper describing it.<p><a href="https:&#x2F;&#x2F;storage.googleapis.com&#x2F;pub-tools-public-publication-data&#x2F;pdf&#x2F;10683a8987dbf0c6d4edcafb9b4f05cc9de5974a.pdf" rel="nofollow noreferrer">https:&#x2F;&#x2F;storage.googleapis.com&#x2F;pub-tools-public-publication-...</a></div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>