<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1708938059326" as="style"/><link rel="stylesheet" href="styles.css?v=1708938059326"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://altair-viz.github.io/index.html">Vega-Altair: Declarative Visualization in Python</a> <span class="domain">(<a href="https://altair-viz.github.io">altair-viz.github.io</a>)</span></div><div class="subtext"><span>tosh</span> | <span>24 comments</span></div><br/><div><div id="39508661" class="c"><input type="checkbox" id="c-39508661" checked=""/><div class="controls bullet"><span class="by">k1next</span><span>|</span><a href="#39505208">next</a><span>|</span><label class="collapse" for="c-39508661">[-]</label><label class="expand" for="c-39508661">[1 more]</label></div><br/><div class="children"><div class="content">I work as a data scientist (like many others in this thread) and Altair is a great tool for exploring the data. I really like the grammar of graphics approach and the ability to do things like cross-filter and the general ease of enabling interactivity are great! Amazing work by everyone on the Altair&#x2F;Vega team.<p>There are some drawbacks though that have been holding some of my colleagues back from switching from e.g. Seaborn to Altair:<p>- No zoom by selecting the x- or y-range. Almost all other libraries implement box-zoom, Altair does not have this. This is probably the biggest complaint I have heard so far.<p>- Annotating data inside the plot is difficult. I don&#x27;t mean `mark_text`, I mean placing an annotation that you would do in Matplotlib via `ax.text(...)`.<p>- Along side that: No TeX support.<p>- It does become slow once there is a large number of points in the chart (and you don&#x27;t want to aggregate).<p>- Missing mapping features. I know you can have maps in the background of your plot, but I&#x27;m talking OSM like mapping.<p>- Working with layered + faceted charts takes some time to get used to.<p>- It used to be that if you had a dataframe with 100 columns and you were only plotting two of them, still all 100 columns would be saved to html. I think this is addressed in VegaFusion?<p>Still, I want to just emphasize how much I love Altair. To understand relations in your data, it&#x27;s amazing to just assign color to a column, shape to another column and so on. Really neat! With a background in mathematics, it was also helping me to think about the whole tidy approach to dataframes, so that was an added benefit!</div><br/></div></div><div id="39505208" class="c"><input type="checkbox" id="c-39505208" checked=""/><div class="controls bullet"><span class="by">ryan-duve</span><span>|</span><a href="#39508661">prev</a><span>|</span><a href="#39505593">next</a><span>|</span><label class="collapse" for="c-39505208">[-]</label><label class="expand" for="c-39505208">[2 more]</label></div><br/><div class="children"><div class="content">Working as a data scientist, I have exclusively used Altair since I joined my company in 2021.  Every one of my coworkers uses Matplotlib.  Two people said something like &quot;Oh, you&#x27;re using that library that&#x27;s supposed to be better and probably is, but I just don&#x27;t want to relearn everything for plotting&quot; but nobody else has even shown interest, let alone taken the plunge.<p>If you need to learn a plotting library and you already work in Pandas, I recommend choosing Altair to learn.  It&#x27;s a natural extension to pd.DataFrame and the only magical incantation to learn is<p><pre><code>    alt.Chart(df).mark_&lt;plot_type&gt;.encode(x=df[&quot;col&quot;], y=df[&quot;other_col&quot;])
</code></pre>
I find this significantly easier to work with than Matplotlib, where the same things can be done in several ways with subplots, plt.figure(), df.plot(), and maybe others?<p>My only complaint with the library is that outputting to an image file feels weirdly complicated.  I often resort to making HTML files and taking a screenshot if I don&#x27;t want to take the time to look up all the steps equivalent to `.savefig(&quot;file.png&quot;)`.</div><br/><div id="39508329" class="c"><input type="checkbox" id="c-39508329" checked=""/><div class="controls bullet"><span class="by">RobinL</span><span>|</span><a href="#39505208">parent</a><span>|</span><a href="#39505593">next</a><span>|</span><label class="collapse" for="c-39508329">[-]</label><label class="expand" for="c-39508329">[1 more]</label></div><br/><div class="children"><div class="content">To save to an image in Altair, it&#x27;s just chart.save(&quot;myimage.png&quot;).  This works much better since version 5 (the syntax is the same but the dependencies are less fiddly)</div><br/></div></div></div></div><div id="39505593" class="c"><input type="checkbox" id="c-39505593" checked=""/><div class="controls bullet"><span class="by">Case_of_Mondays</span><span>|</span><a href="#39505208">prev</a><span>|</span><a href="#39507850">next</a><span>|</span><label class="collapse" for="c-39505593">[-]</label><label class="expand" for="c-39505593">[1 more]</label></div><br/><div class="children"><div class="content">Altair is so important for data science as a product.<p>Every data scientist endeavors to make an impact with their analysis, and ultimately that is typically tied to some kind of visualization. There needs to be a way to a) build the visualization you want and b) get it out there to people who would find it useful.<p>Just plotting in matplotlib means that you must either export as a PNG (ew) or provide the analysis itself to users&#x2F;decision makers. PNGs are terrible because you completely lose interactivity. Providing the analysis means figuring out deployment of your python environment, which is possible but just causes another step between analysis and decision made on the analysis.<p>Altair and the vega-lite grammar of visualizations provides an <i>interoperable</i> and data centric way to build visualizations. It is extremely flexible when building visualizations and I find it very intuitive when it comes to complex plots. They can also be easily embedded into any webpage after being exported using the vega-lite spec, just include the vega-lite script in the html page. Can even be used with in dashboarding tools like Spotfire (I assume also with things like PowerBI although I haven&#x27;t done it).<p>Imo no real reason to use matplotlib as a data scientist lest you seriously limit the future impact of your work</div><br/></div></div><div id="39507850" class="c"><input type="checkbox" id="c-39507850" checked=""/><div class="controls bullet"><span class="by">ddanieltan</span><span>|</span><a href="#39505593">prev</a><span>|</span><a href="#39503916">next</a><span>|</span><label class="collapse" for="c-39507850">[-]</label><label class="expand" for="c-39507850">[1 more]</label></div><br/><div class="children"><div class="content">Like many, I was a big fan of ggplot2 from R, so coming into Python, I&#x27;ve always been searching for an equivalent graphical library. I used to be put off by Altair&#x27;s famous<p><pre><code>    MaxRowsError: The number of rows in your dataset is greater than the maximum allowed (5000).
</code></pre>
but ever since the Vegafusion companion library came unto the scene, I&#x27;m back using Altair.<p>Overall, it&#x27;s my preferred Python viz library although I do wish there was a better way for the Python library to better use introspection. After all, rather than<p><pre><code>   alt.Chart(df).mark_line.encode(x=&quot;abc:Q&quot;)
</code></pre>
to provide the information that abc is a quantitative variable, I&#x27;d much rather the library be able to introspect the df object, column abc to derive the data type and make the inference the column is quantitative.<p>That said, I&#x27;m already used to the extra syntax so still feel confident in using this library daily.<p>[1] <a href="https:&#x2F;&#x2F;vegafusion.io&#x2F;index.html" rel="nofollow">https:&#x2F;&#x2F;vegafusion.io&#x2F;index.html</a></div><br/></div></div><div id="39503916" class="c"><input type="checkbox" id="c-39503916" checked=""/><div class="controls bullet"><span class="by">tomrod</span><span>|</span><a href="#39507850">prev</a><span>|</span><a href="#39507049">next</a><span>|</span><label class="collapse" for="c-39503916">[-]</label><label class="expand" for="c-39503916">[1 more]</label></div><br/><div class="children"><div class="content">&gt; empowers you to spend less time writing code and more time exploring your data<p>Sidenote: I like Altair and think it&#x27;s a good development, despite rendering being performed client side.<p>This said, the claim here is tiring when it&#x27;s used everywhere. Having spent significant time with Altair, I&#x27;d argue it might have tighter code but the documentation can be obscure. I haven&#x27;t found it to make things <i>easier</i> from a developer perspective, but rather it does solve the use case that you are working in Python and need to have the client render a figure without callbacks (things like raw html dumps and similar).</div><br/></div></div><div id="39507049" class="c"><input type="checkbox" id="c-39507049" checked=""/><div class="controls bullet"><span class="by">lmeyerov</span><span>|</span><a href="#39503916">prev</a><span>|</span><a href="#39506027">next</a><span>|</span><label class="collapse" for="c-39507049">[-]</label><label class="expand" for="c-39507049">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve found altair&#x2F;vega to not &#x27;feel&#x27; declarative as whenever I sit down and try to pass in a json config for basic scenarios... something always gets in the way. GG is composable, so this should work in theory, so I&#x27;ve been curious - it feels close.<p>We have been enjoying Perspective as a more declarative &amp; high-performance flow. Altair&#x2F;Vega is beautiful though so it was a bummer when we dropped it for a recent project.</div><br/><div id="39507122" class="c"><input type="checkbox" id="c-39507122" checked=""/><div class="controls bullet"><span class="by">prasoonds</span><span>|</span><a href="#39507049">parent</a><span>|</span><a href="#39506027">next</a><span>|</span><label class="collapse" for="c-39507122">[-]</label><label class="expand" for="c-39507122">[3 more]</label></div><br/><div class="children"><div class="content">If I may ask, what&#x27;s Perspective - couldn&#x27;t find anything on a first google search.</div><br/><div id="39507326" class="c"><input type="checkbox" id="c-39507326" checked=""/><div class="controls bullet"><span class="by">22c</span><span>|</span><a href="#39507049">root</a><span>|</span><a href="#39507122">parent</a><span>|</span><a href="#39506027">next</a><span>|</span><label class="collapse" for="c-39507326">[-]</label><label class="expand" for="c-39507326">[2 more]</label></div><br/><div class="children"><div class="content">Most likely <a href="https:&#x2F;&#x2F;github.com&#x2F;finos&#x2F;perspective">https:&#x2F;&#x2F;github.com&#x2F;finos&#x2F;perspective</a></div><br/><div id="39508332" class="c"><input type="checkbox" id="c-39508332" checked=""/><div class="controls bullet"><span class="by">lmeyerov</span><span>|</span><a href="#39507049">root</a><span>|</span><a href="#39507326">parent</a><span>|</span><a href="#39506027">next</a><span>|</span><label class="collapse" for="c-39508332">[-]</label><label class="expand" for="c-39508332">[1 more]</label></div><br/><div class="children"><div class="content">yep!</div><br/></div></div></div></div></div></div></div></div><div id="39506027" class="c"><input type="checkbox" id="c-39506027" checked=""/><div class="controls bullet"><span class="by">TheAlchemist</span><span>|</span><a href="#39507049">prev</a><span>|</span><a href="#39507434">next</a><span>|</span><label class="collapse" for="c-39506027">[-]</label><label class="expand" for="c-39506027">[2 more]</label></div><br/><div class="children"><div class="content">Altair is great.<p>I&#x27;m using Plotly more lately, for 2 reasons - chart have very good interactivity by default and I&#x27;m also a Dash user - so it comes in naturally.<p>But I believe Altair is excellent for exploration - simple charts are very simple to create, and it&#x27;s not complicated to create a complex exploration dashboard - with all charts linked between them - so you can select a subset of data on one chart, and it automatically updates the others. Highly recommend at least exploring it !</div><br/><div id="39508430" class="c"><input type="checkbox" id="c-39508430" checked=""/><div class="controls bullet"><span class="by">pid-1</span><span>|</span><a href="#39506027">parent</a><span>|</span><a href="#39507434">next</a><span>|</span><label class="collapse" for="c-39508430">[-]</label><label class="expand" for="c-39508430">[1 more]</label></div><br/><div class="children"><div class="content">Also Plotly generates Javascript so it has wrappers for many python frameworks such as Streamlit.<p>I&#x27;m also using it in a regular React app and it has quite decent APIs.</div><br/></div></div></div></div><div id="39507434" class="c"><input type="checkbox" id="c-39507434" checked=""/><div class="controls bullet"><span class="by">yeknoda</span><span>|</span><a href="#39506027">prev</a><span>|</span><a href="#39505632">next</a><span>|</span><label class="collapse" for="c-39507434">[-]</label><label class="expand" for="c-39507434">[1 more]</label></div><br/><div class="children"><div class="content">The main contributor&#x2F;creator Vanderplas (<a href="http:&#x2F;&#x2F;vanderplas.com" rel="nofollow">http:&#x2F;&#x2F;vanderplas.com</a>) is an insanely productive python&#x2F;astronomy wizard. BIG Direct and indirect contribution to humanity. Thank you.</div><br/></div></div><div id="39505632" class="c"><input type="checkbox" id="c-39505632" checked=""/><div class="controls bullet"><span class="by">wslh</span><span>|</span><a href="#39507434">prev</a><span>|</span><a href="#39504669">next</a><span>|</span><label class="collapse" for="c-39505632">[-]</label><label class="expand" for="c-39505632">[2 more]</label></div><br/><div class="children"><div class="content">Sidenote: Has Vega* a specific reference to the &quot;Grammar of Graphics&quot; 2005 book [1]? I used that book in research and remember praying for a real implementation. Looking into SO and an answer appeared in 2014 [2].<p>[1] <a href="https:&#x2F;&#x2F;link.springer.com&#x2F;book&#x2F;10.1007&#x2F;0-387-28695-0" rel="nofollow">https:&#x2F;&#x2F;link.springer.com&#x2F;book&#x2F;10.1007&#x2F;0-387-28695-0</a><p>[2] <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;4892368&#x2F;implementations-of-the-grammar-of-graphics-in-statistical-packages" rel="nofollow">https:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;4892368&#x2F;implementations-...</a></div><br/><div id="39506334" class="c"><input type="checkbox" id="c-39506334" checked=""/><div class="controls bullet"><span class="by">domoritz</span><span>|</span><a href="#39505632">parent</a><span>|</span><a href="#39504669">next</a><span>|</span><label class="collapse" for="c-39506334">[-]</label><label class="expand" for="c-39506334">[1 more]</label></div><br/><div class="children"><div class="content">In <a href="https:&#x2F;&#x2F;github.com&#x2F;vega&#x2F;vega-lite&#x2F;issues&#x2F;408#issuecomment-500218456">https:&#x2F;&#x2F;github.com&#x2F;vega&#x2F;vega-lite&#x2F;issues&#x2F;408#issuecomment-50...</a> Leland Wilkinson himself said “having gone through a lot of these GG-inspired systems, I believe yours is the most authentic implementation. I&#x27;m using it every day. Thanks for all the great work you&#x27;ve done.”</div><br/></div></div></div></div><div id="39504669" class="c"><input type="checkbox" id="c-39504669" checked=""/><div class="controls bullet"><span class="by">hk__2</span><span>|</span><a href="#39505632">prev</a><span>|</span><a href="#39505166">next</a><span>|</span><label class="collapse" for="c-39504669">[-]</label><label class="expand" for="c-39504669">[4 more]</label></div><br/><div class="children"><div class="content">Are there non-declarative chart visualization libraries? I’ve always used matplotlib.pyplot [1] and while it doesn’t market itself as &quot;declarative&quot;, I don’t see much difference:<p><pre><code>     # Vega-Altair
     alt.Chart(source).mark_line().encode(
       x=&#x27;x&#x27;,
       y=&#x27;f(x)&#x27;
     )

     # Pyplot
     plt.plot(source)
     plt.xlabel(&#x27;x&#x27;)
     plt.ylabel(&#x27;f(x)&#x27;)
</code></pre>
[1]: <a href="https:&#x2F;&#x2F;matplotlib.org&#x2F;stable&#x2F;tutorials&#x2F;pyplot.html" rel="nofollow">https:&#x2F;&#x2F;matplotlib.org&#x2F;stable&#x2F;tutorials&#x2F;pyplot.html</a></div><br/><div id="39505745" class="c"><input type="checkbox" id="c-39505745" checked=""/><div class="controls bullet"><span class="by">epgui</span><span>|</span><a href="#39504669">parent</a><span>|</span><a href="#39505406">next</a><span>|</span><label class="collapse" for="c-39505745">[-]</label><label class="expand" for="c-39505745">[1 more]</label></div><br/><div class="children"><div class="content">I don’t know what you think declarative means, but the example you’re showing is as non-declarative as it could be for such a simple thing.</div><br/></div></div><div id="39505406" class="c"><input type="checkbox" id="c-39505406" checked=""/><div class="controls bullet"><span class="by">lcvriend</span><span>|</span><a href="#39504669">parent</a><span>|</span><a href="#39505745">prev</a><span>|</span><a href="#39505166">next</a><span>|</span><label class="collapse" for="c-39505406">[-]</label><label class="expand" for="c-39505406">[2 more]</label></div><br/><div class="children"><div class="content">If we <i>only</i> look at the simplest example then I would agree that there is not much difference. But more complicated plots will require you to write code in a more verbose and imperative fashion when using matplotlib.<p>Take a faceted plot like this scatter matrix [1] and try to plot it in matplotlib. You would need to set up the grid using subplots, then define the combinations you want and finally write logic to fill each subplot. The vega&#x2F;altair code is much more declarative. You just tell it what needs to be in the rows&#x2F;columns and vega&#x2F;altair takes care of the rest.<p>[1]: <a href="https:&#x2F;&#x2F;altair-viz.github.io&#x2F;gallery&#x2F;scatter_matrix.html" rel="nofollow">https:&#x2F;&#x2F;altair-viz.github.io&#x2F;gallery&#x2F;scatter_matrix.html</a></div><br/><div id="39508445" class="c"><input type="checkbox" id="c-39508445" checked=""/><div class="controls bullet"><span class="by">theodpHN</span><span>|</span><a href="#39504669">root</a><span>|</span><a href="#39505406">parent</a><span>|</span><a href="#39505166">next</a><span>|</span><label class="collapse" for="c-39508445">[-]</label><label class="expand" for="c-39508445">[1 more]</label></div><br/><div class="children"><div class="content">Mirror, mirror on the wall, what’s the most declarative dataviz programming language of all? :-)<p><pre><code>  *** SAS SCATTER MATRIX EXAMPLE ***
  proc sgscatter data=sashelp.cars;
  matrix Horsepower Acceleration Miles_per_Gallon &#x2F; group=Origin;

  *** ALTAIR SCATTER MARIX EXAMPLE ***
  import altair as alt
  from vega_datasets import data

  source = data.cars()

  alt.Chart(source).mark_circle().encode(
    alt.X(alt.repeat(&quot;column&quot;), type=&#x27;quantitative&#x27;),
    alt.Y(alt.repeat(&quot;row&quot;), type=&#x27;quantitative&#x27;),
    color=&#x27;Origin:N&#x27;
  ).properties(
    width=150,
    height=150
  ).repeat(
    row=[&#x27;Horsepower&#x27;, &#x27;Acceleration&#x27;, &#x27;Miles_per_Gallon&#x27;],
    column=[&#x27;Miles_per_Gallon&#x27;, &#x27;Acceleration&#x27;, &#x27;Horsepower&#x27;]
  ).interactive()</code></pre></div><br/></div></div></div></div></div></div><div id="39505166" class="c"><input type="checkbox" id="c-39505166" checked=""/><div class="controls bullet"><span class="by">datadeft</span><span>|</span><a href="#39504669">prev</a><span>|</span><label class="collapse" for="c-39505166">[-]</label><label class="expand" for="c-39505166">[4 more]</label></div><br/><div class="children"><div class="content">Is there a plotting library that uses webgl? I am only aware of Plotly that uses webgl for some of the graphs.</div><br/><div id="39508639" class="c"><input type="checkbox" id="c-39508639" checked=""/><div class="controls bullet"><span class="by">theodpHN</span><span>|</span><a href="#39505166">parent</a><span>|</span><a href="#39506349">next</a><span>|</span><label class="collapse" for="c-39508639">[-]</label><label class="expand" for="c-39508639">[1 more]</label></div><br/><div class="children"><div class="content">Check out:<p><pre><code>  DeckGL
  https:&#x2F;&#x2F;panel.holoviz.org&#x2F;reference&#x2F;panes&#x2F;DeckGL.html

  ipysigma
  https:&#x2F;&#x2F;github.com&#x2F;medialab&#x2F;ipysigma</code></pre></div><br/></div></div><div id="39506349" class="c"><input type="checkbox" id="c-39506349" checked=""/><div class="controls bullet"><span class="by">domoritz</span><span>|</span><a href="#39505166">parent</a><span>|</span><a href="#39508639">prev</a><span>|</span><label class="collapse" for="c-39506349">[-]</label><label class="expand" for="c-39506349">[2 more]</label></div><br/><div class="children"><div class="content">We are working on GPU accelerated rendering for Vega and Altair.</div><br/><div id="39508243" class="c"><input type="checkbox" id="c-39508243" checked=""/><div class="controls bullet"><span class="by">kylebarron</span><span>|</span><a href="#39505166">root</a><span>|</span><a href="#39506349">parent</a><span>|</span><label class="collapse" for="c-39508243">[-]</label><label class="expand" for="c-39508243">[1 more]</label></div><br/><div class="children"><div class="content">Is this open? Is there a way to read more about it? Issues&#x2F;pull requests?</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>