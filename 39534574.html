<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1709283672982" as="style"/><link rel="stylesheet" href="styles.css?v=1709283672982"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.frost.kiwi/WebGL-LUTS-made-simple/">How video games use lookup tables</a> <span class="domain">(<a href="https://blog.frost.kiwi">blog.frost.kiwi</a>)</span></div><div class="subtext"><span>todsacerdoti</span> | <span>105 comments</span></div><br/><div><div id="39548169" class="c"><input type="checkbox" id="c-39548169" checked=""/><div class="controls bullet"><span class="by">zeta0134</span><span>|</span><a href="#39546447">next</a><span>|</span><label class="collapse" for="c-39548169">[-]</label><label class="expand" for="c-39548169">[9 more]</label></div><br/><div class="children"><div class="content">Lookup tables are the only reason I was able to get this effect working at all:<p><a href="https:&#x2F;&#x2F;twitter.com&#x2F;zeta0134&#x2F;status&#x2F;1756988843851383181" rel="nofollow">https:&#x2F;&#x2F;twitter.com&#x2F;zeta0134&#x2F;status&#x2F;1756988843851383181</a><p>The clever bit is that it&#x27;s two lookup tables here: the big one stores the lighting details for a circle with a configurable radius around the player (that&#x27;s one full lookup table per radius), but the second one is a pseudo-random ordering for the background rows. I only have time to actually update 1&#x2F;20th of the screen each time the torchlight routine is called, but by randomizing the order a little bit, I can give it a sortof &quot;soft edge&quot; and hide the raster scan that you&#x27;d otherwise see. I use a table because the random order is a grab bag (to ensure rows aren&#x27;t starved of updates) and that bit is too slow to calculate in realtime.</div><br/><div id="39554789" class="c"><input type="checkbox" id="c-39554789" checked=""/><div class="controls bullet"><span class="by">trealira</span><span>|</span><a href="#39548169">parent</a><span>|</span><a href="#39549960">next</a><span>|</span><label class="collapse" for="c-39554789">[-]</label><label class="expand" for="c-39554789">[1 more]</label></div><br/><div class="children"><div class="content">That looks like a pretty cool game! Were you inspired by Crypt of the Necrodancer? That&#x27;s one of my favorite games. I was thinking about whether an NES (or another older console) would have been able to handle a game with those mechanics if they had been invented back then (and if so, to what extent), and it looks like you&#x27;re proving it possible.</div><br/></div></div><div id="39549960" class="c"><input type="checkbox" id="c-39549960" checked=""/><div class="controls bullet"><span class="by">ecshafer</span><span>|</span><a href="#39548169">parent</a><span>|</span><a href="#39554789">prev</a><span>|</span><a href="#39555630">next</a><span>|</span><label class="collapse" for="c-39549960">[-]</label><label class="expand" for="c-39549960">[2 more]</label></div><br/><div class="children"><div class="content">That looks pretty awesome, and the graphics are way better than any NES game I can remember, it looks more like an SNES level graphics. Since you are running on an emulator there, does the emulator lock you to NES level performance?</div><br/><div id="39550787" class="c"><input type="checkbox" id="c-39550787" checked=""/><div class="controls bullet"><span class="by">zeta0134</span><span>|</span><a href="#39548169">root</a><span>|</span><a href="#39549960">parent</a><span>|</span><a href="#39555630">next</a><span>|</span><label class="collapse" for="c-39550787">[-]</label><label class="expand" for="c-39550787">[1 more]</label></div><br/><div class="children"><div class="content">Yes, though full disclaimer, the cartridge is a tiny bit more powerful than your average NES game, and that is definitely contributing. The capabilities of the cartridge I&#x27;m using are something like Nintendo&#x27;s MMC5 (used for Castlevania 3) but with a slightly more useful ExRAM implementation. The main benefit for this effect is that I can write to the nametable outside of vblank, and that helps with the double-buffer setup. The NES CPU isn&#x27;t fast enough to process all of the enemies at once, so I batch the changes over time, and then present the updated board when the musical beat advances.<p>This <i>should</i> run on real hardware, I&#x27;m just waiting on a dev board from my cart supplier before I&#x27;ll be able to test that properly. Mesen is what I use in the meantime. It is pretty darn accurate, and I haven&#x27;t overclocked it or cheated any of the console&#x27;s constraints away.</div><br/></div></div></div></div><div id="39555630" class="c"><input type="checkbox" id="c-39555630" checked=""/><div class="controls bullet"><span class="by">a1369209993</span><span>|</span><a href="#39548169">parent</a><span>|</span><a href="#39549960">prev</a><span>|</span><a href="#39548359">next</a><span>|</span><label class="collapse" for="c-39555630">[-]</label><label class="expand" for="c-39555630">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I use a table because the random order is a grab bag (to ensure rows aren&#x27;t starved of updates)<p>I think the search keyword for this is &quot;quasirandom&quot;, FWIW.</div><br/></div></div><div id="39548359" class="c"><input type="checkbox" id="c-39548359" checked=""/><div class="controls bullet"><span class="by">sourthyme</span><span>|</span><a href="#39548169">parent</a><span>|</span><a href="#39555630">prev</a><span>|</span><a href="#39552630">next</a><span>|</span><label class="collapse" for="c-39548359">[-]</label><label class="expand" for="c-39548359">[1 more]</label></div><br/><div class="children"><div class="content">The 1&#x2F;20 update works well because it gives the illusion of tiles popping into view naturally as the lamp moves. This is a cool effect to get away with.</div><br/></div></div><div id="39552630" class="c"><input type="checkbox" id="c-39552630" checked=""/><div class="controls bullet"><span class="by">rightbyte</span><span>|</span><a href="#39548169">parent</a><span>|</span><a href="#39548359">prev</a><span>|</span><a href="#39556141">next</a><span>|</span><label class="collapse" for="c-39552630">[-]</label><label class="expand" for="c-39552630">[1 more]</label></div><br/><div class="children"><div class="content">Heh, cool. I always find it fascinating how games for the same console could get so much prettier as people learned to code for them. E.g. Mario 1 and 3 or the two Zeldas for N64.</div><br/></div></div><div id="39556141" class="c"><input type="checkbox" id="c-39556141" checked=""/><div class="controls bullet"><span class="by">JohnBooty</span><span>|</span><a href="#39548169">parent</a><span>|</span><a href="#39552630">prev</a><span>|</span><a href="#39552252">next</a><span>|</span><label class="collapse" for="c-39556141">[-]</label><label class="expand" for="c-39556141">[1 more]</label></div><br/><div class="children"><div class="content">Wow! Impressive! At first I thought it was just pretty cool. And then I saw you&#x27;re doing it on a <i>NES</i> game. Bravo.</div><br/></div></div><div id="39552252" class="c"><input type="checkbox" id="c-39552252" checked=""/><div class="controls bullet"><span class="by">nicole_express</span><span>|</span><a href="#39548169">parent</a><span>|</span><a href="#39556141">prev</a><span>|</span><a href="#39546447">next</a><span>|</span><label class="collapse" for="c-39552252">[-]</label><label class="expand" for="c-39552252">[1 more]</label></div><br/><div class="children"><div class="content">Very nice work! Definitely looks way better than the contemporary NES attempts at doing it (thinking of MMC1 Ultima Exodus here)</div><br/></div></div></div></div><div id="39546447" class="c"><input type="checkbox" id="c-39546447" checked=""/><div class="controls bullet"><span class="by">bemmu</span><span>|</span><a href="#39548169">prev</a><span>|</span><a href="#39546194">next</a><span>|</span><label class="collapse" for="c-39546447">[-]</label><label class="expand" for="c-39546447">[13 more]</label></div><br/><div class="children"><div class="content">The first look-up table effect that really impressed me was to use them for making a textured tunnel.<p>You have a look-up table such that for each pixel on the screen, you know its angle and distance from the center of the screen. With this you can pick which texel to put at each pixel location.<p>It looks as if you are moving in a tunnel with 3D geometry, but it&#x27;s so cheap you can even do it on pico: <a href="https:&#x2F;&#x2F;www.lexaloffle.com&#x2F;bbs&#x2F;?pid=63818" rel="nofollow">https:&#x2F;&#x2F;www.lexaloffle.com&#x2F;bbs&#x2F;?pid=63818</a><p>At first I thought the game Stardust must have used this effect, but reading up on it just now they actually just play a repeating 6 frame animation for the background! <a href="https:&#x2F;&#x2F;codetapper.com&#x2F;amiga&#x2F;sprite-tricks&#x2F;stardust&#x2F;" rel="nofollow">https:&#x2F;&#x2F;codetapper.com&#x2F;amiga&#x2F;sprite-tricks&#x2F;stardust&#x2F;</a></div><br/><div id="39546568" class="c"><input type="checkbox" id="c-39546568" checked=""/><div class="controls bullet"><span class="by">taeric</span><span>|</span><a href="#39546447">parent</a><span>|</span><a href="#39547210">next</a><span>|</span><label class="collapse" for="c-39546568">[-]</label><label class="expand" for="c-39546568">[9 more]</label></div><br/><div class="children"><div class="content">If you view color palette as a lookup table, palette cycling was very common and feels very related.</div><br/><div id="39546817" class="c"><input type="checkbox" id="c-39546817" checked=""/><div class="controls bullet"><span class="by">indy</span><span>|</span><a href="#39546447">root</a><span>|</span><a href="#39546568">parent</a><span>|</span><a href="#39550971">next</a><span>|</span><label class="collapse" for="c-39546817">[-]</label><label class="expand" for="c-39546817">[5 more]</label></div><br/><div class="children"><div class="content">Mark J. Ferrari was incredible at utilising palette cycling: <a href="http:&#x2F;&#x2F;www.effectgames.com&#x2F;demos&#x2F;canvascycle&#x2F;" rel="nofollow">http:&#x2F;&#x2F;www.effectgames.com&#x2F;demos&#x2F;canvascycle&#x2F;</a></div><br/><div id="39546903" class="c"><input type="checkbox" id="c-39546903" checked=""/><div class="controls bullet"><span class="by">chongli</span><span>|</span><a href="#39546447">root</a><span>|</span><a href="#39546817">parent</a><span>|</span><a href="#39550152">next</a><span>|</span><label class="collapse" for="c-39546903">[-]</label><label class="expand" for="c-39546903">[2 more]</label></div><br/><div class="children"><div class="content">He gave one of my favourite GDC talks of all time [1]! I recommend this talk to anyone who is interested in the details and history of working on limited colour palette games!<p>[1] <a href="https:&#x2F;&#x2F;youtu.be&#x2F;aMcJ1Jvtef0" rel="nofollow">https:&#x2F;&#x2F;youtu.be&#x2F;aMcJ1Jvtef0</a></div><br/><div id="39547396" class="c"><input type="checkbox" id="c-39547396" checked=""/><div class="controls bullet"><span class="by">indy</span><span>|</span><a href="#39546447">root</a><span>|</span><a href="#39546903">parent</a><span>|</span><a href="#39550152">next</a><span>|</span><label class="collapse" for="c-39547396">[-]</label><label class="expand" for="c-39547396">[1 more]</label></div><br/><div class="children"><div class="content">Love that video, his passion for the art form really comes through.</div><br/></div></div></div></div><div id="39550152" class="c"><input type="checkbox" id="c-39550152" checked=""/><div class="controls bullet"><span class="by">Akronymus</span><span>|</span><a href="#39546447">root</a><span>|</span><a href="#39546817">parent</a><span>|</span><a href="#39546903">prev</a><span>|</span><a href="#39547825">next</a><span>|</span><label class="collapse" for="c-39550152">[-]</label><label class="expand" for="c-39550152">[1 more]</label></div><br/><div class="children"><div class="content">Makes me think about the area 5150 demo<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=fWDxdoRTZPc" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=fWDxdoRTZPc</a><p>edit: This comment really summarizes just how impressive the demo is <a href="https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;Demoscene&#x2F;comments&#x2F;wjxqve&#x2F;area_5150_ibm_pc_demo&#x2F;ijm71m0&#x2F;" rel="nofollow">https:&#x2F;&#x2F;old.reddit.com&#x2F;r&#x2F;Demoscene&#x2F;comments&#x2F;wjxqve&#x2F;area_5150...</a></div><br/></div></div><div id="39547825" class="c"><input type="checkbox" id="c-39547825" checked=""/><div class="controls bullet"><span class="by">djmips</span><span>|</span><a href="#39546447">root</a><span>|</span><a href="#39546817">parent</a><span>|</span><a href="#39550152">prev</a><span>|</span><a href="#39550971">next</a><span>|</span><label class="collapse" for="c-39547825">[-]</label><label class="expand" for="c-39547825">[1 more]</label></div><br/><div class="children"><div class="content">Writes nowadays.
<a href="https:&#x2F;&#x2F;www.markferrari.com&#x2F;writing" rel="nofollow">https:&#x2F;&#x2F;www.markferrari.com&#x2F;writing</a></div><br/></div></div></div></div><div id="39550971" class="c"><input type="checkbox" id="c-39550971" checked=""/><div class="controls bullet"><span class="by">JKCalhoun</span><span>|</span><a href="#39546447">root</a><span>|</span><a href="#39546568">parent</a><span>|</span><a href="#39546817">prev</a><span>|</span><a href="#39546791">next</a><span>|</span><label class="collapse" for="c-39550971">[-]</label><label class="expand" for="c-39550971">[1 more]</label></div><br/><div class="children"><div class="content">I remember games that used 8-bit color palette cycling to do tear-free renders in an interesting way.<p>They would draw the next frame of the game direct to the screen in either the high nybble (4 bits) or the low nybble (alternating each frame).<p>The color palette was either one of two: one where the same color would be displayed regardless of the high nybble and the other palette had colors chosen where they were the same regardless of the bits in the low nybble.<p>To be sure the game threw away 256 possible colors to have instead only 16. But when the next frame was being rendered, the user was never aware until, at the very last instant, the next palette was slammed in revealing the new frame (and of course the rendering began for the next).</div><br/></div></div><div id="39546791" class="c"><input type="checkbox" id="c-39546791" checked=""/><div class="controls bullet"><span class="by">dividuum</span><span>|</span><a href="#39546447">root</a><span>|</span><a href="#39546568">parent</a><span>|</span><a href="#39550971">prev</a><span>|</span><a href="#39547286">next</a><span>|</span><label class="collapse" for="c-39546791">[-]</label><label class="expand" for="c-39546791">[1 more]</label></div><br/><div class="children"><div class="content">Color palette definitely counts. I remember the lookup table Quake used to map its 256 color VGA palette to itself to implement light levels: <a href="https:&#x2F;&#x2F;quakewiki.org&#x2F;wiki&#x2F;Quake_palette#Colormap" rel="nofollow">https:&#x2F;&#x2F;quakewiki.org&#x2F;wiki&#x2F;Quake_palette#Colormap</a><p>You now basically have a two step lookup: palette_rgb[colormap[color, light]]</div><br/></div></div><div id="39547286" class="c"><input type="checkbox" id="c-39547286" checked=""/><div class="controls bullet"><span class="by">boomlinde</span><span>|</span><a href="#39546447">root</a><span>|</span><a href="#39546568">parent</a><span>|</span><a href="#39546791">prev</a><span>|</span><a href="#39547210">next</a><span>|</span><label class="collapse" for="c-39547286">[-]</label><label class="expand" for="c-39547286">[1 more]</label></div><br/><div class="children"><div class="content">Yes, you could for example achieve the tunnel effect described above with a 16x16 or 32x8 texture using a 256-entry palette.<p>Unreal by Future Crew has an effect that comes to mind that is probably implemented exactly like that (on VGA mode 0x13), just more of a wormhole than a tunnel: <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=InrGJ7C9B3s&amp;t=4m40s" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=InrGJ7C9B3s&amp;t=4m40s</a></div><br/></div></div></div></div><div id="39547210" class="c"><input type="checkbox" id="c-39547210" checked=""/><div class="controls bullet"><span class="by">spookie</span><span>|</span><a href="#39546447">parent</a><span>|</span><a href="#39546568">prev</a><span>|</span><a href="#39547703">next</a><span>|</span><label class="collapse" for="c-39547210">[-]</label><label class="expand" for="c-39547210">[1 more]</label></div><br/><div class="children"><div class="content">An advanced use of this principle is POM.
You can even do self shadowing!<p><a href="https:&#x2F;&#x2F;web.engr.oregonstate.edu&#x2F;~mjb&#x2F;cs557&#x2F;Projects&#x2F;Papers&#x2F;Parallax_Occlusion_Mapping.pdf" rel="nofollow">https:&#x2F;&#x2F;web.engr.oregonstate.edu&#x2F;~mjb&#x2F;cs557&#x2F;Projects&#x2F;Papers&#x2F;...</a></div><br/></div></div><div id="39547703" class="c"><input type="checkbox" id="c-39547703" checked=""/><div class="controls bullet"><span class="by">nopakos</span><span>|</span><a href="#39546447">parent</a><span>|</span><a href="#39547210">prev</a><span>|</span><a href="#39549683">next</a><span>|</span><label class="collapse" for="c-39547703">[-]</label><label class="expand" for="c-39547703">[1 more]</label></div><br/><div class="children"><div class="content">There is a little button &quot;Code ▽&quot; under the demo if you want to see how it&#x27;s working!</div><br/></div></div><div id="39549683" class="c"><input type="checkbox" id="c-39549683" checked=""/><div class="controls bullet"><span class="by">sylware</span><span>|</span><a href="#39546447">parent</a><span>|</span><a href="#39547703">prev</a><span>|</span><a href="#39546194">next</a><span>|</span><label class="collapse" for="c-39549683">[-]</label><label class="expand" for="c-39549683">[1 more]</label></div><br/><div class="children"><div class="content">Looking at the symmetries of specific cases, you may find convenient solutions.</div><br/></div></div></div></div><div id="39546194" class="c"><input type="checkbox" id="c-39546194" checked=""/><div class="controls bullet"><span class="by">Cloudef</span><span>|</span><a href="#39546447">prev</a><span>|</span><a href="#39534753">next</a><span>|</span><label class="collapse" for="c-39546194">[-]</label><label class="expand" for="c-39546194">[1 more]</label></div><br/><div class="children"><div class="content">Here is video how wind waker uses many luts to do its unique look (BoTW and ToTK use the same techniques)
<a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=mnxs6CR6Zrk" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=mnxs6CR6Zrk</a></div><br/></div></div><div id="39534753" class="c"><input type="checkbox" id="c-39534753" checked=""/><div class="controls bullet"><span class="by">FrostKiwi</span><span>|</span><a href="#39546194">prev</a><span>|</span><a href="#39547076">next</a><span>|</span><label class="collapse" for="c-39534753">[-]</label><label class="expand" for="c-39534753">[14 more]</label></div><br/><div class="children"><div class="content">Many thanks for submitting &lt;3
Author here, in case of any questions.</div><br/><div id="39548275" class="c"><input type="checkbox" id="c-39548275" checked=""/><div class="controls bullet"><span class="by">ronama</span><span>|</span><a href="#39534753">parent</a><span>|</span><a href="#39547247">next</a><span>|</span><label class="collapse" for="c-39548275">[-]</label><label class="expand" for="c-39548275">[2 more]</label></div><br/><div class="children"><div class="content">Loved your article! I just wanted to expand a bit on your last section. The Game Boy Advance did offer somewhat support for integer division, but it&#x27;s not hardware-accelerated [1]. I suspect the LUT model was for performance reasons (and rightfully so!).<p>[1] <a href="https:&#x2F;&#x2F;www.copetti.org&#x2F;writings&#x2F;consoles&#x2F;game-boy-advance&#x2F;#operating-system" rel="nofollow">https:&#x2F;&#x2F;www.copetti.org&#x2F;writings&#x2F;consoles&#x2F;game-boy-advance&#x2F;#...</a></div><br/><div id="39557701" class="c"><input type="checkbox" id="c-39557701" checked=""/><div class="controls bullet"><span class="by">aaaronic</span><span>|</span><a href="#39534753">root</a><span>|</span><a href="#39548275">parent</a><span>|</span><a href="#39547247">next</a><span>|</span><label class="collapse" for="c-39557701">[-]</label><label class="expand" for="c-39557701">[1 more]</label></div><br/><div class="children"><div class="content">The GBA has native support for integer division, but it does not have any hardware support for floating point arithmetic at all — compilers will insert a virtual floating point unit that does IEEE 754 in software, which takes hundreds of CPU cycles for most operations. I believe the LUT you refer to is for floats.</div><br/></div></div></div></div><div id="39547247" class="c"><input type="checkbox" id="c-39547247" checked=""/><div class="controls bullet"><span class="by">Agentlien</span><span>|</span><a href="#39534753">parent</a><span>|</span><a href="#39548275">prev</a><span>|</span><a href="#39546433">next</a><span>|</span><label class="collapse" for="c-39547247">[-]</label><label class="expand" for="c-39547247">[4 more]</label></div><br/><div class="children"><div class="content">Hello and thank you for the great article!<p>These uses of LUTs are great and I&#x27;m happy to see such a neat article describing them. Also love the use of webgl and the ability to upload your own data!<p>I was a bit surprised however by the way colour grading using LUTs was presented. The article makes it sound like a cool niche solution used by L4D2, but it&#x27;s been the industry standard for a long while and was used on every game I&#x27;ve worked on, from AAA games like NFS (2015) to larger indie games like Lost in Random.</div><br/><div id="39547360" class="c"><input type="checkbox" id="c-39547360" checked=""/><div class="controls bullet"><span class="by">FrostKiwi</span><span>|</span><a href="#39534753">root</a><span>|</span><a href="#39547247">parent</a><span>|</span><a href="#39546433">next</a><span>|</span><label class="collapse" for="c-39547360">[-]</label><label class="expand" for="c-39547360">[3 more]</label></div><br/><div class="children"><div class="content">Glad you liked it! That&#x27;s quite the incredible career. Lost in Random seems just like my taste. Guess who just bought it and is enjoining it tonight...<p>&gt; but it&#x27;s been the industry standard for a long while<p>Yeah, I mixed messages with my colorful writing style I guess, thought the passage &quot;Using 3D LUTs to style your game’s colors via outside tools is a very well known workflow.&quot; was enough to state, that it&#x27;s not niche use. Clarified now with an extra sentence.</div><br/><div id="39557061" class="c"><input type="checkbox" id="c-39557061" checked=""/><div class="controls bullet"><span class="by">kllrnohj</span><span>|</span><a href="#39534753">root</a><span>|</span><a href="#39547360">parent</a><span>|</span><a href="#39550811">next</a><span>|</span><label class="collapse" for="c-39557061">[-]</label><label class="expand" for="c-39557061">[1 more]</label></div><br/><div class="children"><div class="content">preshaping before the 3d lut, such as with a 1d lut, is a common way to handle hdr tone mapping as well. See for example <a href="https:&#x2F;&#x2F;gpuopen.com&#x2F;wp-content&#x2F;uploads&#x2F;2016&#x2F;03&#x2F;GdcVdrLottes.pdf" rel="nofollow">https:&#x2F;&#x2F;gpuopen.com&#x2F;wp-content&#x2F;uploads&#x2F;2016&#x2F;03&#x2F;GdcVdrLottes....</a></div><br/></div></div><div id="39550811" class="c"><input type="checkbox" id="c-39550811" checked=""/><div class="controls bullet"><span class="by">Agentlien</span><span>|</span><a href="#39534753">root</a><span>|</span><a href="#39547360">parent</a><span>|</span><a href="#39557061">prev</a><span>|</span><a href="#39546433">next</a><span>|</span><label class="collapse" for="c-39550811">[-]</label><label class="expand" for="c-39550811">[1 more]</label></div><br/><div class="children"><div class="content">I really hope you&#x27;ll enjoy the game! It&#x27;s honestly my favourite project I&#x27;ve been on so far.<p>If you want a little insight into my corner of the making of LiR, check out this post I wrote about the fog: <a href="https:&#x2F;&#x2F;" rel="nofollow">https:&#x2F;&#x2F;</a> agentlien.github.io&#x2F;fog</div><br/></div></div></div></div></div></div><div id="39546433" class="c"><input type="checkbox" id="c-39546433" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#39534753">parent</a><span>|</span><a href="#39547247">prev</a><span>|</span><a href="#39548383">next</a><span>|</span><label class="collapse" for="c-39546433">[-]</label><label class="expand" for="c-39546433">[2 more]</label></div><br/><div class="children"><div class="content">There was a typo that was melting my brain until I confirmed that this was not some alternate plotting library.<p>&quot;Here is every single colormap that <i>matlibplot</i> supports,...&quot;</div><br/><div id="39546952" class="c"><input type="checkbox" id="c-39546952" checked=""/><div class="controls bullet"><span class="by">FrostKiwi</span><span>|</span><a href="#39534753">root</a><span>|</span><a href="#39546433">parent</a><span>|</span><a href="#39548383">next</a><span>|</span><label class="collapse" for="c-39546952">[-]</label><label class="expand" for="c-39546952">[1 more]</label></div><br/><div class="children"><div class="content">Ohh, that&#x27;s funny. I just realized, I always read it the wrong way around in my brain up until now! Corrected the typo.</div><br/></div></div></div></div><div id="39548383" class="c"><input type="checkbox" id="c-39548383" checked=""/><div class="controls bullet"><span class="by">nonoesp</span><span>|</span><a href="#39534753">parent</a><span>|</span><a href="#39546433">prev</a><span>|</span><a href="#39546590">next</a><span>|</span><label class="collapse" for="c-39548383">[-]</label><label class="expand" for="c-39548383">[1 more]</label></div><br/><div class="children"><div class="content">Amazing write-up. Thanks for sharing.</div><br/></div></div><div id="39546590" class="c"><input type="checkbox" id="c-39546590" checked=""/><div class="controls bullet"><span class="by">vsuperpower2020</span><span>|</span><a href="#39534753">parent</a><span>|</span><a href="#39548383">prev</a><span>|</span><a href="#39547076">next</a><span>|</span><label class="collapse" for="c-39546590">[-]</label><label class="expand" for="c-39546590">[4 more]</label></div><br/><div class="children"><div class="content">All these animated gifs are annoying and distracting, and I can do without the unfunny boomer memes from 2010. It&#x27;s just annoying to try and read text with all these colorful gifs being spammed.</div><br/><div id="39546969" class="c"><input type="checkbox" id="c-39546969" checked=""/><div class="controls bullet"><span class="by">johnnyanmac</span><span>|</span><a href="#39534753">root</a><span>|</span><a href="#39546590">parent</a><span>|</span><a href="#39547233">next</a><span>|</span><label class="collapse" for="c-39546969">[-]</label><label class="expand" for="c-39546969">[1 more]</label></div><br/><div class="children"><div class="content">May I suggest reader view as a solution if you use Firefox?<p>But this is a technical topic in a visual concept. I appreciate visualizations and absolutely praise shaders in contexts like these.</div><br/></div></div><div id="39547233" class="c"><input type="checkbox" id="c-39547233" checked=""/><div class="controls bullet"><span class="by">alpaca128</span><span>|</span><a href="#39534753">root</a><span>|</span><a href="#39546590">parent</a><span>|</span><a href="#39546969">prev</a><span>|</span><a href="#39547076">next</a><span>|</span><label class="collapse" for="c-39547233">[-]</label><label class="expand" for="c-39547233">[2 more]</label></div><br/><div class="children"><div class="content">Usually I&#x27;d agree but I can only see embedded videos which respect the disabled autoplay setting.<p>Edit: nevermind, once started it&#x27;s impossible to pause the videos, they always continue playing after scrolling.</div><br/><div id="39547737" class="c"><input type="checkbox" id="c-39547737" checked=""/><div class="controls bullet"><span class="by">FrostKiwi</span><span>|</span><a href="#39534753">root</a><span>|</span><a href="#39547233">parent</a><span>|</span><a href="#39547076">next</a><span>|</span><label class="collapse" for="c-39547737">[-]</label><label class="expand" for="c-39547737">[1 more]</label></div><br/><div class="children"><div class="content">I was not sure how to handle that.<p>Battery optimization disables the top video element of a muted video once you scroll past it, which stops the WebGL samples from playing. Landing in the middle of the article from another page also prevents the WebGL samples from working with video, which is supposed to illustrate the realtime processing aspect. But unmuted cannot be auto played.<p>I&#x27;ll rethink how I approach this for my next article. Maybe a pause button under every WebGL sample?</div><br/></div></div></div></div></div></div></div></div><div id="39547076" class="c"><input type="checkbox" id="c-39547076" checked=""/><div class="controls bullet"><span class="by">pubby</span><span>|</span><a href="#39534753">prev</a><span>|</span><a href="#39553952">next</a><span>|</span><label class="collapse" for="c-39547076">[-]</label><label class="expand" for="c-39547076">[9 more]</label></div><br/><div class="children"><div class="content">Retro games used a ton of tables. Back then memory speeds were blazing fast, but processors were sluggish, so it made sense to pack as much computation as possible into tables. The more clever you were about it, the fancier games you could make.</div><br/><div id="39547200" class="c"><input type="checkbox" id="c-39547200" checked=""/><div class="controls bullet"><span class="by">alpaca128</span><span>|</span><a href="#39547076">parent</a><span>|</span><a href="#39547743">next</a><span>|</span><label class="collapse" for="c-39547200">[-]</label><label class="expand" for="c-39547200">[4 more]</label></div><br/><div class="children"><div class="content">Not always, though it might depend on what platform you mean with retro. Kaze Emanuar on YT does a lot of development for the N64 and it feels like half the time he talks about how the memory bus affects all kinds of optimizations. In Mario 64 he replaced the original lookup table for the sine function because an approximation was faster and accurate enough (or rather two approximations for two different purposes).<p>I love that channel, he reworked the entire Mario 64 code [0] to make it run at stable 60FPS...because he wanted his mods to run faster.<p>[0] <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=t_rzYnXEQlE" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=t_rzYnXEQlE</a></div><br/><div id="39548953" class="c"><input type="checkbox" id="c-39548953" checked=""/><div class="controls bullet"><span class="by">sumtechguy</span><span>|</span><a href="#39547076">root</a><span>|</span><a href="#39547200">parent</a><span>|</span><a href="#39551377">next</a><span>|</span><label class="collapse" for="c-39548953">[-]</label><label class="expand" for="c-39548953">[1 more]</label></div><br/><div class="children"><div class="content">Back when I started I thought I would make games.  I used a lookup table for cos&#x2F;sin kept as an integer.  I only needed enough precision for rotation on 320x240.  It was something like 20-30 cycles faster per pixel.  Even more if you didn&#x27;t have a FP co-processor.</div><br/></div></div><div id="39551377" class="c"><input type="checkbox" id="c-39551377" checked=""/><div class="controls bullet"><span class="by">TacticalCoder</span><span>|</span><a href="#39547076">root</a><span>|</span><a href="#39547200">parent</a><span>|</span><a href="#39548953">prev</a><span>|</span><a href="#39547858">next</a><span>|</span><label class="collapse" for="c-39551377">[-]</label><label class="expand" for="c-39551377">[1 more]</label></div><br/><div class="children"><div class="content">By retro platform GP meant Atari ST and Commodore Amiga and the like: LUT were the name of the game for everything back then. Games, intros&#x2F;cracktros&#x2F;demos.<p>Heck even sprites movements often weren&#x27;t done using math but using precomputed tables: storing movements in &quot;pixels per frame&quot;.<p>It worked particularly well on some platforms because they had relatively big RAM amounts compared to the slow CPU and RAM access weren&#x27;t as taxing as today (these CPUs didn&#x27;t have L1&#x2F;L2&#x2F;L3 caches).<p>The N64 is already a more modern machine.</div><br/></div></div><div id="39547858" class="c"><input type="checkbox" id="c-39547858" checked=""/><div class="controls bullet"><span class="by">djmips</span><span>|</span><a href="#39547076">root</a><span>|</span><a href="#39547200">parent</a><span>|</span><a href="#39551377">prev</a><span>|</span><a href="#39547743">next</a><span>|</span><label class="collapse" for="c-39547858">[-]</label><label class="expand" for="c-39547858">[1 more]</label></div><br/><div class="children"><div class="content">The speedup from the approximation wasn&#x27;t that much if anything. He made his real improvements elswhere. But your point stands that memory speed really has moved the goalposts on what is feasible to speed up through using precalculation tables and if you can do it with math then that is often much faster.</div><br/></div></div></div></div><div id="39547743" class="c"><input type="checkbox" id="c-39547743" checked=""/><div class="controls bullet"><span class="by">ggambetta</span><span>|</span><a href="#39547076">parent</a><span>|</span><a href="#39547200">prev</a><span>|</span><a href="#39553952">next</a><span>|</span><label class="collapse" for="c-39547743">[-]</label><label class="expand" for="c-39547743">[4 more]</label></div><br/><div class="children"><div class="content">I remember the days of resticting rotation accuracy to 360&#x2F;256ths of a degree so it would fit on a byte, which then would be an index into trig lookup tables :)</div><br/><div id="39549172" class="c"><input type="checkbox" id="c-39549172" checked=""/><div class="controls bullet"><span class="by">Jevon23</span><span>|</span><a href="#39547076">root</a><span>|</span><a href="#39547743">parent</a><span>|</span><a href="#39547887">next</a><span>|</span><label class="collapse" for="c-39549172">[-]</label><label class="expand" for="c-39549172">[2 more]</label></div><br/><div class="children"><div class="content">I miss the days when professional software development was more akin to this sort of thing, rather than gluing together 20 Javascript frameworks on top of someone else&#x27;s cloud infrastructure.</div><br/><div id="39550240" class="c"><input type="checkbox" id="c-39550240" checked=""/><div class="controls bullet"><span class="by">ggambetta</span><span>|</span><a href="#39547076">root</a><span>|</span><a href="#39549172">parent</a><span>|</span><a href="#39547887">next</a><span>|</span><label class="collapse" for="c-39550240">[-]</label><label class="expand" for="c-39550240">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;m with you. The current thing really isn&#x27;t fun anymore :(</div><br/></div></div></div></div><div id="39547887" class="c"><input type="checkbox" id="c-39547887" checked=""/><div class="controls bullet"><span class="by">djmips</span><span>|</span><a href="#39547076">root</a><span>|</span><a href="#39547743">parent</a><span>|</span><a href="#39549172">prev</a><span>|</span><a href="#39553952">next</a><span>|</span><label class="collapse" for="c-39547887">[-]</label><label class="expand" for="c-39547887">[1 more]</label></div><br/><div class="children"><div class="content">haha yes, we used 2π &#x2F; 256 and we called them brads (binary radians).</div><br/></div></div></div></div></div></div><div id="39553952" class="c"><input type="checkbox" id="c-39553952" checked=""/><div class="controls bullet"><span class="by">sircastor</span><span>|</span><a href="#39547076">prev</a><span>|</span><a href="#39547932">next</a><span>|</span><label class="collapse" for="c-39553952">[-]</label><label class="expand" for="c-39553952">[1 more]</label></div><br/><div class="children"><div class="content">A little while back I got into the NES homebrew scene, and I recall seeing a game, (Bobl) that had incredible water physics - way more than system would have been capable of calculating. It turns out that it was a Lookup table and it really opened my eyes as to what you can accomplish with them and how simple tools can look like very complex processes.<p><a href="https:&#x2F;&#x2F;morphcatgames.itch.io&#x2F;bobl" rel="nofollow">https:&#x2F;&#x2F;morphcatgames.itch.io&#x2F;bobl</a></div><br/></div></div><div id="39547932" class="c"><input type="checkbox" id="c-39547932" checked=""/><div class="controls bullet"><span class="by">cromulent</span><span>|</span><a href="#39553952">prev</a><span>|</span><a href="#39546726">next</a><span>|</span><label class="collapse" for="c-39547932">[-]</label><label class="expand" for="c-39547932">[2 more]</label></div><br/><div class="children"><div class="content"><i>A Podcast Of Unnecessary Detail</i> just did an episode talking about the SNES Doom port and how it used LUTs for trigonometry as the SNES didn&#x27;t have a graphics processor.<p><a href="https:&#x2F;&#x2F;festivalofthespokennerd.com&#x2F;podcast&#x2F;series-3-episode-4&#x2F;" rel="nofollow">https:&#x2F;&#x2F;festivalofthespokennerd.com&#x2F;podcast&#x2F;series-3-episode...</a><p><a href="https:&#x2F;&#x2F;github.com&#x2F;RandalLinden&#x2F;DOOM-FX">https:&#x2F;&#x2F;github.com&#x2F;RandalLinden&#x2F;DOOM-FX</a></div><br/><div id="39548548" class="c"><input type="checkbox" id="c-39548548" checked=""/><div class="controls bullet"><span class="by">nicetryguy</span><span>|</span><a href="#39547932">parent</a><span>|</span><a href="#39546726">next</a><span>|</span><label class="collapse" for="c-39548548">[-]</label><label class="expand" for="c-39548548">[1 more]</label></div><br/><div class="children"><div class="content">&gt; the SNES didn&#x27;t have a graphics processor<p>It absolutely did! Even the NES had one. In addition to the (cloned) Motorola 65c816 SNES CPU, the PPU (picture processing unit) was a custom chip that offered several different layouts for spitting out tile based backgrounds and sprites as each scanline physically drew across the CRT TV. It was even capable of fancy things like background rotation and scaling (Mode 7, think Mario Kart) and hardware transparences which you can see in many games.
Furthermore, in the case of Doom (and games like Starfox) the cart was baked in with the &quot;Super FX&quot; chip that handled the 3d calculations. So you were actually dealing with two graphics processors for that specific title, heh.<p>Here&#x27;s a wonderfully (and painfully) detailed series about the SNES hardware by Retro Game Mechanics Explained:<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=57ibhDU2SAI&amp;list=PLHQ0utQyFw5KCcj1ljIhExH_lvGwfn6GV&amp;index=1" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=57ibhDU2SAI&amp;list=PLHQ0utQyFw...</a></div><br/></div></div></div></div><div id="39546726" class="c"><input type="checkbox" id="c-39546726" checked=""/><div class="controls bullet"><span class="by">wilg</span><span>|</span><a href="#39547932">prev</a><span>|</span><a href="#39546118">next</a><span>|</span><label class="collapse" for="c-39546726">[-]</label><label class="expand" for="c-39546726">[3 more]</label></div><br/><div class="children"><div class="content">If you work with LUTs a lot, I work on a Mac app that handles all kinds of advanced color science and conversion tasks: <a href="https:&#x2F;&#x2F;videovillage.com&#x2F;lattice" rel="nofollow">https:&#x2F;&#x2F;videovillage.com&#x2F;lattice</a></div><br/><div id="39547601" class="c"><input type="checkbox" id="c-39547601" checked=""/><div class="controls bullet"><span class="by">cpach</span><span>|</span><a href="#39546726">parent</a><span>|</span><a href="#39546118">next</a><span>|</span><label class="collapse" for="c-39547601">[-]</label><label class="expand" for="c-39547601">[2 more]</label></div><br/><div class="children"><div class="content">Those tools look awesome! Makes me wanna make a movie :)</div><br/><div id="39553831" class="c"><input type="checkbox" id="c-39553831" checked=""/><div class="controls bullet"><span class="by">wilg</span><span>|</span><a href="#39546726">root</a><span>|</span><a href="#39547601">parent</a><span>|</span><a href="#39546118">next</a><span>|</span><label class="collapse" for="c-39553831">[-]</label><label class="expand" for="c-39553831">[1 more]</label></div><br/><div class="children"><div class="content">Do it!</div><br/></div></div></div></div></div></div><div id="39546118" class="c"><input type="checkbox" id="c-39546118" checked=""/><div class="controls bullet"><span class="by">reactordev</span><span>|</span><a href="#39546726">prev</a><span>|</span><a href="#39535631">next</a><span>|</span><label class="collapse" for="c-39546118">[-]</label><label class="expand" for="c-39546118">[9 more]</label></div><br/><div class="children"><div class="content">Off the top of my head, my uses of LUTs have been:<p><pre><code>   - Atmospheric scattering.
   - Tinting Sprites.
   - Nightvision Scopes.
   - FLIR scopes.
   - B&amp;W “video feed” effect.
   - Glitch effects.
   - Heightmap Shading.
   - Alpha dot factor for spaceship exhaust plumes.
   - Heatmap of website visitors mouse dwellings.
   - Crystalline Effects.
   - And finally, post processing colorization in raw color space.
</code></pre>
LUTs are a visualization of an array of values known to you, and it’s amazingly useful.</div><br/><div id="39546407" class="c"><input type="checkbox" id="c-39546407" checked=""/><div class="controls bullet"><span class="by">corysama</span><span>|</span><a href="#39546118">parent</a><span>|</span><a href="#39546304">next</a><span>|</span><label class="collapse" for="c-39546407">[-]</label><label class="expand" for="c-39546407">[7 more]</label></div><br/><div class="children"><div class="content">&gt; Tinting Sprites<p>Kids these days have forgotten all about palettized sprites! Where do ya think the term “palette swap” comes from? ;)<p><a href="http:&#x2F;&#x2F;www.effectgames.com&#x2F;demos&#x2F;canvascycle&#x2F;" rel="nofollow">http:&#x2F;&#x2F;www.effectgames.com&#x2F;demos&#x2F;canvascycle&#x2F;</a><p>It fell out of favor because OG Xbox was bad at it and Photoshop doesn’t support it. But, modern hardware can totally handle palette swaps make in AESprite.</div><br/><div id="39546983" class="c"><input type="checkbox" id="c-39546983" checked=""/><div class="controls bullet"><span class="by">charcircuit</span><span>|</span><a href="#39546118">root</a><span>|</span><a href="#39546407">parent</a><span>|</span><a href="#39548166">next</a><span>|</span><label class="collapse" for="c-39546983">[-]</label><label class="expand" for="c-39546983">[1 more]</label></div><br/><div class="children"><div class="content">&gt;It fell out of favor because OG Xbox was bad at it<p>It fell out of favor because hardware no longer needed to use palettes as they had enough memory to store the actual color.</div><br/></div></div><div id="39548166" class="c"><input type="checkbox" id="c-39548166" checked=""/><div class="controls bullet"><span class="by">bregma</span><span>|</span><a href="#39546118">root</a><span>|</span><a href="#39546407">parent</a><span>|</span><a href="#39546983">prev</a><span>|</span><a href="#39546304">next</a><span>|</span><label class="collapse" for="c-39548166">[-]</label><label class="expand" for="c-39548166">[5 more]</label></div><br/><div class="children"><div class="content">It fell out of favour when the move to 16-bit systems meant no more hardware sprites.</div><br/><div id="39549925" class="c"><input type="checkbox" id="c-39549925" checked=""/><div class="controls bullet"><span class="by">corysama</span><span>|</span><a href="#39546118">root</a><span>|</span><a href="#39548166">parent</a><span>|</span><a href="#39548354">next</a><span>|</span><label class="collapse" for="c-39549925">[-]</label><label class="expand" for="c-39549925">[1 more]</label></div><br/><div class="children"><div class="content">The SNES and Genesis definitely had hardware sprites. The PS1 and PS2 worked with palettized textures 99% of the time and had hardware quads.  The N64 could do palettized textures and quads. The same for the OG Xbox, but it was a big speed hit vs DXTC. With the Xbox360 and PS3 you could implement palettized textures as a shader. But, only the most special cases bothered.</div><br/></div></div><div id="39548354" class="c"><input type="checkbox" id="c-39548354" checked=""/><div class="controls bullet"><span class="by">reactordev</span><span>|</span><a href="#39546118">root</a><span>|</span><a href="#39548166">parent</a><span>|</span><a href="#39549925">prev</a><span>|</span><a href="#39546304">next</a><span>|</span><label class="collapse" for="c-39548354">[-]</label><label class="expand" for="c-39548354">[3 more]</label></div><br/><div class="children"><div class="content">It fell out of favor when we could just store 1000x more sprites. It was memory, not instruction-set. Tinting then happened as a pre-build step until finally shaders replaced the practice entirely.</div><br/><div id="39549993" class="c"><input type="checkbox" id="c-39549993" checked=""/><div class="controls bullet"><span class="by">corysama</span><span>|</span><a href="#39546118">root</a><span>|</span><a href="#39548354">parent</a><span>|</span><a href="#39546304">next</a><span>|</span><label class="collapse" for="c-39549993">[-]</label><label class="expand" for="c-39549993">[2 more]</label></div><br/><div class="children"><div class="content">Instead of “fell out of favor” I shoulda said “artists stopped being informed of its existence and occasionally invented poor approximations to it from first principles”. Such as tinting sprites to approximate palette swaps of the retro style they are referencing.<p>You can do so much more than tint with palettes. The animations in the link I posted each a composed of a single 8-bit image and a function to rotate specific sections of the palette.</div><br/><div id="39550934" class="c"><input type="checkbox" id="c-39550934" checked=""/><div class="controls bullet"><span class="by">reactordev</span><span>|</span><a href="#39546118">root</a><span>|</span><a href="#39549993">parent</a><span>|</span><a href="#39546304">next</a><span>|</span><label class="collapse" for="c-39550934">[-]</label><label class="expand" for="c-39550934">[1 more]</label></div><br/><div class="children"><div class="content">I’m intimately familiar with palette animations. You’re right though, it’s a technique that was lost due to hardware no longer limiting the artists. I still find it to be far superior to sprite tile replacement animations.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div><div id="39535631" class="c"><input type="checkbox" id="c-39535631" checked=""/><div class="controls bullet"><span class="by">082349872349872</span><span>|</span><a href="#39546118">prev</a><span>|</span><a href="#39546777">next</a><span>|</span><label class="collapse" for="c-39535631">[-]</label><label class="expand" for="c-39535631">[4 more]</label></div><br/><div class="children"><div class="content">If you try to program just about anything non-trivial in <i>sed</i>(1), LUTs are the way to go.</div><br/><div id="39547960" class="c"><input type="checkbox" id="c-39547960" checked=""/><div class="controls bullet"><span class="by">dredmorbius</span><span>|</span><a href="#39535631">parent</a><span>|</span><a href="#39546285">next</a><span>|</span><label class="collapse" for="c-39547960">[-]</label><label class="expand" for="c-39547960">[2 more]</label></div><br/><div class="children"><div class="content">I&#x27;m both fascinated and horrified to ask what non-trivial sed programming you might be doing, and why ;-)</div><br/><div id="39554137" class="c"><input type="checkbox" id="c-39554137" checked=""/><div class="controls bullet"><span class="by">082349872349872</span><span>|</span><a href="#39535631">root</a><span>|</span><a href="#39547960">parent</a><span>|</span><a href="#39546285">next</a><span>|</span><label class="collapse" for="c-39554137">[-]</label><label class="expand" for="c-39554137">[1 more]</label></div><br/><div class="children"><div class="content">what: the most complicated thing (that I&#x27;ve actually used in other projects) was a data-driven precedence-climbing parser (which, since sed is usually lousy at dealing with place-value numerics, required sussing out sed-friendly representations of the core data types).<p>why: because given a &quot;weird machine&quot; that is nearly omnipresent (in the back end, anyway) and is also a Perlis language, who among us would not wish to program it? (and who among us would willingly admit that 1959&#x27;s <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;IBM_1620#Model_I" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;IBM_1620#Model_I</a> programmers had had better code-fu?)<p><pre><code>    I must go down to the sed(1) again, to the pattern space and the hold,
    And all I ask is a t branch and a s&#x2F;ub&#x2F;st&#x2F; to map and fold;
    And the Jolt’s kick and the keys&#x27; clack and the write lines breaking,
    And a green glint in mirror shades, and a grey* dawn waking.
</code></pre>
* &quot;the color of television, tuned to a dead channel&quot;; no Ἠὼς Ῥοδοδάκτυλος here!</div><br/></div></div></div></div><div id="39546285" class="c"><input type="checkbox" id="c-39546285" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#39535631">parent</a><span>|</span><a href="#39547960">prev</a><span>|</span><a href="#39546777">next</a><span>|</span><label class="collapse" for="c-39546285">[-]</label><label class="expand" for="c-39546285">[1 more]</label></div><br/><div class="children"><div class="content">indeed!  though you&#x27;ve had more success with that than i have<p>i&#x27;d add: or fpgas, or eproms, or m6</div><br/></div></div></div></div><div id="39546777" class="c"><input type="checkbox" id="c-39546777" checked=""/><div class="controls bullet"><span class="by">KingOfCoders</span><span>|</span><a href="#39535631">prev</a><span>|</span><a href="#39534796">next</a><span>|</span><label class="collapse" for="c-39546777">[-]</label><label class="expand" for="c-39546777">[3 more]</label></div><br/><div class="children"><div class="content">Back in the days assemblers (patched Seka) had tools to generate sin wave lookup tables.</div><br/><div id="39547535" class="c"><input type="checkbox" id="c-39547535" checked=""/><div class="controls bullet"><span class="by">OnlyMortal</span><span>|</span><a href="#39546777">parent</a><span>|</span><a href="#39534796">next</a><span>|</span><label class="collapse" for="c-39547535">[-]</label><label class="expand" for="c-39547535">[2 more]</label></div><br/><div class="children"><div class="content">Handy for vector graphics if you include a table for TAN.</div><br/><div id="39549201" class="c"><input type="checkbox" id="c-39549201" checked=""/><div class="controls bullet"><span class="by">082349872349872</span><span>|</span><a href="#39546777">root</a><span>|</span><a href="#39547535">parent</a><span>|</span><a href="#39534796">next</a><span>|</span><label class="collapse" for="c-39549201">[-]</label><label class="expand" for="c-39549201">[1 more]</label></div><br/><div class="children"><div class="content">&quot;They came to TAN &#x2F; I taught them how to SIN&quot; (COS my slipstick brings all the girls to the yard): <a href="https:&#x2F;&#x2F;img-9gag-fun.9cache.com&#x2F;photo&#x2F;a5bbB2r_700bwp.webp" rel="nofollow">https:&#x2F;&#x2F;img-9gag-fun.9cache.com&#x2F;photo&#x2F;a5bbB2r_700bwp.webp</a></div><br/></div></div></div></div></div></div><div id="39534796" class="c"><input type="checkbox" id="c-39534796" checked=""/><div class="controls bullet"><span class="by">joegibbs</span><span>|</span><a href="#39546777">prev</a><span>|</span><a href="#39553420">next</a><span>|</span><label class="collapse" for="c-39534796">[-]</label><label class="expand" for="c-39534796">[10 more]</label></div><br/><div class="children"><div class="content">This is brilliant - I&#x27;ve used plenty of LUTs for post-processing but it never occurred to me to use them for recolouring assets as well.</div><br/><div id="39546757" class="c"><input type="checkbox" id="c-39546757" checked=""/><div class="controls bullet"><span class="by">stevenwoo</span><span>|</span><a href="#39534796">parent</a><span>|</span><a href="#39546336">next</a><span>|</span><label class="collapse" for="c-39546757">[-]</label><label class="expand" for="c-39546757">[2 more]</label></div><br/><div class="children"><div class="content">This reminds me, we used a command line tool (originally made for Warcraft 2?) to take full color art assets and find a palette of 200 or so colors (the rest reserved for UI elements and the player characters) for the different areas in Diablo 2, and then remapped all the art assets to these small palettes, and then reuse the monster art with other colors within these palettes for varieties of monsters. I don&#x27;t remember spending more than a day on putting this in our art pipeline, the guy who wrote the tool did all the hard work.</div><br/><div id="39557369" class="c"><input type="checkbox" id="c-39557369" checked=""/><div class="controls bullet"><span class="by">Arrath</span><span>|</span><a href="#39534796">root</a><span>|</span><a href="#39546757">parent</a><span>|</span><a href="#39546336">next</a><span>|</span><label class="collapse" for="c-39557369">[-]</label><label class="expand" for="c-39557369">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s really impressive!</div><br/></div></div></div></div><div id="39546336" class="c"><input type="checkbox" id="c-39546336" checked=""/><div class="controls bullet"><span class="by">wsc981</span><span>|</span><a href="#39534796">parent</a><span>|</span><a href="#39546757">prev</a><span>|</span><a href="#39534993">next</a><span>|</span><label class="collapse" for="c-39546336">[-]</label><label class="expand" for="c-39546336">[4 more]</label></div><br/><div class="children"><div class="content">Doom used a lookup table for random numbers: <a href="https:&#x2F;&#x2F;doom.fandom.com&#x2F;wiki&#x2F;Pseudorandom_number_generator" rel="nofollow">https:&#x2F;&#x2F;doom.fandom.com&#x2F;wiki&#x2F;Pseudorandom_number_generator</a></div><br/><div id="39546712" class="c"><input type="checkbox" id="c-39546712" checked=""/><div class="controls bullet"><span class="by">0cf8612b2e1e</span><span>|</span><a href="#39534796">root</a><span>|</span><a href="#39546336">parent</a><span>|</span><a href="#39534993">next</a><span>|</span><label class="collapse" for="c-39546712">[-]</label><label class="expand" for="c-39546712">[3 more]</label></div><br/><div class="children"><div class="content">Does this mean the engine is fully deterministic?</div><br/><div id="39547036" class="c"><input type="checkbox" id="c-39547036" checked=""/><div class="controls bullet"><span class="by">unleaded</span><span>|</span><a href="#39534796">root</a><span>|</span><a href="#39546712">parent</a><span>|</span><a href="#39549280">next</a><span>|</span><label class="collapse" for="c-39547036">[-]</label><label class="expand" for="c-39547036">[1 more]</label></div><br/><div class="children"><div class="content">Yes, if you make the exact same inputs you will get the exact same outcome. Demos and multiplayer rely on this, they just record player inputs, nothing about enemy movement or anything like that. This is also why you can leave a multiplayer game in the middle of a match, but you can&#x27;t join one in the middle<p><a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=pq3x1Jy8pYM" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=pq3x1Jy8pYM</a></div><br/></div></div><div id="39549280" class="c"><input type="checkbox" id="c-39549280" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#39534796">root</a><span>|</span><a href="#39546712">parent</a><span>|</span><a href="#39547036">prev</a><span>|</span><a href="#39534993">next</a><span>|</span><label class="collapse" for="c-39549280">[-]</label><label class="expand" for="c-39549280">[1 more]</label></div><br/><div class="children"><div class="content">Yes, and that speed runs can be “seed runs” where you do things to make the right LUT number come up at the right time.<p>The DooM Engine Black Book goes into details.<p><a href="https:&#x2F;&#x2F;fabiensanglard.net&#x2F;doom_fire_psx&#x2F;" rel="nofollow">https:&#x2F;&#x2F;fabiensanglard.net&#x2F;doom_fire_psx&#x2F;</a> also<p>Other games use seeded random number generators to be entirely deterministic even though random; Factorio does this to allow multiplayer without having to sync the entire game state all the time.</div><br/></div></div></div></div></div></div><div id="39534993" class="c"><input type="checkbox" id="c-39534993" checked=""/><div class="controls bullet"><span class="by">FrostKiwi</span><span>|</span><a href="#39534796">parent</a><span>|</span><a href="#39546336">prev</a><span>|</span><a href="#39553420">next</a><span>|</span><label class="collapse" for="c-39534993">[-]</label><label class="expand" for="c-39534993">[3 more]</label></div><br/><div class="children"><div class="content">Yeah, developer commentaries are a goldmine in general for small gold nuggets of knowledge like that. Never would have come up with such an use-case either.</div><br/><div id="39546156" class="c"><input type="checkbox" id="c-39546156" checked=""/><div class="controls bullet"><span class="by">svec</span><span>|</span><a href="#39534796">root</a><span>|</span><a href="#39534993">parent</a><span>|</span><a href="#39553420">next</a><span>|</span><label class="collapse" for="c-39546156">[-]</label><label class="expand" for="c-39546156">[2 more]</label></div><br/><div class="children"><div class="content">Are there any other dev commentaries you recommend (other than the mentions in your post)?</div><br/><div id="39546970" class="c"><input type="checkbox" id="c-39546970" checked=""/><div class="controls bullet"><span class="by">FrostKiwi</span><span>|</span><a href="#39534796">root</a><span>|</span><a href="#39546156">parent</a><span>|</span><a href="#39553420">next</a><span>|</span><label class="collapse" for="c-39546970">[-]</label><label class="expand" for="c-39546970">[1 more]</label></div><br/><div class="children"><div class="content">Basically, all of the Valve ones.
(Half-life 2, Half-life 2 Episode 1, Half-life 2 Episode 2, Team Fortress 2, Left 4 Dead, Left 4 Dead 2, Half-Life Alyx)<p>Each one of them is a time capsule of the techniques and game design philosophies at the time of development. Pretty sure there is a walk through on youtube for every single one of them, if you don&#x27;t want to get the games yourself.</div><br/></div></div></div></div></div></div></div></div><div id="39553420" class="c"><input type="checkbox" id="c-39553420" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#39534796">prev</a><span>|</span><a href="#39546957">next</a><span>|</span><label class="collapse" for="c-39553420">[-]</label><label class="expand" for="c-39553420">[3 more]</label></div><br/><div class="children"><div class="content">If I had a dollar for every time someone who had 30 seconds of accumulated knowledge about Dynamic Programming tried to argue with me that caching and memoization are the same thing, I&#x27;d have enough for a nerf bat to hit them with.<p>(Briefly: memoization is local shared state, caches are global shared state, which is a whole other set of problems. And caching is hoping you&#x27;ll need something eventually, where as memoization is knowing you will need it immediately.)<p>A couple years ago I watched a very long video on Dynamic Programming and learned a new term: Tabulation. If memoization is encountering a common sub-problem and holding onto it, tabulation is seeking them out, answering the sub-problems before they can come up organically.<p>It&#x27;s much harder to derive the tabulation answer, but I find it&#x27;s usually easier to reason about after the fact. Which is enormously helpful when you go back to add new features or fix old bugs.<p>Look-Up Tables are fixed-size tabulations. The space complexity of tabulation is often ≥ O(n), while LUT are a fixed size, but big enough to reduce the computation time by a constant factor, like 10 or 100.</div><br/><div id="39553655" class="c"><input type="checkbox" id="c-39553655" checked=""/><div class="controls bullet"><span class="by">sakras</span><span>|</span><a href="#39553420">parent</a><span>|</span><a href="#39546957">next</a><span>|</span><label class="collapse" for="c-39553655">[-]</label><label class="expand" for="c-39553655">[2 more]</label></div><br/><div class="children"><div class="content">It sounds like your distinction of tabulation vs memoization is similar to the concept of bottom-up vs top-down DP. Bottom-up: build the table up eagerly, top-down: recurse down and fill in the table lazily.</div><br/><div id="39554063" class="c"><input type="checkbox" id="c-39554063" checked=""/><div class="controls bullet"><span class="by">hinkley</span><span>|</span><a href="#39553420">root</a><span>|</span><a href="#39553655">parent</a><span>|</span><a href="#39546957">next</a><span>|</span><label class="collapse" for="c-39554063">[-]</label><label class="expand" for="c-39554063">[1 more]</label></div><br/><div class="children"><div class="content">Yeah I&#x27;m not sure how widespread his nomenclature was. I was just glad to have more vocabulary for people who have trivialized the entire discipline down to &#x27;caching&#x27;.</div><br/></div></div></div></div></div></div><div id="39546957" class="c"><input type="checkbox" id="c-39546957" checked=""/><div class="controls bullet"><span class="by">luismedel</span><span>|</span><a href="#39553420">prev</a><span>|</span><a href="#39546214">next</a><span>|</span><label class="collapse" for="c-39546957">[-]</label><label class="expand" for="c-39546957">[1 more]</label></div><br/><div class="children"><div class="content">They are extra useful to precalculate other visual effects. In the past, following a magazine tutorial, I coded a very cheap raytraced &quot;lens effect&quot; on a 286. I recently (5 years ago!) ported it to js [0].<p>That magazine got me into fractals and raytracing, BTW.<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;luismedel&#x2F;jslens">https:&#x2F;&#x2F;github.com&#x2F;luismedel&#x2F;jslens</a></div><br/></div></div><div id="39546214" class="c"><input type="checkbox" id="c-39546214" checked=""/><div class="controls bullet"><span class="by">gxs</span><span>|</span><a href="#39546957">prev</a><span>|</span><a href="#39550746">next</a><span>|</span><label class="collapse" for="c-39546214">[-]</label><label class="expand" for="c-39546214">[6 more]</label></div><br/><div class="children"><div class="content">Even in boring old business process land, it’s surprising how useful this is.<p>Often you can simplify a code base full of conditional statements with a tidy lookup table.<p>I think the reason this isn’t always thought of is because a lookup table might end up with 50k rows even for something that might seem simple. This might some like a lot to end users, but thankfully the computer doesn’t mind.<p>Also, the look up tables are so repetitive that the tables are usually pretty easy to manage, and still worth it even when they aren’t.<p>On top of that, they can be configured by end users without code changes.<p>All in all, a really useful concept, especially for a lot of scenarios that always pop up when coding business logic.</div><br/><div id="39546291" class="c"><input type="checkbox" id="c-39546291" checked=""/><div class="controls bullet"><span class="by">chii</span><span>|</span><a href="#39546214">parent</a><span>|</span><a href="#39546694">next</a><span>|</span><label class="collapse" for="c-39546291">[-]</label><label class="expand" for="c-39546291">[4 more]</label></div><br/><div class="children"><div class="content">&gt; On top of that, they can be configured by end users without code changes.<p>and that is how you end up with a DSL.</div><br/><div id="39546395" class="c"><input type="checkbox" id="c-39546395" checked=""/><div class="controls bullet"><span class="by">gxs</span><span>|</span><a href="#39546214">root</a><span>|</span><a href="#39546291">parent</a><span>|</span><a href="#39546694">next</a><span>|</span><label class="collapse" for="c-39546395">[-]</label><label class="expand" for="c-39546395">[3 more]</label></div><br/><div class="children"><div class="content">Here we go, knew someone would jump in here with their opinions on why this is bad etc.<p>You’re reading way too much into this, this simply solves a particular set of problems well in this context and that’s that.<p>Anything you use can get turned into something ugly given enough time and lack of supervision.</div><br/><div id="39547105" class="c"><input type="checkbox" id="c-39547105" checked=""/><div class="controls bullet"><span class="by">chii</span><span>|</span><a href="#39546214">root</a><span>|</span><a href="#39546395">parent</a><span>|</span><a href="#39546694">next</a><span>|</span><label class="collapse" for="c-39547105">[-]</label><label class="expand" for="c-39547105">[2 more]</label></div><br/><div class="children"><div class="content">&gt; their opinions on why this is bad etc.<p>where did i say it&#x27;s bad? DSLs aren&#x27;t inherently bad (or good for that matter).<p>&gt; You’re reading way too much into this<p>i think you&#x27;re projecting your own ideas onto me!</div><br/><div id="39547190" class="c"><input type="checkbox" id="c-39547190" checked=""/><div class="controls bullet"><span class="by">gxs</span><span>|</span><a href="#39546214">root</a><span>|</span><a href="#39547105">parent</a><span>|</span><a href="#39546694">next</a><span>|</span><label class="collapse" for="c-39547190">[-]</label><label class="expand" for="c-39547190">[1 more]</label></div><br/><div class="children"><div class="content">Ha, sorry, guess I was a bit defensive. Forget sometimes not everyone is a jerk by default online.</div><br/></div></div></div></div></div></div></div></div><div id="39546694" class="c"><input type="checkbox" id="c-39546694" checked=""/><div class="controls bullet"><span class="by">oakwhiz</span><span>|</span><a href="#39546214">parent</a><span>|</span><a href="#39546291">prev</a><span>|</span><a href="#39550746">next</a><span>|</span><label class="collapse" for="c-39546694">[-]</label><label class="expand" for="c-39546694">[1 more]</label></div><br/><div class="children"><div class="content">Double buffered lookup tables!</div><br/></div></div></div></div><div id="39550746" class="c"><input type="checkbox" id="c-39550746" checked=""/><div class="controls bullet"><span class="by">vjfms</span><span>|</span><a href="#39546214">prev</a><span>|</span><a href="#39554103">next</a><span>|</span><label class="collapse" for="c-39550746">[-]</label><label class="expand" for="c-39550746">[1 more]</label></div><br/><div class="children"><div class="content">Awesome demonstration!</div><br/></div></div><div id="39554103" class="c"><input type="checkbox" id="c-39554103" checked=""/><div class="controls bullet"><span class="by">sylefeb</span><span>|</span><a href="#39550746">prev</a><span>|</span><a href="#39546181">next</a><span>|</span><label class="collapse" for="c-39554103">[-]</label><label class="expand" for="c-39554103">[1 more]</label></div><br/><div class="children"><div class="content">Lookup tables are great to produce impressive graphics effects under strict 
compute limits. I use them in many FPGA projects. On FPGA there is a balance 
between limited memory (often BRAM) and limited compute, but they can be used to 
great effect:<p>Tunnel effect (exactly as user bemmu described below):<p>- see it live: <a href="https:&#x2F;&#x2F;htmlpreview.github.io&#x2F;?https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gfxcat&#x2F;blob&#x2F;main&#x2F;runtime&#x2F;gfxcat_tunnel.html" rel="nofollow">https:&#x2F;&#x2F;htmlpreview.github.io&#x2F;?https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gf...</a><p>- lookup table: <a href="https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gfxcat&#x2F;blob&#x2F;main&#x2F;tunnel&#x2F;tunnel.h">https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gfxcat&#x2F;blob&#x2F;main&#x2F;tunnel&#x2F;tunnel.h</a><p>- how it is computed: <a href="https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;Silice&#x2F;blob&#x2F;master&#x2F;projects&#x2F;ice-v&#x2F;src&#x2F;pre_tunnel.cc">https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;Silice&#x2F;blob&#x2F;master&#x2F;projects&#x2F;ice-v...</a><p>Julia fractal, with a table to do integer multiply! (2.a.b = (a+b)^2 - a^2 - b^2, so just precompute all x^2 in a table! )<p>- see it live: <a href="https:&#x2F;&#x2F;htmlpreview.github.io&#x2F;?https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gfxcat&#x2F;blob&#x2F;main&#x2F;runtime&#x2F;gfxcat_julia.html" rel="nofollow">https:&#x2F;&#x2F;htmlpreview.github.io&#x2F;?https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gf...</a><p>- code (see &#x27;sq&#x27; table): <a href="https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gfxcat&#x2F;blob&#x2F;main&#x2F;julia&#x2F;julia.c">https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gfxcat&#x2F;blob&#x2F;main&#x2F;julia&#x2F;julia.c</a><p>- credits (mul trick): <a href="http:&#x2F;&#x2F;cowlark.com&#x2F;2018-05-26-bogomandel&#x2F;index.html" rel="nofollow">http:&#x2F;&#x2F;cowlark.com&#x2F;2018-05-26-bogomandel&#x2F;index.html</a><p>In-hardware lookup division for perspective correct texturing!<p>- doom-chip on-ice (rC3 2021 talk): <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=2ZAIIDXoBis" rel="nofollow">https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=2ZAIIDXoBis</a><p>- detailed write up: <a href="https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;tinygpus?tab=readme-ov-file#precomputing-the-per-pixel-division">https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;tinygpus?tab=readme-ov-file#preco...</a><p>- actual lookup table generation: <a href="https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;tinygpus&#x2F;blob&#x2F;498be1b803d0950328ae5f0138ce4e97805ca4cb&#x2F;hardware&#x2F;GPUs&#x2F;dmc-1&#x2F;dmc-1.si#L195">https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;tinygpus&#x2F;blob&#x2F;498be1b803d0950328a...</a><p>Sine tables are also very typical, for animating things on screen or plain
trigonometry, for instance my small fixed integer raytracer uses a sine table
to animate the spheres (and the cos is easy to get from the sin, especially if 
the table has a power of two size ;) ):<p>- see it live: <a href="https:&#x2F;&#x2F;htmlpreview.github.io&#x2F;?https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gfxcat&#x2F;blob&#x2F;main&#x2F;runtime&#x2F;gfxcat_raytrace.html" rel="nofollow">https:&#x2F;&#x2F;htmlpreview.github.io&#x2F;?https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gf...</a><p>- source code: <a href="https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gfxcat&#x2F;blob&#x2F;main&#x2F;raytrace&#x2F;raytrace.c">https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;gfxcat&#x2F;blob&#x2F;main&#x2F;raytrace&#x2F;raytrac...</a><p>And of course procedural textures!! Perlin noise is made of lookup tables, and often multiple lookups are combined to then lookup a clolormap (<a href="https:&#x2F;&#x2F;redirect.cs.umbc.edu&#x2F;~ebert&#x2F;691&#x2F;Au00&#x2F;Notes&#x2F;procedural.html" rel="nofollow">https:&#x2F;&#x2F;redirect.cs.umbc.edu&#x2F;~ebert&#x2F;691&#x2F;Au00&#x2F;Notes&#x2F;procedura...</a>)<p>There are so many other examples. Also, FPGAs are quite literally made 
of LookUp Tables, or LUTs:<p>- <a href="https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;Silice&#x2F;tree&#x2F;master&#x2F;learn-silice#fpga-hardware-design-101">https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;Silice&#x2F;tree&#x2F;master&#x2F;learn-silice#f...</a><p>- <a href="https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;silixel">https:&#x2F;&#x2F;github.com&#x2F;sylefeb&#x2F;silixel</a><p>(edit: formatting)</div><br/></div></div><div id="39546181" class="c"><input type="checkbox" id="c-39546181" checked=""/><div class="controls bullet"><span class="by">qiller</span><span>|</span><a href="#39554103">prev</a><span>|</span><a href="#39546061">next</a><span>|</span><label class="collapse" for="c-39546181">[-]</label><label class="expand" for="c-39546181">[11 more]</label></div><br/><div class="children"><div class="content">Also: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37823805">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=37823805</a> (You probably shouldn&#x27;t use a lookup table (2022))</div><br/><div id="39546316" class="c"><input type="checkbox" id="c-39546316" checked=""/><div class="controls bullet"><span class="by">pvg</span><span>|</span><a href="#39546181">parent</a><span>|</span><a href="#39546318">next</a><span>|</span><label class="collapse" for="c-39546316">[-]</label><label class="expand" for="c-39546316">[9 more]</label></div><br/><div class="children"><div class="content">That&#x27;s about a different, less specific meaning of &#x27;look up table&#x27; (vs. &#x27;LUT&#x27;)</div><br/><div id="39546793" class="c"><input type="checkbox" id="c-39546793" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#39546181">root</a><span>|</span><a href="#39546316">parent</a><span>|</span><a href="#39546318">next</a><span>|</span><label class="collapse" for="c-39546793">[-]</label><label class="expand" for="c-39546793">[8 more]</label></div><br/><div class="children"><div class="content">I was the author of that piece. This blog is about graphics LUTs, which fall into point (4) of the &quot;when to use lookup tables&quot; section. GPUs have dedicated constant memories that were specifically made for holding lookup tables so that they can be accessed quickly and deterministically. Graphics LUTs are a really powerful tool because of that, and have none of the performance shortcomings.</div><br/><div id="39549641" class="c"><input type="checkbox" id="c-39549641" checked=""/><div class="controls bullet"><span class="by">michaelnik</span><span>|</span><a href="#39546181">root</a><span>|</span><a href="#39546793">parent</a><span>|</span><a href="#39547422">next</a><span>|</span><label class="collapse" for="c-39549641">[-]</label><label class="expand" for="c-39549641">[1 more]</label></div><br/><div class="children"><div class="content">Can confirm CPU part. I once tried to replace a 2d stepwise linear function interpolations (basically, a loop finding the right step, then linear interpolation, on a double; the function&#x27;s objective is to rescale inputs before they become regression&#x27;s arguments) by LUTs.<p>All of this looping was happening in another tight loop, and there were multiple LUTs.<p>It was a failure with overall decreased performance and increased cache misses. Plus, I could never get the same precision.</div><br/></div></div><div id="39547422" class="c"><input type="checkbox" id="c-39547422" checked=""/><div class="controls bullet"><span class="by">Anotheroneagain</span><span>|</span><a href="#39546181">root</a><span>|</span><a href="#39546793">parent</a><span>|</span><a href="#39549641">prev</a><span>|</span><a href="#39546318">next</a><span>|</span><label class="collapse" for="c-39547422">[-]</label><label class="expand" for="c-39547422">[6 more]</label></div><br/><div class="children"><div class="content">Why can&#x27;t CPUs be told what to cache? Is it because the instruction sets are obsolete, or is there a technical reason why they can&#x27;t be added?</div><br/><div id="39547922" class="c"><input type="checkbox" id="c-39547922" checked=""/><div class="controls bullet"><span class="by">djmips</span><span>|</span><a href="#39546181">root</a><span>|</span><a href="#39547422">parent</a><span>|</span><a href="#39556771">next</a><span>|</span><label class="collapse" for="c-39547922">[-]</label><label class="expand" for="c-39547922">[1 more]</label></div><br/><div class="children"><div class="content">It could be added and it was a feature on the Gamecube CPU for example - you were able to lock the cache and then, IIRC, half the cache was used as normal and half was at your disposal for very fast access to look up tables or data you were using over and over again. Some code to deform 3D meshes when animating them using a skeleton used the locked cache to speed up that operation greatly by having the bone matrices at hand.<p>A problem I imagine on modern processors is the cache might be shared amongst several cores and interrupts etc.<p>Back in the nineties, 3DFX made a speed of light rendering demo for the Voodoo1 where they took over the entire machine and through intimate knowledge of cache behaviour effectively set aside an area in the L1 cache that would contain some data they could stream in and speed up their triangle setup.</div><br/></div></div><div id="39556771" class="c"><input type="checkbox" id="c-39556771" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#39546181">root</a><span>|</span><a href="#39547422">parent</a><span>|</span><a href="#39547922">prev</a><span>|</span><a href="#39548824">next</a><span>|</span><label class="collapse" for="c-39556771">[-]</label><label class="expand" for="c-39556771">[1 more]</label></div><br/><div class="children"><div class="content">The real probable reason is that you will do it badly. The PREFETCH instructions are the closest things, which are mostly just a hint to the prefetcher. If you had actual cache control (on multi-tenant systems especially), programmers would probably overuse it.</div><br/></div></div><div id="39548824" class="c"><input type="checkbox" id="c-39548824" checked=""/><div class="controls bullet"><span class="by">pjc50</span><span>|</span><a href="#39546181">root</a><span>|</span><a href="#39547422">parent</a><span>|</span><a href="#39556771">prev</a><span>|</span><a href="#39546318">next</a><span>|</span><label class="collapse" for="c-39548824">[-]</label><label class="expand" for="c-39548824">[3 more]</label></div><br/><div class="children"><div class="content">You absolutely can tell the CPU what to cache, and also what not to cache (such as PCIe memory-mapped registers), it&#x27;s just that that&#x27;s privileged instructions which no sensible multitasking operating system will let you have access to. Because it would have to be reset on every task switch.</div><br/><div id="39549337" class="c"><input type="checkbox" id="c-39549337" checked=""/><div class="controls bullet"><span class="by">bombcar</span><span>|</span><a href="#39546181">root</a><span>|</span><a href="#39548824">parent</a><span>|</span><a href="#39546318">next</a><span>|</span><label class="collapse" for="c-39549337">[-]</label><label class="expand" for="c-39549337">[2 more]</label></div><br/><div class="children"><div class="content">I’m still disappointed that you can’t boot a modern processor with its 8MB of L2 cache and run Windows 95 entirely in cache. Stupid requirements to have a backing store.</div><br/><div id="39549821" class="c"><input type="checkbox" id="c-39549821" checked=""/><div class="controls bullet"><span class="by">pclmulqdq</span><span>|</span><a href="#39546181">root</a><span>|</span><a href="#39549337">parent</a><span>|</span><a href="#39546318">next</a><span>|</span><label class="collapse" for="c-39549821">[-]</label><label class="expand" for="c-39549821">[1 more]</label></div><br/><div class="children"><div class="content">I think if you flip the right MSRs, you can actually run in this mode on Intel. BIOSes used to do DDR3 calibration in this mode, and needed to run a core DRAM-less to do it.<p>AMD Zen platforms have always put that functionality (ironically) in the secret platform security coprocessor.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div id="39550383" class="c"><input type="checkbox" id="c-39550383" checked=""/><div class="controls bullet"><span class="by">lulznews</span><span>|</span><a href="#39546061">prev</a><span>|</span><label class="collapse" for="c-39550383">[-]</label><label class="expand" for="c-39550383">[2 more]</label></div><br/><div class="children"><div class="content">TLDR?</div><br/></div></div></div></div></div></div></div></body></html>