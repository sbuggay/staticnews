<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1685955681113" as="style"/><link rel="stylesheet" href="styles.css?v=1685955681113"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://renato.athaydes.com/posts/writing-your-own-smarthome-manager.html">I wrote my own smart home software</a> <span class="domain">(<a href="https://renato.athaydes.com">renato.athaydes.com</a>)</span></div><div class="subtext"><span>thunderbong</span> | <span>75 comments</span></div><br/><div><div id="36193985" class="c"><input type="checkbox" id="c-36193985" checked=""/><div class="controls bullet"><span class="by">lynx23</span><span>|</span><a href="#36193501">next</a><span>|</span><label class="collapse" for="c-36193985">[-]</label><label class="expand" for="c-36193985">[1 more]</label></div><br/><div class="children"><div class="content">The &quot;framework effect&quot; seems to be a thing these days, not only with SPAs using the newest JS framework.<p>When I stumbled across an HN article describing a CLI app for the OpenAI API, I thought that is just what I was waiting for.  Unfortunately, when I tried it, it didn&#x27;t work for me.  After a debugging session, I found a bug in the openai python package which led to my key not being used if I have ~&#x2F;.netrc exists.  Pretty much a demonstration of the &quot;framework effect&quot;.  The simplest things, read CLI tools, become buggy in subtle ways because you inherit <i>every</i> bug deep down in the dependency chain.  I ended up implementing my own OpenAI API CLI client in just a few lines of shell.  Much easier to review, and almost impossible to have subtle hidden bugs.<p><a href="https:&#x2F;&#x2F;github.com&#x2F;mlang&#x2F;openai-kiss">https:&#x2F;&#x2F;github.com&#x2F;mlang&#x2F;openai-kiss</a></div><br/></div></div><div id="36193501" class="c"><input type="checkbox" id="c-36193501" checked=""/><div class="controls bullet"><span class="by">01100011</span><span>|</span><a href="#36193985">prev</a><span>|</span><a href="#36193868">next</a><span>|</span><label class="collapse" for="c-36193501">[-]</label><label class="expand" for="c-36193501">[5 more]</label></div><br/><div class="children"><div class="content">I ran a HA system for a couple years at my last place.  It was great when it worked, but I found it to be fragile, overly complicated, and not well engineered.  I&#x27;m biased I guess, as I have mostly worked on embedded software and devices that need to be reliable.  It&#x27;s great if you like &#x27;shake and bake&#x27; style open source projects that barely work and have a lot of time to tinker with them.  I prefer my home automation to work 99.9% of the time and not require large, periodic time investments.<p>HA, out of the box, also seems to burn up solid state storage due to the absurd amount of logging.<p>HA looks sexy though, and I think that entices folks.  It&#x27;s nice to have a star-trek style dashboard running on a tablet or whatever.  That&#x27;s not really appealing to me though.  I like my automation to have beautiful software, be well tested and reliable, and disappear into the background of my life.  Being a SW guy at my day job, I really don&#x27;t want to play SW engineer on the nights and weekends.</div><br/><div id="36193844" class="c"><input type="checkbox" id="c-36193844" checked=""/><div class="controls bullet"><span class="by">sgt</span><span>|</span><a href="#36193501">parent</a><span>|</span><a href="#36193534">next</a><span>|</span><label class="collapse" for="c-36193844">[-]</label><label class="expand" for="c-36193844">[1 more]</label></div><br/><div class="children"><div class="content">How about just using e.g. your Apple TV as a hub, to connect to Homekit devices. I&#x27;m probably going to do that. You can also build your own devices(*) that connect directly to the Homekit hub without having a bridge or any kind of other software running.<p>(*) Example; ESP32 with HomeSpan</div><br/></div></div><div id="36193534" class="c"><input type="checkbox" id="c-36193534" checked=""/><div class="controls bullet"><span class="by">aulin</span><span>|</span><a href="#36193501">parent</a><span>|</span><a href="#36193844">prev</a><span>|</span><a href="#36193868">next</a><span>|</span><label class="collapse" for="c-36193534">[-]</label><label class="expand" for="c-36193534">[3 more]</label></div><br/><div class="children"><div class="content">So what&#x27;s this beautiful, tested and reliable alternative to Home Assistant? did you ever find it? Guess baking your own like OP did is out of the way as per your last sentence.</div><br/><div id="36193733" class="c"><input type="checkbox" id="c-36193733" checked=""/><div class="controls bullet"><span class="by">theshrike79</span><span>|</span><a href="#36193501">root</a><span>|</span><a href="#36193534">parent</a><span>|</span><a href="#36193816">next</a><span>|</span><label class="collapse" for="c-36193733">[-]</label><label class="expand" for="c-36193733">[1 more]</label></div><br/><div class="children"><div class="content">If Apple Home, Google Home and Alexa aren&#x27;t enough for you (or you want a fully self-hosted option) you don&#x27;t really have many options.<p>Home Assistant is the big one, biggest community, most integrations, you can pay for their cloud stuff to get easy integrations to the big corps above. They also have a dedicated device they sell you can use to run HA.<p>Domoticz is a bit of an odd bird, I never figured out what was their value propositon<p>OpenHAB is the one I&#x27;d pick if I had to install a system for someone else than myself. It&#x27;s not exactly easy to configure (the object&#x2F;entity structure is a bit weird IMO), but it has a pretty decent amount of integrations and it&#x27;s rock solid German engineering made with boring old Java.<p>If you want control, my suggestion is to use HA only for the integrations and do all of the brains somewhere else. Either a self-made program that pokes HA using its API or directly via MQTT or Node RED.</div><br/></div></div><div id="36193816" class="c"><input type="checkbox" id="c-36193816" checked=""/><div class="controls bullet"><span class="by">01100011</span><span>|</span><a href="#36193501">root</a><span>|</span><a href="#36193534">parent</a><span>|</span><a href="#36193733">prev</a><span>|</span><a href="#36193868">next</a><span>|</span><label class="collapse" for="c-36193816">[-]</label><label class="expand" for="c-36193816">[1 more]</label></div><br/><div class="children"><div class="content">Never found one.  It&#x27;s on my list of things to do someday but that list only grows.  I keep telling myself retirement will be a great chance to develop sw like that and give back.</div><br/></div></div></div></div></div></div><div id="36193868" class="c"><input type="checkbox" id="c-36193868" checked=""/><div class="controls bullet"><span class="by">tga</span><span>|</span><a href="#36193501">prev</a><span>|</span><a href="#36192189">next</a><span>|</span><label class="collapse" for="c-36193868">[-]</label><label class="expand" for="c-36193868">[1 more]</label></div><br/><div class="children"><div class="content">My &quot;HA&quot; setup is really driven by Zigbee2MQTT -- most of my lights, devices (light switches, washer, dryer) and sensors (temperature, motion, doors&#x2F;windows, water leaks) are all random Zigbee devices that Zigbee2MQTT does a wonderful job talking to, without any need for vendor software or services.<p><a href="https:&#x2F;&#x2F;www.zigbee2mqtt.io&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.zigbee2mqtt.io&#x2F;</a><p>I happen to use Node-RED for automation -- this is the easiest part to replace, it could just as well be Mako, pyscript, AppDaemon, NetDaemon, or plain Python scripts talking to the MQTT server.<p>What I can&#x27;t easily replace from HA is the nice UI, both over the web and as an app (same thing really). I guess Mako makes it possible to hack together a web interface, but it&#x27;s a lot of work for a poor result when compared to what you get with HA (or OpenHab) out of the box.<p>I would love to find a simpler, MQTT driven &quot;HMI&quot; app for both web and mobile, completely disconnected from the logic behind.</div><br/></div></div><div id="36192189" class="c"><input type="checkbox" id="c-36192189" checked=""/><div class="controls bullet"><span class="by">nevi-me</span><span>|</span><a href="#36193868">prev</a><span>|</span><a href="#36192000">next</a><span>|</span><label class="collapse" for="c-36192189">[-]</label><label class="expand" for="c-36192189">[9 more]</label></div><br/><div class="children"><div class="content">Not to sound negative, it reads like the author quickly dismissed HA without a great reason so they could build their solution.<p>There&#x27;s a lot of home devices beyond ZigBee, with a large community supporting them.
Beyond ZigBee, we will see Matter devices also cropping up over time.<p>I do like the idea of being in control of one&#x27;s automation software. The risk that I&#x27;ve seen though is when one ends up spending more time on building the software than the automation, which can happen when one writes their own integrations from scratch (i.e. not using Z2MQTY, ESPHome, HA, etc).<p>With that all said, I like HA as the central programmable hub, but have come to dislike the proliferation of ecosystems that require add-ons
 I&#x27;m mostly looking at Sonoff devices that tie you to ewelink and phone home in opaque ways.<p>I&#x27;m personally probably going to go with Matter for store-purchased and DIY devices. I&#x27;m already nearly done with our first DIY devices at home. A light strip for the kitchen, that has some sensors for useful automation.<p>Not rolling my own solution makes it easier for me to build a few devices for friends later.</div><br/><div id="36192347" class="c"><input type="checkbox" id="c-36192347" checked=""/><div class="controls bullet"><span class="by">theshrike79</span><span>|</span><a href="#36192189">parent</a><span>|</span><a href="#36192495">next</a><span>|</span><label class="collapse" for="c-36192347">[-]</label><label class="expand" for="c-36192347">[5 more]</label></div><br/><div class="children"><div class="content">HA is _very_ good for integrating stuff, mostly due to it being the de facto standard for DIY home automation. Basically if something has any kind of API that can be accessed in any way, someone has already made a HA integration for it.<p>On the other hand, it&#x27;s absolutely crap at doing complex automations. The Web UI gives me heartburn any time I need to make it do anything else than simple &quot;if temperature is over 40 on this, do this&quot; things.<p>The UI does make complex automations _possible_ for non-programmers. But for me, every time I click on the UI or attempt to &quot;program&quot; using the convoluted YAML syntax I keep thinking &quot;this would&#x27;ve been like 5 lines in an actual language...&quot;.<p>Thus: I use Node RED for the more complex stuff paired with an external program I made that connects to the HA Mosquitto server and pokes stuff directly when needed.</div><br/><div id="36192510" class="c"><input type="checkbox" id="c-36192510" checked=""/><div class="controls bullet"><span class="by">dingledork69</span><span>|</span><a href="#36192189">root</a><span>|</span><a href="#36192347">parent</a><span>|</span><a href="#36192463">next</a><span>|</span><label class="collapse" for="c-36192510">[-]</label><label class="expand" for="c-36192510">[3 more]</label></div><br/><div class="children"><div class="content">Pyscript adds rich Python scripting to HASS : <a href="https:&#x2F;&#x2F;github.com&#x2F;custom-components&#x2F;pyscript">https:&#x2F;&#x2F;github.com&#x2F;custom-components&#x2F;pyscript</a><p>An example script:<p><pre><code>    @state_trigger(&quot;security.rear_motion == &#x27;1&#x27; or security.side_motion == &#x27;1&#x27;&quot;)
    @time_active(&quot;range(sunset - 20min, sunrise + 20min)&quot;)
    def motion_light_rear():
        &quot;&quot;&quot;Turn on rear light for 5 minutes when there is motion and it&#x27;s dark&quot;&quot;&quot;
        task.unique(&quot;motion_light_rear&quot;)
        log.info(f&quot;triggered; turning on the light&quot;)
        if light.outside_rear != &quot;on&quot;:
            light.turn_on(entity_id=&quot;light.outside_rear&quot;, brightness=255)
        task.sleep(300)
        light.turn_off(entity_id=&quot;light.outside_rear&quot;)
</code></pre>
It&#x27;s what made me ditch node red after going down the same path.</div><br/><div id="36193166" class="c"><input type="checkbox" id="c-36193166" checked=""/><div class="controls bullet"><span class="by">Larrikin</span><span>|</span><a href="#36192189">root</a><span>|</span><a href="#36192510">parent</a><span>|</span><a href="#36193034">next</a><span>|</span><label class="collapse" for="c-36193166">[-]</label><label class="expand" for="c-36193166">[1 more]</label></div><br/><div class="children"><div class="content">Can anyone comment on whether Pyscript vs AppDaemon is the better path? It felt like to me as someone that codes as a living PyScript was the better choice, but I also only ever used Python in college and grad school, and just haven&#x27;t had the time to investigate a difference between the two and wanted to just get started. Using PyScript seems easy but it also feels like its just the main authors preferred way of working and is pretty buggy outside of how he likes to work in Jupyter notebooks<p>The Home Assistant community seems to have the entire gambit of people who can&#x27;t code at all, the people who never coded professionally and make riduclously complex things like the fabled Excel accountants, to the professional developers doing stuff for fun, but nobody actually shares anything worthwhile outside of awful YAML and youtubes about awful YAML.</div><br/></div></div><div id="36193034" class="c"><input type="checkbox" id="c-36193034" checked=""/><div class="controls bullet"><span class="by">Denvercoder9</span><span>|</span><a href="#36192189">root</a><span>|</span><a href="#36192510">parent</a><span>|</span><a href="#36193166">prev</a><span>|</span><a href="#36192463">next</a><span>|</span><label class="collapse" for="c-36193034">[-]</label><label class="expand" for="c-36193034">[1 more]</label></div><br/><div class="children"><div class="content">There&#x27;s also NetDaemon for those who prefer C#: <a href="https:&#x2F;&#x2F;netdaemon.xyz&#x2F;" rel="nofollow">https:&#x2F;&#x2F;netdaemon.xyz&#x2F;</a></div><br/></div></div></div></div><div id="36192463" class="c"><input type="checkbox" id="c-36192463" checked=""/><div class="controls bullet"><span class="by">katbyte</span><span>|</span><a href="#36192189">root</a><span>|</span><a href="#36192347">parent</a><span>|</span><a href="#36192510">prev</a><span>|</span><a href="#36192495">next</a><span>|</span><label class="collapse" for="c-36192463">[-]</label><label class="expand" for="c-36192463">[1 more]</label></div><br/><div class="children"><div class="content">Yea I kinda wish you could just write code for it. I’d even accept writing it in python as that’s what ya is written in (as I too don’t like python)</div><br/></div></div></div></div><div id="36192495" class="c"><input type="checkbox" id="c-36192495" checked=""/><div class="controls bullet"><span class="by">toast0</span><span>|</span><a href="#36192189">parent</a><span>|</span><a href="#36192347">prev</a><span>|</span><a href="#36193150">next</a><span>|</span><label class="collapse" for="c-36192495">[-]</label><label class="expand" for="c-36192495">[1 more]</label></div><br/><div class="children"><div class="content">Their reasons for dismissing HA seem sound to me. Python is a negative for some people. Suggesting to run in docker is a negative for some people.<p>Personally, I gave in and installed HA in a VM, because it seemed like the least effort way to use HomeKit capable devices without purchasing Apple products, and I was able to connect the HomeKit things, but I can&#x27;t figure out how to do what I want with them, so I not sure what I got. Ideally, I want to make my &#x27;smart&#x27; thermostats a bit smarter ... better coordination between zones, different minimum fan runtime rules than I can get from the thermostat, loosen the setpoints when the tv is on or someone is on the phone, so the hvac noise is less bothersome, etc. But I can&#x27;t figure out how to get HA to track the fan runtime, so all that complexity is like ugh, I&#x27;d be better off doing it myself, except the homekit stuff isn&#x27;t sensible either.</div><br/></div></div><div id="36193150" class="c"><input type="checkbox" id="c-36193150" checked=""/><div class="controls bullet"><span class="by">piceas</span><span>|</span><a href="#36192189">parent</a><span>|</span><a href="#36192495">prev</a><span>|</span><a href="#36192000">next</a><span>|</span><label class="collapse" for="c-36193150">[-]</label><label class="expand" for="c-36193150">[2 more]</label></div><br/><div class="children"><div class="content">The risk is real and reasonable if one is willing to rationalise it as a hobby &#x2F; learning &#x2F; playing with hardware and a trivial amount of soldering.<p>In my case I wanted to play with sensors and the pico w. A pi with a sprinkling of c#, Nats, and influxdb connects, controls Ikea stuff, and reports all the things.<p>Micropython on the pico is not my favourite part of the process but it might have been faster for me than just writing in c.</div><br/><div id="36193402" class="c"><input type="checkbox" id="c-36193402" checked=""/><div class="controls bullet"><span class="by">lloydatkinson</span><span>|</span><a href="#36192189">root</a><span>|</span><a href="#36193150">parent</a><span>|</span><a href="#36192000">next</a><span>|</span><label class="collapse" for="c-36193402">[-]</label><label class="expand" for="c-36193402">[1 more]</label></div><br/><div class="children"><div class="content">That’s cool - I’ve done something very similar and used the Worker Service project type along with Quartz .NET for scheduling.</div><br/></div></div></div></div></div></div><div id="36192000" class="c"><input type="checkbox" id="c-36192000" checked=""/><div class="controls bullet"><span class="by">nvy</span><span>|</span><a href="#36192189">prev</a><span>|</span><a href="#36193997">next</a><span>|</span><label class="collapse" for="c-36192000">[-]</label><label class="expand" for="c-36192000">[12 more]</label></div><br/><div class="children"><div class="content">I too balked at the absurd complexity in the HomeAssistant stack, and it&#x27;s kinda kept me off the &quot;smart home&quot; train because I refuse to buy into somebody&#x27;s walled garden.<p>As a result the sum total of smartness in my home is... A little STM32 Blue Pill that reports whether or not the basement door is locked or not.  Yay?<p>Edit: oh and the raspberry pi that measures the moisture in the soil of my beloved Norfolk Island Spruce and tells me over IRC when it needs water.</div><br/><div id="36193013" class="c"><input type="checkbox" id="c-36193013" checked=""/><div class="controls bullet"><span class="by">Denvercoder9</span><span>|</span><a href="#36192000">parent</a><span>|</span><a href="#36193097">next</a><span>|</span><label class="collapse" for="c-36193013">[-]</label><label class="expand" for="c-36193013">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I too balked at the absurd complexity in the HomeAssistant stack<p>You can ditch their whole OS, management and orchestration&#x2F;containerization stack, and just run it as a Python application in a virtualenv (they call it &quot;Home Assistant Core&quot;). I recommend it, it&#x27;s much better than trying to keep up with their (mediocre, imo) distribution. Even if you don&#x27;t want to manually setup a virtualenv, you can run it as a single container.</div><br/></div></div><div id="36193097" class="c"><input type="checkbox" id="c-36193097" checked=""/><div class="controls bullet"><span class="by">prmoustache</span><span>|</span><a href="#36192000">parent</a><span>|</span><a href="#36193013">prev</a><span>|</span><a href="#36192514">next</a><span>|</span><label class="collapse" for="c-36193097">[-]</label><label class="expand" for="c-36193097">[8 more]</label></div><br/><div class="children"><div class="content">What kept me for the smart home train is the lack of need.<p>I am still trying to grasp what it would improve to my life</div><br/><div id="36193890" class="c"><input type="checkbox" id="c-36193890" checked=""/><div class="controls bullet"><span class="by">PMunch</span><span>|</span><a href="#36192000">root</a><span>|</span><a href="#36193097">parent</a><span>|</span><a href="#36193425">next</a><span>|</span><label class="collapse" for="c-36193890">[-]</label><label class="expand" for="c-36193890">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been into home automation stuff for a while, and it certainly feels like this with a lot of products&#x2F;services. Part of it is definitely just the feeling of living in the future.<p>That said some stuff is really nice, but typically require more than your average &quot;smart home&quot;. In my mind I&#x27;ve made a distinction between &quot;smart home&quot; and &quot;convoluted home&quot; devices. A &quot;convoluted home&quot; device would be something like an app controlled light. The simple one-step process of flicking a switch is now a multi-step process of unlocking your phone, finding the app, and turning it off. Sure it has more features like changing the temperature or colour of the light, but it&#x27;s not &quot;smart&quot;.<p>The &quot;smart&quot; part of a system comes with interactions and logic between systems. An example that I have in my house is that my phone sends the time of the next alarm and an event whenever it is connected or disconnected from a charger. So half an hour before my alarm goes of the lights in the bedroom slowly dim up, waking me up gently. When the alarm rings it will turn on the rest of the lights in my house to full brightness and white light. Then in the evening, at a set time, the lights will start getting warmer, and then dim down helping me get sleepy before bedtime. And then when I connect my phone to my charger at night the lights in the whole house turns of. This is &quot;smart&quot;. It means I barely if ever touch light switches any longer, don&#x27;t have to remember to turn of lights at night, and that my natural day&#x2F;night cycle works better.<p>With presence detection based on whether the phone is connected to the WiFi you could also turn lights off completely while I&#x27;m gone. With controllable ovens you could extend the system to turn down the heat to save power. The list goes on and on, but the thing which makes it all possible is not so much the &quot;smart&quot;-ness of the individual device, but the combined &quot;smart&quot; of all the interconnected systems.</div><br/></div></div><div id="36193425" class="c"><input type="checkbox" id="c-36193425" checked=""/><div class="controls bullet"><span class="by">LeafItAlone</span><span>|</span><a href="#36192000">root</a><span>|</span><a href="#36193097">parent</a><span>|</span><a href="#36193890">prev</a><span>|</span><a href="#36193783">next</a><span>|</span><label class="collapse" for="c-36193425">[-]</label><label class="expand" for="c-36193425">[1 more]</label></div><br/><div class="children"><div class="content">I was like that too, for a long time.
But for me, it comes down convenience, rather than <i>need</i>.<p>Some examples:
1. I have a smart lock on the front door. Now when friends&#x2F;family want to visit and I’m not around, I don’t need to hide a key that they then can lose. They just get a code that I can have expire when they leave.
2. I am constantly either too hot or too cold. Being able to change the thermostat from where I am means I don’t have to interrupt whatever I’m doing and walk across the house.
3. Same with lights. I can climb into bed, tell my phone “goodnight”, and it shuts off all lights and locks the door.<p>Again, nothing that is “necessary”, and sometimes I feel lazy because of it, but it results in fewer interruptions.<p>The one use case I use that I can’t really replicate without smart home, is being able to remotely toggle power. Smart outlets mean I can hard reset an unresponsive server, camera, or other device.</div><br/></div></div><div id="36193783" class="c"><input type="checkbox" id="c-36193783" checked=""/><div class="controls bullet"><span class="by">alkonaut</span><span>|</span><a href="#36192000">root</a><span>|</span><a href="#36193097">parent</a><span>|</span><a href="#36193425">prev</a><span>|</span><a href="#36193765">next</a><span>|</span><label class="collapse" for="c-36193783">[-]</label><label class="expand" for="c-36193783">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s definitely the sound approach. But there tends to eventually be a few gadgets here and there that have clear benefits. Not the whole voice-controlled whole house lighting effect things that might be the typical showcases, but for example controlling two aircon units with different manufacturers in one place instead of having to use either to remotes or two apps. Because the smart tech tends to creep into peoples home whether they want it or not these days. Maybe the aircon comes without a remote (the app is the remote).<p>Most obviously then use the manufcturer&#x27;s default setup which is each manufacturer having their own &quot;smart&quot; apps for their gadgets. What&#x27;s worse is that each of them tend to think that <i>their</i> apps and products should be at the center of the stack, so each manufacturer of window blinds, air cons or routers have their own (terrible) closed version of Home Assistant. But nothing properly integrates everything and you are left with one app to control your AC and another for some lighting and a third for your garage door.<p>So when I use Home Assistant it&#x27;s really because I want to use <i>less</i> smart tech. I want very few smart features but I want to use just one app for the smart features I do need, and I want to avoid using an app at all if I can help it. So I don&#x27;t want to dig up and use 10 apps for gadgets around my house. I have zero interest in voice controlling anything. For example I want the lights to switch off when I leave (arm the alarm). I want anything that would be an alarm (Fridge too warm, smoke detector beeping) to also go off in my pocket. That peace of mind stuff. That&#x27;s easy with HA.</div><br/></div></div><div id="36193765" class="c"><input type="checkbox" id="c-36193765" checked=""/><div class="controls bullet"><span class="by">theshrike79</span><span>|</span><a href="#36192000">root</a><span>|</span><a href="#36193097">parent</a><span>|</span><a href="#36193783">prev</a><span>|</span><a href="#36193767">next</a><span>|</span><label class="collapse" for="c-36193765">[-]</label><label class="expand" for="c-36193765">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s the small things.<p>1. My hallway lights come up at the correct intensity and light temp for the day every time there is motion. They also turn off at different speeds depending on the time of day. (at night, min brightness, yellow light, turn off after 30 seconds - someone is just waddling to the bathroom. in the day, full brightness, 6500K light, turn off after 5 mins)<p>2. I can control my AC remotely with my phone and it automatically manages itself depending on the price of the electricity (I&#x27;m on a hourly market-rate plan). If the price is low, it&#x27;ll over-cool my house at night and cost for the morning.<p>3. Voice-controlled profiles for complex setups. Gaming = pull down the curtain on the window that shines on the TV, turn off a few lights that glare on it. Movies = all curtains down, all lights off. Even the one from the bedroom, because it shines to the couch in full darkness.<p>4. Smart switches that turn off lights that don&#x27;t have a direct electrical connection.<p>5. A switch beside the door that turns off all lights and a few appliances in the kitchen that have no business being powered when I&#x27;m not at home.</div><br/></div></div><div id="36193767" class="c"><input type="checkbox" id="c-36193767" checked=""/><div class="controls bullet"><span class="by">zimpenfish</span><span>|</span><a href="#36192000">root</a><span>|</span><a href="#36193097">parent</a><span>|</span><a href="#36193765">prev</a><span>|</span><a href="#36193494">next</a><span>|</span><label class="collapse" for="c-36193767">[-]</label><label class="expand" for="c-36193767">[1 more]</label></div><br/><div class="children"><div class="content">&gt; I am still trying to grasp what it would improve to my life<p>HomeAssistant does the following for me:<p>+ captures all the weather stuff into one page (internal + external sensors combined with &quot;official&quot; weather reports)
+ automates the little fan heater to warm up the bedroom pre-bedtime if required
(also provides all the controls on a page)
+ captures the oven temp probes onto a page (means you don&#x27;t have to walk into the kitchen to check)<p>I can do all these individually but that&#x27;d still be a &quot;smart home&quot;, just more faff for me.</div><br/></div></div><div id="36193494" class="c"><input type="checkbox" id="c-36193494" checked=""/><div class="controls bullet"><span class="by">nvy</span><span>|</span><a href="#36192000">root</a><span>|</span><a href="#36193097">parent</a><span>|</span><a href="#36193767">prev</a><span>|</span><a href="#36192514">next</a><span>|</span><label class="collapse" for="c-36193494">[-]</label><label class="expand" for="c-36193494">[2 more]</label></div><br/><div class="children"><div class="content">&gt;I am still trying to grasp what it would improve to my life<p>I mean yeah, once the novelty wears off of having Siri turn off your lights to impress your boomer neighbours, or whatever, there seems to be no real &quot;killer app&quot; for home automation.<p>However there are a lot of small things I wouldn&#x27;t mind having:<p>- The aforementioned &quot;hey your tree is too dry&quot; push notifications on my phone<p>- No need to get out of bed to check the downstairs deadbolt(s)<p>- Automatic and&#x2F;or manually-controlled activation of garden bed hoses with some kind of zigbee solenoid valve or something</div><br/><div id="36193638" class="c"><input type="checkbox" id="c-36193638" checked=""/><div class="controls bullet"><span class="by">lostlogin</span><span>|</span><a href="#36192000">root</a><span>|</span><a href="#36193494">parent</a><span>|</span><a href="#36192514">next</a><span>|</span><label class="collapse" for="c-36193638">[-]</label><label class="expand" for="c-36193638">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Automatic and&#x2F;or manually-controlled activation of garden bed hoses with some kind of zigbee solenoid valve or something<p>A basic smart plug does this for me. I hooked one up to a cheap solenoid that opens a valve when powered up.<p>It was very inexpensive and had been very reliable. It’s just on a TP-Link Kasa smart plug.<p>It’s also in HA so that if I forget to turn it off, it turns itself off after 10 mins.</div><br/></div></div></div></div></div></div><div id="36192514" class="c"><input type="checkbox" id="c-36192514" checked=""/><div class="controls bullet"><span class="by">acidburnNSA</span><span>|</span><a href="#36192000">parent</a><span>|</span><a href="#36193097">prev</a><span>|</span><a href="#36192246">next</a><span>|</span><label class="collapse" for="c-36192514">[-]</label><label class="expand" for="c-36192514">[1 more]</label></div><br/><div class="children"><div class="content">I got into HomeAssistant in the early days, maybe around 2015. As such, I&#x27;ve stayed with the simpler installation method just make a hass venv and pip install homeassistant into it. This has mostly worked ok for years, and I&#x27;ve raised eyebrows as they&#x27;ve pushed more people to their linux distro, hoping they wouldn&#x27;t stop supporting the basic installation method. I did finally have to install one docker thing to keep zwave working after support for the (legitimately bad) python-openzwave lib was deprecated.</div><br/></div></div></div></div><div id="36193997" class="c"><input type="checkbox" id="c-36193997" checked=""/><div class="controls bullet"><span class="by">lloydatkinson</span><span>|</span><a href="#36192000">prev</a><span>|</span><a href="#36192239">next</a><span>|</span><label class="collapse" for="c-36193997">[-]</label><label class="expand" for="c-36193997">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s UI is very much &quot;programmer art&quot;.</div><br/></div></div><div id="36192239" class="c"><input type="checkbox" id="c-36192239" checked=""/><div class="controls bullet"><span class="by">timzaman</span><span>|</span><a href="#36193997">prev</a><span>|</span><a href="#36193067">next</a><span>|</span><label class="collapse" for="c-36192239">[-]</label><label class="expand" for="c-36192239">[9 more]</label></div><br/><div class="children"><div class="content">&gt; The biggest problem with HomeAssistant, however, is its really overengineered setup for running on mini computers like the Raspberry Pi, which was my goal.<p>False, i ran mine on rpi for 2 years now with many sensors. Zero issues and not even close to maxing out the pi.<p>&gt; I have a strong aversion to Python due to its horrendous package management history (we use dozens of languages at work, guess which language is the only one that causes build issues all the time?). It’s a nice language, but for things like home automation, having build&#x2F;dependencies problems is the absolute last thing I need.<p>Not sound reasoning imo, this is mangable if you know what you&#x27;re doing. Clearly, HA doesnt have any problems related to this version management.</div><br/><div id="36193811" class="c"><input type="checkbox" id="c-36193811" checked=""/><div class="controls bullet"><span class="by">jve</span><span>|</span><a href="#36192239">parent</a><span>|</span><a href="#36192520">next</a><span>|</span><label class="collapse" for="c-36193811">[-]</label><label class="expand" for="c-36193811">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  first, it’s based on Python. I have a strong aversion to Python<p>Yeah, that&#x27;s how we engineers feel - if it ain&#x27;t my eavorite&#x2F;elegant language, BYO... Program :)<p>&gt; overengineered<p>Yeah, I also ran off of RPI4 for a few years, along with MQTT, Nextcloud (+SQL), photoprism, bitwarden and whatever needed for proxying via nginx. I only migrated to better hardware because I wanted to browse my pictures faster, photoprism solved that even on RPI, but I wanted faster indexing and offline face recognition where RPI turned out to have too little RAM.<p>On normal load, my RPI would still have room for other containers.<p>Having HA within a container was a feature - not too much to configure and everything is isolated, so I can still run other services from RPI. And easy upgrades.</div><br/></div></div><div id="36192520" class="c"><input type="checkbox" id="c-36192520" checked=""/><div class="controls bullet"><span class="by">acidburnNSA</span><span>|</span><a href="#36192239">parent</a><span>|</span><a href="#36193811">prev</a><span>|</span><a href="#36193016">next</a><span>|</span><label class="collapse" for="c-36192520">[-]</label><label class="expand" for="c-36192520">[1 more]</label></div><br/><div class="children"><div class="content">Agreed, package management is fine. Just make a home assistant virtual environment and you&#x27;re done.<p><pre><code>  python -m venv &#x2F;opt&#x2F;venvs&#x2F;hass
  source &#x2F;opt&#x2F;venvs&#x2F;hass&#x2F;bin&#x2F;activate
  pip install homeassistant
</code></pre>
boom done.</div><br/></div></div><div id="36193016" class="c"><input type="checkbox" id="c-36193016" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#36192239">parent</a><span>|</span><a href="#36192520">prev</a><span>|</span><a href="#36193067">next</a><span>|</span><label class="collapse" for="c-36193016">[-]</label><label class="expand" for="c-36193016">[6 more]</label></div><br/><div class="children"><div class="content">&gt; Not sound reasoning imo, this is mangable if you know what you&#x27;re doing.<p>I dunno; if the author is correct about this bit:<p>&gt; The recommended way to run it is with a fleet of Docker containers (and they even tell you to install their own Linux distro to make sure all the large amounts of software you’ll need is managed more easily).<p>then, yeah, it&#x27;s horribly over-engineered.<p>I tried finding docs to understand how to create a plugin to support a new protocol and didn&#x27;t really find anything.<p>I also got turned off by the outright obstinacy of the support forum (example: <a href="https:&#x2F;&#x2F;community.home-assistant.io&#x2F;t&#x2F;mosquitto-broker-announcing-advertising-mqtt-service-via-mdns&#x2F;343190&#x2F;9" rel="nofollow">https:&#x2F;&#x2F;community.home-assistant.io&#x2F;t&#x2F;mosquitto-broker-annou...</a>)<p>Home assistant is not what I have in mind when I think &quot;perfect for the job&quot;. It really is over-engineered, with (apparently) great plugin support, but very little in the way of docs.</div><br/><div id="36193496" class="c"><input type="checkbox" id="c-36193496" checked=""/><div class="controls bullet"><span class="by">m00x</span><span>|</span><a href="#36192239">root</a><span>|</span><a href="#36193016">parent</a><span>|</span><a href="#36193067">next</a><span>|</span><label class="collapse" for="c-36193496">[-]</label><label class="expand" for="c-36193496">[5 more]</label></div><br/><div class="children"><div class="content">It&#x27;s really not that hard to run. I run mine on an Intel NUC by just running a docker container managed by systemd. It took me 2 min to set up, and 10 to configure.</div><br/><div id="36193669" class="c"><input type="checkbox" id="c-36193669" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#36192239">root</a><span>|</span><a href="#36193496">parent</a><span>|</span><a href="#36193664">next</a><span>|</span><label class="collapse" for="c-36193669">[-]</label><label class="expand" for="c-36193669">[1 more]</label></div><br/><div class="children"><div class="content">&gt;  It&#x27;s really not that hard to run. I run mine on an Intel NUC by just running a docker container managed by systemd. It took me 2 min to set up, and 10 to configure.<p>Are you perhaps being sarcastic? Maybe sarcastically pointing out how much of a pain in the rear it is to run Home Assistant?<p>The type of homeowner who wants home automation isn&#x27;t going to learn what &quot;NUC&quot; means, what &quot;Docker&quot; means, what &quot;Container&quot; means, what &quot;Systemd&quot; means.<p>What you said is the equivalent of telling the average car driver &quot;It&#x27;s not really that hard to replace the timing belt on a Golf 1. I just removed alternator, timing cover, lined up the marks on the camshaft&#x27;s sprocket and the crank pulley, and slid the new belt on with the square-keyed-adjustment tensioner that it came with. Took me 30m&quot;.<p>I find, as I get older, that I get more critical of complexity. I&#x27;m even more critical when it&#x27;s in a field I am proficient in, because then I can see how much of that is simply complexity for complexities sake.</div><br/></div></div><div id="36193664" class="c"><input type="checkbox" id="c-36193664" checked=""/><div class="controls bullet"><span class="by">ThatMedicIsASpy</span><span>|</span><a href="#36192239">root</a><span>|</span><a href="#36193496">parent</a><span>|</span><a href="#36193669">prev</a><span>|</span><a href="#36193642">next</a><span>|</span><label class="collapse" for="c-36193664">[-]</label><label class="expand" for="c-36193664">[2 more]</label></div><br/><div class="children"><div class="content">And then you try to add an MQTT broker and learn you cannot install addons because you are on docker. Now you have to tinker on your own and add more docker containers.</div><br/><div id="36193694" class="c"><input type="checkbox" id="c-36193694" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#36192239">root</a><span>|</span><a href="#36193664">parent</a><span>|</span><a href="#36193642">next</a><span>|</span><label class="collapse" for="c-36193694">[-]</label><label class="expand" for="c-36193694">[1 more]</label></div><br/><div class="children"><div class="content">Docker adds a high level of complexity for non-technical people.<p>If you&#x27;re trying to mass market something  (like Home Assistant) to non-technical people, containers are a dealbreaker.<p>OTOH, if you are selling something to technical people, containers are a feature.</div><br/></div></div></div></div><div id="36193642" class="c"><input type="checkbox" id="c-36193642" checked=""/><div class="controls bullet"><span class="by">lostlogin</span><span>|</span><a href="#36192239">root</a><span>|</span><a href="#36193496">parent</a><span>|</span><a href="#36193664">prev</a><span>|</span><a href="#36193067">next</a><span>|</span><label class="collapse" for="c-36193642">[-]</label><label class="expand" for="c-36193642">[1 more]</label></div><br/><div class="children"><div class="content">This is the way to go. It’s absolutely solid and is part of my docket-compose.</div><br/></div></div></div></div></div></div></div></div><div id="36193067" class="c"><input type="checkbox" id="c-36193067" checked=""/><div class="controls bullet"><span class="by">aulin</span><span>|</span><a href="#36192239">prev</a><span>|</span><a href="#36192656">next</a><span>|</span><label class="collapse" for="c-36193067">[-]</label><label class="expand" for="c-36193067">[5 more]</label></div><br/><div class="children"><div class="content">At some point you want your home automation system to do things for you. If you&#x27;re maintaining your own fragile custom infrastructure you&#x27;re spending more time on it than it saves you by automating stuff.<p>Sure it&#x27;s fun and it&#x27;s a great learning experience, but don&#x27;t try to make it look like a better solution than a popular, proven, tested and maintained one like Home Assistant.</div><br/><div id="36193192" class="c"><input type="checkbox" id="c-36193192" checked=""/><div class="controls bullet"><span class="by">hnlmorg</span><span>|</span><a href="#36193067">parent</a><span>|</span><a href="#36193448">next</a><span>|</span><label class="collapse" for="c-36193192">[-]</label><label class="expand" for="c-36193192">[1 more]</label></div><br/><div class="children"><div class="content">I built my own smart home set up before Alexa et al came along and later switched to Alexa because my wife and, later kids, took priority. My experiences with commercial smart home solutions is that they require just as much babysitting as anything you build yourself. The only real benefit of commercial solutions is that my wife isn’t afraid to add plugs et al to the smart home infrastructure whereas before it would be entirely down to me. But the cost I pay for that convenience is reduced privacy and potentially insecure hardware connected via WiFi.<p>Honestly, if I was building something out again, I would totally optimise the set up for privacy and security rather than convenience of having a spouse connect new devices.</div><br/></div></div><div id="36193448" class="c"><input type="checkbox" id="c-36193448" checked=""/><div class="controls bullet"><span class="by">z3t4</span><span>|</span><a href="#36193067">parent</a><span>|</span><a href="#36193192">prev</a><span>|</span><a href="#36193770">next</a><span>|</span><label class="collapse" for="c-36193448">[-]</label><label class="expand" for="c-36193448">[1 more]</label></div><br/><div class="children"><div class="content">Building something specialized for only yourself might be faster then bending existing solutions to fit your requirements. And if you do something more advanced it will likely also be cheaper to build it yourself then buying the solution. And the knowledge you gain will be invaluable.</div><br/></div></div><div id="36193770" class="c"><input type="checkbox" id="c-36193770" checked=""/><div class="controls bullet"><span class="by">theshrike79</span><span>|</span><a href="#36193067">parent</a><span>|</span><a href="#36193448">prev</a><span>|</span><a href="#36192656">next</a><span>|</span><label class="collapse" for="c-36193770">[-]</label><label class="expand" for="c-36193770">[2 more]</label></div><br/><div class="children"><div class="content">Obligatory XKCD: <a href="https:&#x2F;&#x2F;xkcd.com&#x2F;1319&#x2F;" rel="nofollow">https:&#x2F;&#x2F;xkcd.com&#x2F;1319&#x2F;</a><p>Also: in some cases it really is faster just to make your own rather than learn the Home Assistant Way Of Doing Things.</div><br/><div id="36193931" class="c"><input type="checkbox" id="c-36193931" checked=""/><div class="controls bullet"><span class="by">expertentipp</span><span>|</span><a href="#36193067">root</a><span>|</span><a href="#36193770">parent</a><span>|</span><a href="#36192656">next</a><span>|</span><label class="collapse" for="c-36193931">[-]</label><label class="expand" for="c-36193931">[1 more]</label></div><br/><div class="children"><div class="content">There is always that one cronjob to bugfix, web server to restart, port being brute forced by some bots...</div><br/></div></div></div></div></div></div><div id="36192656" class="c"><input type="checkbox" id="c-36192656" checked=""/><div class="controls bullet"><span class="by">Semaphor</span><span>|</span><a href="#36193067">prev</a><span>|</span><a href="#36193153">next</a><span>|</span><label class="collapse" for="c-36192656">[-]</label><label class="expand" for="c-36192656">[3 more]</label></div><br/><div class="children"><div class="content">&gt; I have a strong aversion to Python<p>Me too, I like nothing about the language. Luckily, almost everything you do in HA besides contributing is not done in Python (by default).<p>But I love C#, so just in case there are others, I wanted to mention that you can write all kinds of automations in C# as well with NetDaemon [0]. Including full intellisense.<p>[0]:  <a href="https:&#x2F;&#x2F;netdaemon.xyz&#x2F;" rel="nofollow">https:&#x2F;&#x2F;netdaemon.xyz&#x2F;</a></div><br/><div id="36192831" class="c"><input type="checkbox" id="c-36192831" checked=""/><div class="controls bullet"><span class="by">tmyllymaki</span><span>|</span><a href="#36192656">parent</a><span>|</span><a href="#36193153">next</a><span>|</span><label class="collapse" for="c-36192831">[-]</label><label class="expand" for="c-36192831">[2 more]</label></div><br/><div class="children"><div class="content">Thanks for showing me this. As another C# dev I know what I&#x27;ll be adding into my HA stack.. :)</div><br/><div id="36193121" class="c"><input type="checkbox" id="c-36193121" checked=""/><div class="controls bullet"><span class="by">Semaphor</span><span>|</span><a href="#36192656">root</a><span>|</span><a href="#36192831">parent</a><span>|</span><a href="#36193153">next</a><span>|</span><label class="collapse" for="c-36193121">[-]</label><label class="expand" for="c-36193121">[1 more]</label></div><br/><div class="children"><div class="content">It’s also a great community on discord, very helpful even for beginner questions.</div><br/></div></div></div></div></div></div><div id="36193153" class="c"><input type="checkbox" id="c-36193153" checked=""/><div class="controls bullet"><span class="by">iamflimflam1</span><span>|</span><a href="#36192656">prev</a><span>|</span><a href="#36193475">next</a><span>|</span><label class="collapse" for="c-36193153">[-]</label><label class="expand" for="c-36193153">[3 more]</label></div><br/><div class="children"><div class="content">Anyone embarking on a home automation journey. Think very carefully how the non-technical people in your life will cope if you aren’t around  - what do  they do when things don’t work?</div><br/><div id="36193958" class="c"><input type="checkbox" id="c-36193958" checked=""/><div class="controls bullet"><span class="by">expertentipp</span><span>|</span><a href="#36193153">parent</a><span>|</span><a href="#36193254">next</a><span>|</span><label class="collapse" for="c-36193958">[-]</label><label class="expand" for="c-36193958">[1 more]</label></div><br/><div class="children"><div class="content">My acquaintances bought a house from debt closure with a monitoring system. Now they have a one room with idle servers. I&#x27;m afraid to visit because they&#x27;ll ask to &quot;install windows&quot; on every one.</div><br/></div></div><div id="36193254" class="c"><input type="checkbox" id="c-36193254" checked=""/><div class="controls bullet"><span class="by">explorer83</span><span>|</span><a href="#36193153">parent</a><span>|</span><a href="#36193958">prev</a><span>|</span><a href="#36193475">next</a><span>|</span><label class="collapse" for="c-36193254">[-]</label><label class="expand" for="c-36193254">[1 more]</label></div><br/><div class="children"><div class="content">In addition to when they don&#x27;t work. What about when the company stops supporting them or just goes under? The industry never seemed to build long term trust whenever I looked into it.</div><br/></div></div></div></div><div id="36193475" class="c"><input type="checkbox" id="c-36193475" checked=""/><div class="controls bullet"><span class="by">rcarmo</span><span>|</span><a href="#36193153">prev</a><span>|</span><a href="#36193482">next</a><span>|</span><label class="collapse" for="c-36193475">[-]</label><label class="expand" for="c-36193475">[1 more]</label></div><br/><div class="children"><div class="content">Interesting piece. My home automation solution is based on Homebridge, zigbee2mqtt and just enough Node-RED for charting and doing a bit of glue (virtual devices, custom integrations, etc.) and I’m very happy with it, but I was looking at Mako server the other day.<p>I found it refreshing, but the licensing is just weird — parts of it mention that the web content hosted by the server is also covered by it, and I’m not sure if that is a tenable approach.</div><br/></div></div><div id="36193482" class="c"><input type="checkbox" id="c-36193482" checked=""/><div class="controls bullet"><span class="by">sp0ck</span><span>|</span><a href="#36193475">prev</a><span>|</span><a href="#36192745">next</a><span>|</span><label class="collapse" for="c-36193482">[-]</label><label class="expand" for="c-36193482">[1 more]</label></div><br/><div class="children"><div class="content">All smart home is great to you and you family until author maintain it.
What happend when you have to leave for a month or for some reason unable to maintaint it ?<p>My experience is that beyond some stack complexity level simple power outage render open source solutions to the point my intervention was required.
Additionally this software is full of bugs due to how it is developed.<p>I had situation when I was on a business trip and one of my hall light went strobe mode :) Turns out there was a bug and race condition was triggered because someone activate PIR sensor the same micosecond previous action was turning light off (NodeRed)<p>Wife went crazy, called me to turn this madness off :)<p>Home is smart when users can handle it without you in any daily scenarios.
Otherwise it is just our fun&#x2F;hobby not real solid solution :)</div><br/></div></div><div id="36192745" class="c"><input type="checkbox" id="c-36192745" checked=""/><div class="controls bullet"><span class="by">vincnetas</span><span>|</span><a href="#36193482">prev</a><span>|</span><a href="#36193681">next</a><span>|</span><label class="collapse" for="c-36192745">[-]</label><label class="expand" for="c-36192745">[5 more]</label></div><br/><div class="children"><div class="content">If looking for lightweight solution with zigbee (usb dongle) one can also take a look at Zigbee2MQTT [0]. This library is used  by HomeAssistant under the hood, but it can be used independently as a standalone app and let one interact with zigbee devices using MQTT json messages. And it supports a lot of devices : &quot;Currently 2971 devices are supported from 379 different vendors&quot;<p>[0] <a href="https:&#x2F;&#x2F;www.zigbee2mqtt.io" rel="nofollow">https:&#x2F;&#x2F;www.zigbee2mqtt.io</a></div><br/><div id="36192871" class="c"><input type="checkbox" id="c-36192871" checked=""/><div class="controls bullet"><span class="by">dementik</span><span>|</span><a href="#36192745">parent</a><span>|</span><a href="#36193681">next</a><span>|</span><label class="collapse" for="c-36192871">[-]</label><label class="expand" for="c-36192871">[4 more]</label></div><br/><div class="children"><div class="content">I think HA is using ZHA under the hood for Zigbee communications.</div><br/><div id="36193130" class="c"><input type="checkbox" id="c-36193130" checked=""/><div class="controls bullet"><span class="by">babas</span><span>|</span><a href="#36192745">root</a><span>|</span><a href="#36192871">parent</a><span>|</span><a href="#36193162">next</a><span>|</span><label class="collapse" for="c-36193130">[-]</label><label class="expand" for="c-36193130">[1 more]</label></div><br/><div class="children"><div class="content">It can use both. ZHA is included in base HA. Z2M is an optional addon. Z2M has better support for obscure devices in my experience. I Also strongly prefer the management interface in z2m.</div><br/></div></div><div id="36193159" class="c"><input type="checkbox" id="c-36193159" checked=""/><div class="controls bullet"><span class="by">vincnetas</span><span>|</span><a href="#36192745">root</a><span>|</span><a href="#36192871">parent</a><span>|</span><a href="#36193162">prev</a><span>|</span><a href="#36193681">next</a><span>|</span><label class="collapse" for="c-36193159">[-]</label><label class="expand" for="c-36193159">[1 more]</label></div><br/><div class="children"><div class="content">My mistake, zigbee2mqtt is one off third party options to add zigbee to HA. But still, quite nice project.</div><br/></div></div></div></div></div></div><div id="36193681" class="c"><input type="checkbox" id="c-36193681" checked=""/><div class="controls bullet"><span class="by">rkwasny</span><span>|</span><a href="#36192745">prev</a><span>|</span><a href="#36193398">next</a><span>|</span><label class="collapse" for="c-36193681">[-]</label><label class="expand" for="c-36193681">[1 more]</label></div><br/><div class="children"><div class="content">My take is to use <a href="https:&#x2F;&#x2F;www.zigbee2mqtt.io" rel="nofollow">https:&#x2F;&#x2F;www.zigbee2mqtt.io</a> - having a queue makes it very simple to add&#x2F;test automations.</div><br/></div></div><div id="36193398" class="c"><input type="checkbox" id="c-36193398" checked=""/><div class="controls bullet"><span class="by">gorgoiler</span><span>|</span><a href="#36193681">prev</a><span>|</span><a href="#36192145">next</a><span>|</span><label class="collapse" for="c-36193398">[-]</label><label class="expand" for="c-36193398">[1 more]</label></div><br/><div class="children"><div class="content">If I put smart stuff into my home — color bulbs, switches, sensors — then I’d probably be changing about 40 bulbs and 40 switches.  Throw in the HVAC and some other things and we can round it up to 64 different inputs and outputs.<p>That’s equivalent to half a keyboard and an 8x8 pixel screen.  I couldn’t agree more with this article.</div><br/></div></div><div id="36192145" class="c"><input type="checkbox" id="c-36192145" checked=""/><div class="controls bullet"><span class="by">sigmonsays</span><span>|</span><a href="#36193398">prev</a><span>|</span><a href="#36193031">next</a><span>|</span><label class="collapse" for="c-36192145">[-]</label><label class="expand" for="c-36192145">[10 more]</label></div><br/><div class="children"><div class="content">the current state of all smart home drives me mad. Why does my thermostat have to reach out to a cloud service to change the temperature?<p>Why does any of it operate on remote cloud API calls when it could operate locally?</div><br/><div id="36192186" class="c"><input type="checkbox" id="c-36192186" checked=""/><div class="controls bullet"><span class="by">adamzegelin</span><span>|</span><a href="#36192145">parent</a><span>|</span><a href="#36192340">next</a><span>|</span><label class="collapse" for="c-36192186">[-]</label><label class="expand" for="c-36192186">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Why does any of it operate on remote cloud API calls when it could operate locally?<p>Vendor lock-in, and gives them the ability in the future to hold your devices hostage by requiring you to pay a subscription fee.<p>Various IoT platforms, eg Tyua (which gets rebranded a lot), sell a complete package that is totally cloud oriented. Configure the product behavior online, click order, purchase 10000 controller chips preflashed with firmware implementing said behavior, integrate with devices, slap logo on it, sell.<p>Also, maybe the developers of these products only know how to write cloud enabled software? (slightly joking)</div><br/></div></div><div id="36192340" class="c"><input type="checkbox" id="c-36192340" checked=""/><div class="controls bullet"><span class="by">manv1</span><span>|</span><a href="#36192145">parent</a><span>|</span><a href="#36192186">prev</a><span>|</span><a href="#36192440">next</a><span>|</span><label class="collapse" for="c-36192340">[-]</label><label class="expand" for="c-36192340">[2 more]</label></div><br/><div class="children"><div class="content">Because adding brains and storage to hardware is expensive. And putting simple things on customer prem means less things can go horribly wrong.<p>And people actually like controlling their hardware from out-of-the-home, which makes doing everything locally even more complicated.<p>When you start trying to present end-users with a graph of whatever metric you want, you run into issues with storage, response time, CPU usage, storage, the web front-end, storage, etc. Then you have issues updating all that.<p>And if you want to do something like, say, comparing and benchmarking against other users you can&#x27;t.<p>Really, only technical people care about this kind of stuff, and they can go ahead and write their own or use HA.</div><br/><div id="36193263" class="c"><input type="checkbox" id="c-36193263" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#36192145">root</a><span>|</span><a href="#36192340">parent</a><span>|</span><a href="#36192440">next</a><span>|</span><label class="collapse" for="c-36193263">[-]</label><label class="expand" for="c-36193263">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Because adding brains and storage to hardware is expensive.<p>I disagree with this; it&#x27;s expensive if you need the device to support Python or C# or similar. A $5 esp32 chip has enough storage and RAM to both act as a controller for hundreds of devices, AND run a minimal webserver to provide an interface for the user to automate those devices.<p>&gt; And people actually like controlling their hardware from out-of-the-home, which makes doing everything locally even more complicated.<p>I second this: people who want home automation also want the ability to control it from their cellphone anywhere in the world. Unless they are technically proficient enough to setup their own public-facing server that is on 24x7, the customer is almost always going to prefer the device that is connected to a proprietary vendor&#x27;s cloud.</div><br/></div></div></div></div><div id="36192440" class="c"><input type="checkbox" id="c-36192440" checked=""/><div class="controls bullet"><span class="by">katbyte</span><span>|</span><a href="#36192145">parent</a><span>|</span><a href="#36192340">prev</a><span>|</span><a href="#36192972">next</a><span>|</span><label class="collapse" for="c-36192440">[-]</label><label class="expand" for="c-36192440">[1 more]</label></div><br/><div class="children"><div class="content">I just moved over to HA and so far nothing including presence detection is cloud dependent (35 zigbee devices dozen or so wifi flashed to esphome)<p>It’s been pretty amazing tbh</div><br/></div></div><div id="36192972" class="c"><input type="checkbox" id="c-36192972" checked=""/><div class="controls bullet"><span class="by">brabel</span><span>|</span><a href="#36192145">parent</a><span>|</span><a href="#36192440">prev</a><span>|</span><a href="#36192301">next</a><span>|</span><label class="collapse" for="c-36192972">[-]</label><label class="expand" for="c-36192972">[2 more]</label></div><br/><div class="children"><div class="content">Cloud based smart home offerings must be avoided at all cost. A home shouldn&#x27;t be dependent on the Internet working, or a subscription fee being paid to whoever provides the service. There&#x27;s zero reason for introducing that dependency, except as a business strategy to extract as much money as possible.<p>Integration with GoogleHome&#x2F;Alexa&#x2F;etc doesn&#x27;t require cloud, they&#x27;re running inside your home and can easily hit the device directly (wifi devices) or via the controller (which can &quot;forward&quot; the commands to the devices on the local network or the zigbee&#x2F;zwave net).</div><br/><div id="36193679" class="c"><input type="checkbox" id="c-36193679" checked=""/><div class="controls bullet"><span class="by">ThatMedicIsASpy</span><span>|</span><a href="#36192145">root</a><span>|</span><a href="#36192972">parent</a><span>|</span><a href="#36192301">next</a><span>|</span><label class="collapse" for="c-36193679">[-]</label><label class="expand" for="c-36193679">[1 more]</label></div><br/><div class="children"><div class="content">It doesn&#x27;t help when vendors drop like flies and stop supporting your devices or just completely shut off the cloud server.</div><br/></div></div></div></div><div id="36192301" class="c"><input type="checkbox" id="c-36192301" checked=""/><div class="controls bullet"><span class="by">ianmcgowan</span><span>|</span><a href="#36192145">parent</a><span>|</span><a href="#36192972">prev</a><span>|</span><a href="#36192394">next</a><span>|</span><label class="collapse" for="c-36192301">[-]</label><label class="expand" for="c-36192301">[1 more]</label></div><br/><div class="children"><div class="content">Apart from the not-at-all-paranoid answer of &quot;money&quot;, it&#x27;s probably just easier for them to program - if you&#x27;re going to have (honestly, required for 99% of users) integrations with cloud services like alexa, google, homekit, HA etc. where you need to provide an end-point, it&#x27;s just easier to make your own app talk to the same end-point.  Which is money too, I suppose.</div><br/></div></div><div id="36193001" class="c"><input type="checkbox" id="c-36193001" checked=""/><div class="controls bullet"><span class="by">ur-whale</span><span>|</span><a href="#36192145">parent</a><span>|</span><a href="#36192394">prev</a><span>|</span><a href="#36193031">next</a><span>|</span><label class="collapse" for="c-36193001">[-]</label><label class="expand" for="c-36193001">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Why does any of it operate on remote cloud API calls when it could operate locally?<p>How else your thermostat manufacturer going to implement vendor lock-in? &#x2F;s</div><br/></div></div></div></div><div id="36193031" class="c"><input type="checkbox" id="c-36193031" checked=""/><div class="controls bullet"><span class="by">harry8</span><span>|</span><a href="#36192145">prev</a><span>|</span><a href="#36193179">next</a><span>|</span><label class="collapse" for="c-36193031">[-]</label><label class="expand" for="c-36193031">[1 more]</label></div><br/><div class="children"><div class="content">esp8266 and esp32 boards from ali plus various parts. Flashed with tasmota or (for the glow electricity meter reader esphome). Temp &amp; humidity sensors, somfy blind controllers, ws2812 strips, relay to infra-red to control hifi receivers.<p>Athom plugs pre-flashed with tasmota to measure power point usage and switch on and off. Athom bulbs pre-flashed with tasmota.<p>Homeassistant works great. Toss in wireguard for remote access with smartphones.<p>It&#x27;s good fun. It&#x27;s cheap. It&#x27;s cloudless. It&#x27;s better than anything you can buy. Go the DIY! You do tinker a bit, if you hate that aspect of DIY then maybe pass on smarthome stuff. Parts probably paid for themselves in reduced electricity consumption. Once you measure something, behaviour changes etc.<p>I run Homeassitant on a 12 y.o. laptop that also runs mosquitto, has some usb disks plugged into it, runs samba, pi-hole, owntone, wireguard, timecapsule etc.<p>Home assistatant works pretty well and easily, imho.<p>How are you doing it?</div><br/></div></div><div id="36193179" class="c"><input type="checkbox" id="c-36193179" checked=""/><div class="controls bullet"><span class="by">lelanthran</span><span>|</span><a href="#36193031">prev</a><span>|</span><a href="#36192941">next</a><span>|</span><label class="collapse" for="c-36193179">[-]</label><label class="expand" for="c-36193179">[2 more]</label></div><br/><div class="children"><div class="content">Coincidentally, I spent this past weekend looking into this.<p>This space is ripe for a well-funded new entrant to step in, create a decent protocol for home automation and make a killing.<p>The options in this space are awful, with no clear indication of security, competing &quot;standards&quot; that don&#x27;t cover even the basics of an appliance-like device, and cloud-lockin for almost everything!<p>Nothing is aimed at the average homeowner (No - writing in Python or Lua is not how people want to automate their home).<p>Lets talk about the media-level protocols: WiFi in homes is ubiquitious and cheap, things like Zigbee or LoRa raises the cost and the effort for HA, local RF isn&#x27;t widely supported by devices (with good reason). How does a homeowner know what to go with?<p>Let&#x27;s talk about bootstrapping a new device on the HA network: device discovery!<p>Some devices require an internet connection and the homeowner has to have an account on the cloud (Adafruit IO, various proprietary vendors). Some use a fixed mDNS name (Shelly), some require to download the vendors app (used to set network config, credentials, etc), most simply don&#x27;t do it at all. I even found one or two that <i>require</i> the owner to browse to a particular local IP, because the device starts off in AP mode.<p>Okay, lets say you jumped through the hoops (registered an account on a cloud service, gave the device internet access, used its AP to set it up, or it set itself up doing mDNS query for _mqtt._tcp.local, or whatever).<p>Next problem: authentication of the device on the network. Some devices just don&#x27;t support it, some support it using AES with pre-shared keys, some support it with basic HTTP auth over TLS, some use mqtt with TLS, some offer mqtt, but in plaintext only, with encryption being over HTTPS (reverses the pub&#x2F;sub model horrifically), many support x509 certs loaded onto the device (the worst option for an appliance!), some (using CoIoT) have support for DTLS (But need a valid x509 cert) ...<p>Problems aren&#x27;t over yet. So, you go with something ... and then find out that your controller is not compatible with one device. Maybe you need a Zigbee bridge because everything else is WiFi. Maybe that device requires x509 cert over WiFi, while everything else is using auth credentials. Maybe it&#x27;s hardwired to use vendor&#x27;s cloud and the rest of your network is using Home Assistant. Maybe it&#x27;s using ESPHome and everything else is using CoIoT.<p>That&#x27;s fine, you think, I&#x27;ll just use Home Assistant, which has integrations for everything on the planet, to &quot;bridge&quot; the different protocols. But now you&#x27;re stuck with Home Assistant as a controller, which has limited automation facilities.<p>Honestly, what <i>homeowners</i> want is to buy a device and plug it in, and have a nice interface for devices which allow the homeowner to specify what happens on any event.<p>That&#x27;s it. No messing about with Python, Containers, Lua, mDNS sniffers, accounts on public internet clouds, renewing x509 certificates, etc.<p>Plug it in, use username+password to access the Home Automation network, that&#x27;s it.<p>From a technical PoV, I can see a mechanism to get it done this way.</div><br/><div id="36193379" class="c"><input type="checkbox" id="c-36193379" checked=""/><div class="controls bullet"><span class="by">philjohn</span><span>|</span><a href="#36193179">parent</a><span>|</span><a href="#36192941">next</a><span>|</span><label class="collapse" for="c-36193379">[-]</label><label class="expand" for="c-36193379">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s what Matter is supposed to do, and why all of the various smart home vendors seem to be jumping aboard.<p>To your point of &quot;stuck with HA as a controller&quot; that&#x27;s not entirely true, if you&#x27;re an Apple household, install the HomeKit bridge and expose things to homekit where you can automate to your hearts content.</div><br/></div></div></div></div><div id="36192941" class="c"><input type="checkbox" id="c-36192941" checked=""/><div class="controls bullet"><span class="by">ur-whale</span><span>|</span><a href="#36193179">prev</a><span>|</span><a href="#36193202">next</a><span>|</span><label class="collapse" for="c-36192941">[-]</label><label class="expand" for="c-36192941">[2 more]</label></div><br/><div class="children"><div class="content">&gt; I have a strong aversion to Python<p>I have had a great experience with HA (unlike with OpenHAB which is a Java-based monstrosity with a data schema that is near impossible to figure out).<p>It&#x27;s unfortunate that he went and rewrote an entire home management stack just because he dislikes Python.<p>Even worse, the justification for disliking Python, namely:<p>&gt; It’s a nice language, but for things like home automation, having build&#x2F;dependencies problems is the absolute last thing I need.<p>is <i>absolutely</i> not a problem if you run HA on a tiny dedicated box, because all of that stuff is completely handled (and hidden) by the HA update system.<p>&gt; The biggest problem with HomeAssistant, however, is its really over-engineered setup for running on mini computers like the Raspberry Pi, which was my goal.<p>It may <i>feel</i> over-engineered if you look under HA&#x27;s skirts (the fleet of docker containers thing), but turns out you almost never need to go deep into HA to get it to do things, and when you actually do, HA is actually pretty open and easy to work with. (just ssh to port 22222 if you <i>really</i> need access to the bare metal system).<p>I would agree that the HA setup is a bit unusual for someone used to just ssh into a linux server: I had the same initial reaction. But turns out it&#x27;s actually never much of a problem. It&#x27;s just different.<p>Also, it may <i>look</i> heavy, but it runs absolutely fine on a small raspi-like computer.<p>&gt; Is the best solution we can come up with a bunch of Docker containers running on a custom Linux distro?<p>Why not? It may &quot;feel&quot; big and complicated, but in practice:<p><pre><code>    - it&#x27;s very well packaged
    - it&#x27;s very well maintained
    - it has support for a *ton* of home automation devices
    - it runs out of the box on a tiny and cheap SBC (a raspi) without overloading it
</code></pre>
All you have to do is dedicate a raspi to the problem and be done with it, not really a big problem.<p>And if you really want to run it on a Linux server that is used for other things, and the HA architecture irks you the wrong way: just wrap HA in a native qemu VM and run it on your server along your other stuff.</div><br/><div id="36193161" class="c"><input type="checkbox" id="c-36193161" checked=""/><div class="controls bullet"><span class="by">deepspace</span><span>|</span><a href="#36192941">parent</a><span>|</span><a href="#36193202">next</a><span>|</span><label class="collapse" for="c-36193161">[-]</label><label class="expand" for="c-36193161">[1 more]</label></div><br/><div class="children"><div class="content">The author&#x27;s attitude reminds me of one of the best software articles ever, &quot;Cash Cow in the Tar Pit&quot; (<a href="https:&#x2F;&#x2F;www.computer.org&#x2F;csdl&#x2F;magazine&#x2F;so&#x2F;1996&#x2F;03&#x2F;s3041&#x2F;13rRUxly9bK" rel="nofollow">https:&#x2F;&#x2F;www.computer.org&#x2F;csdl&#x2F;magazine&#x2F;so&#x2F;1996&#x2F;03&#x2F;s3041&#x2F;13rR...</a>).<p>The reason a &quot;legacy&quot; system seems so clunky and over-engineered and hard to modify and has so much corner case handling is: real-world experience and bug-fixes.  When you throw that old cow in the tar pit and start developing your shiny new application, you throw all those years of hard-earned experience away with it.  By the time your application works as well as the old one, it will be just as ugly.<p>FWIW, I have been running HA in a qemu VM on a NUC for years, and it is one of the most stable pieces of software I use.  It supports every device I can throw at it, and the automations, while clunky, are easy to manage, as long as you keep KISS in mind.</div><br/></div></div></div></div><div id="36193202" class="c"><input type="checkbox" id="c-36193202" checked=""/><div class="controls bullet"><span class="by">antigravity42</span><span>|</span><a href="#36192941">prev</a><span>|</span><label class="collapse" for="c-36193202">[-]</label><label class="expand" for="c-36193202">[1 more]</label></div><br/><div class="children"><div class="content">The amount of skeptical people in this thread is astonishing, it is natural to questions pile of complexity even if it is well established.
In an unlikely event it goes south, author will have much easier time debugging his simple setup then waiting for reply from a home assistant forum (even though they are lovely people and nothing against HA).</div><br/></div></div></div></div></div></div></div></body></html>