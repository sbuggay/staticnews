<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1711530068056" as="style"/><link rel="stylesheet" href="styles.css?v=1711530068056"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/carlosefr/spinner-mouse">Spinner-mouse: Arduino-based USB rotary controller for Arkanoid, Tempest, etc.</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>rcarmo</span> | <span>26 comments</span></div><br/><div><div id="39833645" class="c"><input type="checkbox" id="c-39833645" checked=""/><div class="controls bullet"><span class="by">robertclaus</span><span>|</span><a href="#39835787">next</a><span>|</span><label class="collapse" for="c-39833645">[-]</label><label class="expand" for="c-39833645">[1 more]</label></div><br/><div class="children"><div class="content">It was refreshing to see an off-the-shelf project box on the parts list rather than 3d printing it. I&#x27;m in the middle of a multi-day printing spree for a project and am learning to appreciate that not every generic box needs to be 3d printed.</div><br/></div></div><div id="39835787" class="c"><input type="checkbox" id="c-39835787" checked=""/><div class="controls bullet"><span class="by">wavesplash</span><span>|</span><a href="#39833645">prev</a><span>|</span><a href="#39835657">next</a><span>|</span><label class="collapse" for="c-39835787">[-]</label><label class="expand" for="c-39835787">[1 more]</label></div><br/><div class="children"><div class="content">If you want an out of the box USB spinner solution, check T-Sticks&#x27; USB spinners: <a href="https:&#x2F;&#x2F;thunderstickstudio.com&#x2F;collections&#x2F;spinners" rel="nofollow">https:&#x2F;&#x2F;thunderstickstudio.com&#x2F;collections&#x2F;spinners</a></div><br/></div></div><div id="39835657" class="c"><input type="checkbox" id="c-39835657" checked=""/><div class="controls bullet"><span class="by">resonator</span><span>|</span><a href="#39835787">prev</a><span>|</span><a href="#39836597">next</a><span>|</span><label class="collapse" for="c-39835657">[-]</label><label class="expand" for="c-39835657">[1 more]</label></div><br/><div class="children"><div class="content">I really must make one of these. My favourite game is Kaboom! which is completely unplayable without a paddle.<p><a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Kaboom!_(video_game)" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Kaboom!_(video_game)</a></div><br/></div></div><div id="39836597" class="c"><input type="checkbox" id="c-39836597" checked=""/><div class="controls bullet"><span class="by">roydivision</span><span>|</span><a href="#39835657">prev</a><span>|</span><a href="#39836283">next</a><span>|</span><label class="collapse" for="c-39836597">[-]</label><label class="expand" for="c-39836597">[1 more]</label></div><br/><div class="children"><div class="content">Really nice project, props to Carlos!</div><br/></div></div><div id="39836283" class="c"><input type="checkbox" id="c-39836283" checked=""/><div class="controls bullet"><span class="by">thanatos519</span><span>|</span><a href="#39836597">prev</a><span>|</span><a href="#39835045">next</a><span>|</span><label class="collapse" for="c-39836283">[-]</label><label class="expand" for="c-39836283">[1 more]</label></div><br/><div class="children"><div class="content">96 steps? Hmm, my TRON had 128 steps. Might take a bit more circuitry or and&#x2F;or a gear to get there.</div><br/></div></div><div id="39835045" class="c"><input type="checkbox" id="c-39835045" checked=""/><div class="controls bullet"><span class="by">toobitts</span><span>|</span><a href="#39836283">prev</a><span>|</span><a href="#39833068">next</a><span>|</span><label class="collapse" for="c-39835045">[-]</label><label class="expand" for="c-39835045">[1 more]</label></div><br/><div class="children"><div class="content">Nice. I&#x27;ve purchased a couple of these, which are similar:<p><a href="https:&#x2F;&#x2F;www.tindie.com&#x2F;products&#x2F;bittradeone&#x2F;rev-o-mate-bfrom11bk&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.tindie.com&#x2F;products&#x2F;bittradeone&#x2F;rev-o-mate-bfrom...</a><p>Incredibly useful in my line of work.</div><br/></div></div><div id="39833068" class="c"><input type="checkbox" id="c-39833068" checked=""/><div class="controls bullet"><span class="by">tombert</span><span>|</span><a href="#39835045">prev</a><span>|</span><a href="#39833923">next</a><span>|</span><label class="collapse" for="c-39833068">[-]</label><label class="expand" for="c-39833068">[7 more]</label></div><br/><div class="children"><div class="content">I made something like this pretty recently, though it was with an ESP32, and it was bluetooth, and I used a mouse driver. It was cool, though I did kind of grow a hatred for the Arduino &quot;poll the pins in the loop&quot; way of doing things. It would kind of work, but the problem would be that if you spun the knob too quickly, it would actually end up going backwards because you&#x27;re effectively spinning faster than it can sync.<p>I ended up having to learn how to use the FreeRTOS interrupts.  It was a bit harder but it was a much better play experience.</div><br/><div id="39833602" class="c"><input type="checkbox" id="c-39833602" checked=""/><div class="controls bullet"><span class="by">brokenmachine</span><span>|</span><a href="#39833068">parent</a><span>|</span><a href="#39833531">next</a><span>|</span><label class="collapse" for="c-39833602">[-]</label><label class="expand" for="c-39833602">[1 more]</label></div><br/><div class="children"><div class="content">&gt;poll the pins in the loop<p>You should be using interrupts for encoders. The standard Encoder library uses interrupts.<p><a href="https:&#x2F;&#x2F;www.arduino.cc&#x2F;reference&#x2F;en&#x2F;libraries&#x2F;encoder&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.arduino.cc&#x2F;reference&#x2F;en&#x2F;libraries&#x2F;encoder&#x2F;</a><p>In my experience on an ESP8266, it can do over 300kHz. Probably faster on an ESP32. For ESP8266, just remember to set ICACHE_RAM_ATTR for the ISR. Not sure if ESP32 is the same, but it probably is.<p>So you&#x27;d need to be turning those encoders pretty damn fast for the interrupt speed to become a problem.</div><br/></div></div><div id="39833531" class="c"><input type="checkbox" id="c-39833531" checked=""/><div class="controls bullet"><span class="by">tomek_ycomb</span><span>|</span><a href="#39833068">parent</a><span>|</span><a href="#39833602">prev</a><span>|</span><a href="#39833627">next</a><span>|</span><label class="collapse" for="c-39833531">[-]</label><label class="expand" for="c-39833531">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a fun exercise in which I think you&#x27;ll find polling to be fine for many Arduino cases. Not as much for raspi and higher level in my limited experience for various hardware reasons and overhead. And quickly when you do other stuff, especially blocking high level communication, polling does suffer. But interrupts exist and are a reasonable level 2 for people to learn.<p><a href="https:&#x2F;&#x2F;www.mikrocontroller.net&#x2F;articles&#x2F;Drehgeber" rel="nofollow">https:&#x2F;&#x2F;www.mikrocontroller.net&#x2F;articles&#x2F;Drehgeber</a> is an excellent article (in German, Google translate is fine afaik. Check the interrupt section</div><br/></div></div><div id="39833627" class="c"><input type="checkbox" id="c-39833627" checked=""/><div class="controls bullet"><span class="by">phkahler</span><span>|</span><a href="#39833068">parent</a><span>|</span><a href="#39833531">prev</a><span>|</span><a href="#39833476">next</a><span>|</span><label class="collapse" for="c-39833627">[-]</label><label class="expand" for="c-39833627">[1 more]</label></div><br/><div class="children"><div class="content">&gt;&gt; if you spun the knob too quickly, it would actually end up going backwards<p>The spinner on arcade Tempest can do the same. IIRC the quadrature signals feed the clock and direction pins on a 4 bit up-down counter on the board, and software probably polls the counter. If you spin it fast enough (I used Teflon spray on mine) you could wrap the counter around and get it to move backwards. Something like that, it&#x27;s been a few years...</div><br/></div></div><div id="39833476" class="c"><input type="checkbox" id="c-39833476" checked=""/><div class="controls bullet"><span class="by">mikeInAlaska</span><span>|</span><a href="#39833068">parent</a><span>|</span><a href="#39833627">prev</a><span>|</span><a href="#39833923">next</a><span>|</span><label class="collapse" for="c-39833476">[-]</label><label class="expand" for="c-39833476">[3 more]</label></div><br/><div class="children"><div class="content">What is causing the interrupts? Any change to encoder A or B?</div><br/><div id="39833588" class="c"><input type="checkbox" id="c-39833588" checked=""/><div class="controls bullet"><span class="by">tombert</span><span>|</span><a href="#39833068">root</a><span>|</span><a href="#39833476">parent</a><span>|</span><a href="#39833923">next</a><span>|</span><label class="collapse" for="c-39833588">[-]</label><label class="expand" for="c-39833588">[2 more]</label></div><br/><div class="children"><div class="content">You can set a gpio pin mode to PULLUP, and there’s a function built in to the freertos&#x2F;arduino stuff for the ESP32 to convert that gpio pin signal to an interrupt. From there you can pass in a function pointer to run upon receiving the interrupt.<p>The rotary encoder I bought simply applies pulses to one pin when spinning clockwise, and another pin when spinning counter clockwise, so I just attached the interrupts to two separate gpio pins, and sent the updates to the mouse stuff directly in the interrupt handler. I simply moved the mouse N units to the right or left if going clockwise or counterclockwise.<p>I’m sure it’s not ideal but it worked to play breakout. I’m still a little new to the world of microcontrollers so it’s possible that I did something dumb.</div><br/><div id="39834059" class="c"><input type="checkbox" id="c-39834059" checked=""/><div class="controls bullet"><span class="by">dekhn</span><span>|</span><a href="#39833068">root</a><span>|</span><a href="#39833588">parent</a><span>|</span><a href="#39833923">next</a><span>|</span><label class="collapse" for="c-39834059">[-]</label><label class="expand" for="c-39834059">[1 more]</label></div><br/><div class="children"><div class="content">There is also a very simple and straightforward chip that will convert quadrature to pulses. Ls7183n.  It&#x27;s kind of unnecessary if you can write your own interrupt handlers but it&#x27;s useful if you&#x27;re just working with discrete electronics</div><br/></div></div></div></div></div></div></div></div><div id="39833923" class="c"><input type="checkbox" id="c-39833923" checked=""/><div class="controls bullet"><span class="by">Rebelgecko</span><span>|</span><a href="#39833068">prev</a><span>|</span><a href="#39834941">next</a><span>|</span><label class="collapse" for="c-39833923">[-]</label><label class="expand" for="c-39833923">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve been eagerly awaiting the day when I can buy one of these: <a href="https:&#x2F;&#x2F;github.com&#x2F;scottbez1&#x2F;smartknob">https:&#x2F;&#x2F;github.com&#x2F;scottbez1&#x2F;smartknob</a> (or when building one myself doesn&#x27;t require any soldering more advanced than thru-hole).</div><br/></div></div><div id="39834941" class="c"><input type="checkbox" id="c-39834941" checked=""/><div class="controls bullet"><span class="by">vunderba</span><span>|</span><a href="#39833923">prev</a><span>|</span><a href="#39833737">next</a><span>|</span><label class="collapse" for="c-39834941">[-]</label><label class="expand" for="c-39834941">[1 more]</label></div><br/><div class="children"><div class="content">Nicely done. Back in the day, I actually used to convert the midi signals from a rotary encoder knob on one of my AKAI into a MAME input just so I could play Arkanoid.</div><br/></div></div><div id="39833737" class="c"><input type="checkbox" id="c-39833737" checked=""/><div class="controls bullet"><span class="by">joshmarinacci</span><span>|</span><a href="#39834941">prev</a><span>|</span><a href="#39832936">next</a><span>|</span><label class="collapse" for="c-39833737">[-]</label><label class="expand" for="c-39833737">[3 more]</label></div><br/><div class="children"><div class="content">I don&#x27;t understand how it has a final resolution of 96 steps if the hardware has 24 steps.</div><br/><div id="39834232" class="c"><input type="checkbox" id="c-39834232" checked=""/><div class="controls bullet"><span class="by">tanseydavid</span><span>|</span><a href="#39833737">parent</a><span>|</span><a href="#39832936">next</a><span>|</span><label class="collapse" for="c-39834232">[-]</label><label class="expand" for="c-39834232">[2 more]</label></div><br/><div class="children"><div class="content">I had the same question.<p>Following the wikipedia link from the README: <a href="https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Incremental_encoder" rel="nofollow">https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Incremental_encoder</a><p>helped me develop a little bit of understanding and it confirmed my suspicion about 96 = 24 positions * (2 output pins &#x2F; 4 states).<p>Asking an LLM next, provided this sentence:<p>&quot;Resolution Increase: By detecting both the rising and falling edges of both channels&#x27; signals, you effectively multiply the basic steps per turn. Each step in one channel can be subdivided into four phases (A rising, B rising, A falling, B falling), which leads to the increased resolution. Here’s the math: 24 steps * 4 (due to the four phases per step in quadrature encoding) = 96 steps per turn.&quot;</div><br/><div id="39835280" class="c"><input type="checkbox" id="c-39835280" checked=""/><div class="controls bullet"><span class="by">JKCalhoun</span><span>|</span><a href="#39833737">root</a><span>|</span><a href="#39834232">parent</a><span>|</span><a href="#39832936">next</a><span>|</span><label class="collapse" for="c-39835280">[-]</label><label class="expand" for="c-39835280">[1 more]</label></div><br/><div class="children"><div class="content">If the encoder is like a wheel with 24 &quot;teeth&quot; a single LED&#x2F;detector could tell you when it became blocked, when it became unblocked (by a tooth). There&#x27;s 48 states already.<p>You put another LED&#x2F;detector just a half-tooth out of phase with the first detector and you not only doubled the resolution, but you can tell direction as well.</div><br/></div></div></div></div></div></div><div id="39832936" class="c"><input type="checkbox" id="c-39832936" checked=""/><div class="controls bullet"><span class="by">sleepybrett</span><span>|</span><a href="#39833737">prev</a><span>|</span><a href="#39834916">next</a><span>|</span><label class="collapse" for="c-39832936">[-]</label><label class="expand" for="c-39832936">[6 more]</label></div><br/><div class="children"><div class="content">friend of mine built this: <a href="https:&#x2F;&#x2F;www.instructables.com&#x2F;HDDJ-Turning-an-old-hard-disk-drive-into-a-rotary&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.instructables.com&#x2F;HDDJ-Turning-an-old-hard-disk-...</a><p>can&#x27;t beat how smooth it is.</div><br/><div id="39835710" class="c"><input type="checkbox" id="c-39835710" checked=""/><div class="controls bullet"><span class="by">modeless</span><span>|</span><a href="#39832936">parent</a><span>|</span><a href="#39834350">next</a><span>|</span><label class="collapse" for="c-39835710">[-]</label><label class="expand" for="c-39835710">[1 more]</label></div><br/><div class="children"><div class="content">This is cool. I wonder how hard it would be to drive the motor just enough to compensate for friction so that it would spin forever at whatever speed you leave it instead of slowing down when you&#x27;re not touching it.</div><br/></div></div><div id="39834350" class="c"><input type="checkbox" id="c-39834350" checked=""/><div class="controls bullet"><span class="by">djmips</span><span>|</span><a href="#39832936">parent</a><span>|</span><a href="#39835710">prev</a><span>|</span><a href="#39833649">next</a><span>|</span><label class="collapse" for="c-39834350">[-]</label><label class="expand" for="c-39834350">[1 more]</label></div><br/><div class="children"><div class="content">I was just going to post about this! Not this particular project but the fact that most of us have old hard drives lying around that we could turn into rotary input device!</div><br/></div></div><div id="39833649" class="c"><input type="checkbox" id="c-39833649" checked=""/><div class="controls bullet"><span class="by">dylan604</span><span>|</span><a href="#39832936">parent</a><span>|</span><a href="#39834350">prev</a><span>|</span><a href="#39833263">next</a><span>|</span><label class="collapse" for="c-39833649">[-]</label><label class="expand" for="c-39833649">[2 more]</label></div><br/><div class="children"><div class="content">that&#x27;s interesting. the switch from vinyl to any of the other controllers was a very long time for me because I did not like the feel of any of the control surfaces at the time. the CDJ100s feel like fisher price toys which is probably what kept the prices a fraction of the CDJ1000s which had a much more acceptable feel. some of the digital only devices have gone back to that cheap light plastic feel with just a horrible bit of resistance.<p>i often wonder how people tolerate it, but then i realize most people don&#x27;t know what it was like playing vinyl and have nothing to compare to.</div><br/><div id="39834761" class="c"><input type="checkbox" id="c-39834761" checked=""/><div class="controls bullet"><span class="by">sleepybrett</span><span>|</span><a href="#39832936">root</a><span>|</span><a href="#39833649">parent</a><span>|</span><a href="#39833263">next</a><span>|</span><label class="collapse" for="c-39834761">[-]</label><label class="expand" for="c-39834761">[1 more]</label></div><br/><div class="children"><div class="content">I remember back in the day NI had a box that worked with traktor that came with some special vinyl records that had encoded signals built on it. You ran the output of the record players into the &#x27;traktor box&#x27; and it would turn this into positional information for traktor .. seems like they still make the records: <a href="https:&#x2F;&#x2F;www.native-instruments.com&#x2F;en&#x2F;catalog&#x2F;hardware&#x2F;traktor&#x2F;digital-vinyl&#x2F;" rel="nofollow">https:&#x2F;&#x2F;www.native-instruments.com&#x2F;en&#x2F;catalog&#x2F;hardware&#x2F;trakt...</a><p>I think the product, back in the day, might have been called traktor scratch.</div><br/></div></div></div></div><div id="39833263" class="c"><input type="checkbox" id="c-39833263" checked=""/><div class="controls bullet"><span class="by">nativeit</span><span>|</span><a href="#39832936">parent</a><span>|</span><a href="#39833649">prev</a><span>|</span><a href="#39834916">next</a><span>|</span><label class="collapse" for="c-39833263">[-]</label><label class="expand" for="c-39833263">[1 more]</label></div><br/><div class="children"><div class="content">This looks awesome. I’m going to try building one this evening. It’s interesting reading the comments from 14-15 years ago, the capacity for hobbyists to do such things today is so much greater, even just since 2010.</div><br/></div></div></div></div><div id="39834916" class="c"><input type="checkbox" id="c-39834916" checked=""/><div class="controls bullet"><span class="by">trentnix</span><span>|</span><a href="#39832936">prev</a><span>|</span><label class="collapse" for="c-39834916">[-]</label><label class="expand" for="c-39834916">[1 more]</label></div><br/><div class="children"><div class="content">Now add vertical adjustment to the spinner so I can play Discos of Tron!</div><br/></div></div></div></div></div></div></div></body></html>