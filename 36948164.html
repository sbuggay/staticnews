<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1690880459345" as="style"/><link rel="stylesheet" href="styles.css?v=1690880459345"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://blog.apnic.net/2021/06/17/how-a-small-free-ip-tool-survived/">Icanhazip: A simple IP address tool survived a deluge of users (2021)</a> <span class="domain">(<a href="https://blog.apnic.net">blog.apnic.net</a>)</span></div><div class="subtext"><span>broken_codez</span> | <span>121 comments</span></div><br/><div><div id="36949781" class="c"><input type="checkbox" id="c-36949781" checked=""/><div class="controls bullet"><span class="by">zie</span><span>|</span><a href="#36949362">next</a><span>|</span><label class="collapse" for="c-36949781">[-]</label><label class="expand" for="c-36949781">[28 more]</label></div><br/><div class="children"><div class="content">For ridiculously easy things like this, I think it&#x27;s smarter for you to just host it yourself. This way you are not forcing other people to carry your burden.<p>nginx config example:<p><pre><code>  location &#x2F;ip {
    add_header Content-Type &quot;application&#x2F;json&quot;;
    return 200 &#x27;{&quot;host&quot;:&quot;$server_name&quot;,&quot;ip&quot;:&quot;$remote_addr&quot;,&quot;port&quot;:&quot;$remote_port&quot;,&quot;server_ip&quot;:&quot;$server_addr&quot;,&quot;server_port&quot;:&quot;$server_port</code></pre>
&quot;}\n&#x27;;
  }<p>Which will return something like this in JSON format:<p><pre><code>    {&quot;host&quot;:&quot;www.example.org&quot;,&quot;ip&quot;:&quot;199.200.200.14&quot;,&quot;port&quot;:&quot;7990&quot;,&quot;server_ip&quot;:&quot;199.200.100.229&quot;,&quot;server_port&quot;:&quot;443&quot;}
</code></pre>
This is all done 100% within NGINX, and I include a lot of stuff you probably don&#x27;t want or care about. Other web servers probably have similar capabilities.</div><br/><div id="36951169" class="c"><input type="checkbox" id="c-36951169" checked=""/><div class="controls bullet"><span class="by">gaudat</span><span>|</span><a href="#36949781">parent</a><span>|</span><a href="#36951016">next</a><span>|</span><label class="collapse" for="c-36951169">[-]</label><label class="expand" for="c-36951169">[4 more]</label></div><br/><div class="children"><div class="content">My favorite: <a href="https:&#x2F;&#x2F;cloudflare.com&#x2F;cdn-cgi&#x2F;trace" rel="nofollow noreferrer">https:&#x2F;&#x2F;cloudflare.com&#x2F;cdn-cgi&#x2F;trace</a></div><br/><div id="36951217" class="c"><input type="checkbox" id="c-36951217" checked=""/><div class="controls bullet"><span class="by">matthberg</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36951169">parent</a><span>|</span><a href="#36952123">next</a><span>|</span><label class="collapse" for="c-36951217">[-]</label><label class="expand" for="c-36951217">[2 more]</label></div><br/><div class="children"><div class="content">&#x2F;cdn-cgi&#x2F;trace isn&#x27;t available on just cloudflare.com, it&#x27;s on every site they proxy too (there might be a setting somewhere to disable it yet it&#x27;s on by default). I&#x27;ve yet to figure out what happens if your site also serves something there, yet it was surprising to see on a barebones site I had routed through them.<p>I learned this from: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36383258">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=36383258</a></div><br/><div id="36951924" class="c"><input type="checkbox" id="c-36951924" checked=""/><div class="controls bullet"><span class="by">e28eta</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36951217">parent</a><span>|</span><a href="#36952123">next</a><span>|</span><label class="collapse" for="c-36951924">[-]</label><label class="expand" for="c-36951924">[1 more]</label></div><br/><div class="children"><div class="content">TIL. Looks like they have it documented (since Apr 2022, based on the github history), it cannot be modified or customized, and that it sometimes causes problems with SEO crawlers!<p><a href="https:&#x2F;&#x2F;developers.cloudflare.com&#x2F;fundamentals&#x2F;get-started&#x2F;reference&#x2F;cdn-cgi-endpoint&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;developers.cloudflare.com&#x2F;fundamentals&#x2F;get-started&#x2F;r...</a></div><br/></div></div></div></div><div id="36952123" class="c"><input type="checkbox" id="c-36952123" checked=""/><div class="controls bullet"><span class="by">1vuio0pswjnm7</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36951169">parent</a><span>|</span><a href="#36951217">prev</a><span>|</span><a href="#36951016">next</a><span>|</span><label class="collapse" for="c-36952123">[-]</label><label class="expand" for="c-36952123">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>   sni=plaintext
</code></pre>
There was a great trial CF ran for a long period with a previous version of encrypted SNI (now ECH).  One could get encrypted SNI with any site using CF via modified OpenSSL.  But they stopped this experiment.  Meanwhile ECH was still not ready.<p>If anyone is getting something other than &quot;sni=plaintext&quot; for a CF domain besides crypto.cloudflare.com, then please let us know how.</div><br/></div></div></div></div><div id="36951016" class="c"><input type="checkbox" id="c-36951016" checked=""/><div class="controls bullet"><span class="by">francislavoie</span><span>|</span><a href="#36949781">parent</a><span>|</span><a href="#36951169">prev</a><span>|</span><a href="#36950840">next</a><span>|</span><label class="collapse" for="c-36951016">[-]</label><label class="expand" for="c-36951016">[2 more]</label></div><br/><div class="children"><div class="content">Alternatively, with Caddy (with automated TLS, single static binary):<p><pre><code>    example.com {
        handle &#x2F;ip {
            header Content-Type application&#x2F;json
            respond `{&quot;host&quot;:&quot;{host}&quot;,&quot;ip&quot;:&quot;{remote_host}&quot;,&quot;port&quot;:&quot;{remote_port}&quot;}`
        }
    }
</code></pre>
Though the usefulness of the host (client specified it), remote port (it&#x27;s random), and server ip&#x2F;port (it&#x27;s static and not useful for the client) are questionable.</div><br/><div id="36952269" class="c"><input type="checkbox" id="c-36952269" checked=""/><div class="controls bullet"><span class="by">quickthrower2</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36951016">parent</a><span>|</span><a href="#36950840">next</a><span>|</span><label class="collapse" for="c-36952269">[-]</label><label class="expand" for="c-36952269">[1 more]</label></div><br/><div class="children"><div class="content">Useful for UA sanity checking I guess</div><br/></div></div></div></div><div id="36950840" class="c"><input type="checkbox" id="c-36950840" checked=""/><div class="controls bullet"><span class="by">linsomniac</span><span>|</span><a href="#36949781">parent</a><span>|</span><a href="#36951016">prev</a><span>|</span><a href="#36950160">next</a><span>|</span><label class="collapse" for="c-36950840">[-]</label><label class="expand" for="c-36950840">[6 more]</label></div><br/><div class="children"><div class="content">Ok, I&#x27;ll bite...  What kind of machine do you host this on that can handle 400,000 of these requests (with TLS mind you) per second?  That was the load he mentions it handling in 2021, he stopped mentioning requests per day metrics after that.</div><br/><div id="36951079" class="c"><input type="checkbox" id="c-36951079" checked=""/><div class="controls bullet"><span class="by">hamandcheese</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36950840">parent</a><span>|</span><a href="#36953310">next</a><span>|</span><label class="collapse" for="c-36951079">[-]</label><label class="expand" for="c-36951079">[1 more]</label></div><br/><div class="children"><div class="content">I think you are misunderstanding... the point of self hosting is that you only need to handle your own load. It only needs to scale to what, 1 request per <i>day</i>?</div><br/></div></div><div id="36953310" class="c"><input type="checkbox" id="c-36953310" checked=""/><div class="controls bullet"><span class="by">noirscape</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36950840">parent</a><span>|</span><a href="#36951079">prev</a><span>|</span><a href="#36951006">next</a><span>|</span><label class="collapse" for="c-36953310">[-]</label><label class="expand" for="c-36953310">[1 more]</label></div><br/><div class="children"><div class="content">Wasn&#x27;t the original target of nginx  back in the nineties to hit 100k requests per second with less overhead than (at the time, standard) apache2?<p>With that in mind + the general advancing of hw since then, it wouldn&#x27;t be too suprising if nginx could handle that load easily. It&#x27;d just get more difficult if you wanted to put anything else (ie. metrics) on that endpoint since afaict nginx doesn&#x27;t have anything to monitor those things if you don&#x27;t have the Enterprise version of their tools.<p>In any case you might be misreading the setup for the parent here - the recommendation is just that if you&#x27;re doing this in the context of a webapp, that this sort of behavior is trivially easy to bounce back in JSON using nginx.</div><br/></div></div><div id="36951006" class="c"><input type="checkbox" id="c-36951006" checked=""/><div class="controls bullet"><span class="by">BeefWellington</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36950840">parent</a><span>|</span><a href="#36953310">prev</a><span>|</span><a href="#36950160">next</a><span>|</span><label class="collapse" for="c-36951006">[-]</label><label class="expand" for="c-36951006">[3 more]</label></div><br/><div class="children"><div class="content">400,000 req&#x2F;s is actually not crazy. Back in the single-core era I was doing 1&#x2F;10th of that on a production server for similar workloads a compiled VB &#x2F; COM+ app. I would wager Nginx can handle that pretty easily on a modern dual or quad-core system.</div><br/><div id="36951213" class="c"><input type="checkbox" id="c-36951213" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36951006">parent</a><span>|</span><a href="#36950160">next</a><span>|</span><label class="collapse" for="c-36951213">[-]</label><label class="expand" for="c-36951213">[2 more]</label></div><br/><div class="children"><div class="content">The thing is, at that rate, you&#x27;ll likely run out of ports without more advanced &#x2F; exotic TCP configurations.<p>.. Ain&#x27;t 65536 a capital B.<p>Edit: @toast0: valid point, thanks for the correction.</div><br/><div id="36951546" class="c"><input type="checkbox" id="c-36951546" checked=""/><div class="controls bullet"><span class="by">toast0</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36951213">parent</a><span>|</span><a href="#36950160">next</a><span>|</span><label class="collapse" for="c-36951546">[-]</label><label class="expand" for="c-36951546">[1 more]</label></div><br/><div class="children"><div class="content">Tcp connections are a 4-tuple {PeerAIP, PeerBIP, PeerAPort, PeerBPort}, if you hold your IP and port fixed, because you only listen on port 443, you can do 64k connections to each other peer&#x27;s IP... if the other peer can manage to use them all.<p>Chances are you&#x27;ll never run into that limit for this service, because even if there&#x27;s a ton of users behind the same IP due to NAT, they don&#x27;t need to hold long sessions, and you can disable http keep-alive and close connections right away. Chances are you&#x27;ll have some ip diversity in 400k requests&#x2F;second though.</div><br/></div></div></div></div></div></div></div></div><div id="36950160" class="c"><input type="checkbox" id="c-36950160" checked=""/><div class="controls bullet"><span class="by">turtlebits</span><span>|</span><a href="#36949781">parent</a><span>|</span><a href="#36950840">prev</a><span>|</span><a href="#36951138">next</a><span>|</span><label class="collapse" for="c-36950160">[-]</label><label class="expand" for="c-36950160">[1 more]</label></div><br/><div class="children"><div class="content">If it&#x27;s on the public internet, you&#x27;re not forcing anyone to provide you a service.   Standing up reliable infra isn&#x27;t easy nor free, no matter how trivial deploying it may be.</div><br/></div></div><div id="36951138" class="c"><input type="checkbox" id="c-36951138" checked=""/><div class="controls bullet"><span class="by">anon7331</span><span>|</span><a href="#36949781">parent</a><span>|</span><a href="#36950160">prev</a><span>|</span><a href="#36952242">next</a><span>|</span><label class="collapse" for="c-36951138">[-]</label><label class="expand" for="c-36951138">[1 more]</label></div><br/><div class="children"><div class="content">Alternatively, search the web for everyone implementing &quot;&#x2F;ip&quot; and random load balance between all of them and let them handle the load for you.</div><br/></div></div><div id="36952242" class="c"><input type="checkbox" id="c-36952242" checked=""/><div class="controls bullet"><span class="by">1vuio0pswjnm7</span><span>|</span><a href="#36949781">parent</a><span>|</span><a href="#36951138">prev</a><span>|</span><a href="#36950295">next</a><span>|</span><label class="collapse" for="c-36952242">[-]</label><label class="expand" for="c-36952242">[4 more]</label></div><br/><div class="children"><div class="content">Another one<p><a href="https:&#x2F;&#x2F;whatismyip.akamai.com&#x2F;advanced?debug" rel="nofollow noreferrer">https:&#x2F;&#x2F;whatismyip.akamai.com&#x2F;advanced?debug</a><p><a href="https:&#x2F;&#x2F;ipv4.whatismyip.akamai.com" rel="nofollow noreferrer">https:&#x2F;&#x2F;ipv4.whatismyip.akamai.com</a><p>DNS-based<p><pre><code>   drill whoami.akamai.net 
</code></pre>
The second one might be useful to verify one is not using local, ISP-provided DNS, or to see whether a DoH provider effectively geolocates its users, e.g., Cloudflare.</div><br/><div id="36953889" class="c"><input type="checkbox" id="c-36953889" checked=""/><div class="controls bullet"><span class="by">mr-karan</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36952242">parent</a><span>|</span><a href="#36952362">next</a><span>|</span><label class="collapse" for="c-36953889">[-]</label><label class="expand" for="c-36953889">[1 more]</label></div><br/><div class="children"><div class="content">Another DNS based one:<p><pre><code>  dig ip @dns.toys +short</code></pre></div><br/></div></div><div id="36952362" class="c"><input type="checkbox" id="c-36952362" checked=""/><div class="controls bullet"><span class="by">sublinear</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36952242">parent</a><span>|</span><a href="#36953889">prev</a><span>|</span><a href="#36950295">next</a><span>|</span><label class="collapse" for="c-36952362">[-]</label><label class="expand" for="c-36952362">[2 more]</label></div><br/><div class="children"><div class="content">Bad cert. The common name does not match the subdomain.</div><br/><div id="36952954" class="c"><input type="checkbox" id="c-36952954" checked=""/><div class="controls bullet"><span class="by">1vuio0pswjnm7</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36952362">parent</a><span>|</span><a href="#36950295">next</a><span>|</span><label class="collapse" for="c-36952954">[-]</label><label class="expand" for="c-36952954">[1 more]</label></div><br/><div class="children"><div class="content">Certificate says CN is a248.e.akamai.net<p>CNAME for whatismyip.akamai.com is a1524.g.akamai.net<p>Probably no certitifcate that lists whatismyip.akamai.com</div><br/></div></div></div></div></div></div><div id="36950295" class="c"><input type="checkbox" id="c-36950295" checked=""/><div class="controls bullet"><span class="by">Titan2189</span><span>|</span><a href="#36949781">parent</a><span>|</span><a href="#36952242">prev</a><span>|</span><a href="#36952526">next</a><span>|</span><label class="collapse" for="c-36950295">[-]</label><label class="expand" for="c-36950295">[3 more]</label></div><br/><div class="children"><div class="content">This will return the wrong results when used behind a load balancer</div><br/><div id="36953660" class="c"><input type="checkbox" id="c-36953660" checked=""/><div class="controls bullet"><span class="by">xereeto</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36950295">parent</a><span>|</span><a href="#36950629">next</a><span>|</span><label class="collapse" for="c-36953660">[-]</label><label class="expand" for="c-36953660">[1 more]</label></div><br/><div class="children"><div class="content">Not if you use the PROXY protocol</div><br/></div></div><div id="36950629" class="c"><input type="checkbox" id="c-36950629" checked=""/><div class="controls bullet"><span class="by">justsomehnguy</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36950295">parent</a><span>|</span><a href="#36953660">prev</a><span>|</span><a href="#36952526">next</a><span>|</span><label class="collapse" for="c-36950629">[-]</label><label class="expand" for="c-36950629">[1 more]</label></div><br/><div class="children"><div class="content">Anything would return proxy&#x2F;LB address. So do not use it behind LB&#x2F;proxy&#x2F;NAT.</div><br/></div></div></div></div><div id="36952526" class="c"><input type="checkbox" id="c-36952526" checked=""/><div class="controls bullet"><span class="by">acidburnNSA</span><span>|</span><a href="#36949781">parent</a><span>|</span><a href="#36950295">prev</a><span>|</span><a href="#36949958">next</a><span>|</span><label class="collapse" for="c-36952526">[-]</label><label class="expand" for="c-36952526">[1 more]</label></div><br/><div class="children"><div class="content">Now I just need the apache config for this...anyone?</div><br/></div></div><div id="36949958" class="c"><input type="checkbox" id="c-36949958" checked=""/><div class="controls bullet"><span class="by">nurettin</span><span>|</span><a href="#36949781">parent</a><span>|</span><a href="#36952526">prev</a><span>|</span><a href="#36950170">next</a><span>|</span><label class="collapse" for="c-36949958">[-]</label><label class="expand" for="c-36949958">[1 more]</label></div><br/><div class="children"><div class="content">I have something very similar, and all my projects depend on that. I also made a copy of httpbin which I host on a server. Useful for unit testing. And a gateway for hookback urls that I use for relaying&#x2F;logging oauth and similar things to internal vpns. All very useful gadgets that have been running for over half a decade on arch.</div><br/></div></div><div id="36950170" class="c"><input type="checkbox" id="c-36950170" checked=""/><div class="controls bullet"><span class="by">iknowstuff</span><span>|</span><a href="#36949781">parent</a><span>|</span><a href="#36949958">prev</a><span>|</span><a href="#36949362">next</a><span>|</span><label class="collapse" for="c-36950170">[-]</label><label class="expand" for="c-36950170">[4 more]</label></div><br/><div class="children"><div class="content">Probably more efficient to use <a href="https:&#x2F;&#x2F;lib.rs&#x2F;hyper" rel="nofollow noreferrer">https:&#x2F;&#x2F;lib.rs&#x2F;hyper</a> - and actually maintainable.</div><br/><div id="36950919" class="c"><input type="checkbox" id="c-36950919" checked=""/><div class="controls bullet"><span class="by">jesprenj</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36950170">parent</a><span>|</span><a href="#36949362">next</a><span>|</span><label class="collapse" for="c-36950919">[-]</label><label class="expand" for="c-36950919">[3 more]</label></div><br/><div class="children"><div class="content">I can&#x27;t say a thing about efficiency, but for maintainability, I have to disagree. This seems to be a rust library, and for maintaining that, you&#x27;d need to write a program, compile it every time some updates come by, rerun the recompiled program, ...<p>With the parent comment example, all you need is nginx, available as a package on all distros, and a single static config file. With an auto-updating package manager and a service manager, one never needs to write anything else apart from that static config file.<p>Or did you mean something else with &quot;actually maintainable&quot;?</div><br/><div id="36951204" class="c"><input type="checkbox" id="c-36951204" checked=""/><div class="controls bullet"><span class="by">lmm</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36950919">parent</a><span>|</span><a href="#36949362">next</a><span>|</span><label class="collapse" for="c-36951204">[-]</label><label class="expand" for="c-36951204">[2 more]</label></div><br/><div class="children"><div class="content">I would trust the rust compile&#x2F;rerun process a lot more than an auto-updating linux distribution, personally. Sooner or later that auto-updating package manager will break your config file, itself, or both.</div><br/><div id="36953349" class="c"><input type="checkbox" id="c-36953349" checked=""/><div class="controls bullet"><span class="by">noirscape</span><span>|</span><a href="#36949781">root</a><span>|</span><a href="#36951204">parent</a><span>|</span><a href="#36949362">next</a><span>|</span><label class="collapse" for="c-36953349">[-]</label><label class="expand" for="c-36953349">[1 more]</label></div><br/><div class="children"><div class="content">The majority of nginx distributions will not get any major bumps during the lifetime of the distros they&#x27;re in. Whether that&#x27;s because the distro itself has policies against that (Debian, Ubuntu) or because the distro version expires before nginx&#x27; stable release does (most of the ones with a higher update frequency, ie. Fedora) so by the time the version expires, they can just go to the next stable version on the release after. This is pretty much only a risk if your distro is completely rolling release and even those in my experience at least offer an &quot;lts&quot; package of some sort.<p>So that&#x27;s not a problem. Besides the majority of nginx setups don&#x27;t rely on too fancy things; most of the stuff that gets changed in updates that affect config files are the fancier nginx modules.</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36949362" class="c"><input type="checkbox" id="c-36949362" checked=""/><div class="controls bullet"><span class="by">ddrager</span><span>|</span><a href="#36949781">prev</a><span>|</span><a href="#36948933">next</a><span>|</span><label class="collapse" for="c-36949362">[-]</label><label class="expand" for="c-36949362">[1 more]</label></div><br/><div class="children"><div class="content">Wow, I didn&#x27;t realize the little article I wrote for Lifehacker would have such a big impact on this project. Also didn&#x27;t realize he had passed on the project to Cloudflare. They&#x27;re a great team so I&#x27;m happy it&#x27;s in their capable hands now!</div><br/></div></div><div id="36948933" class="c"><input type="checkbox" id="c-36948933" checked=""/><div class="controls bullet"><span class="by">metadat</span><span>|</span><a href="#36949362">prev</a><span>|</span><a href="#36949227">next</a><span>|</span><label class="collapse" for="c-36948933">[-]</label><label class="expand" for="c-36948933">[1 more]</label></div><br/><div class="children"><div class="content">Discussed at the time:<p><i>A New Future for Icanhazip</i><p><a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=27415537">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=27415537</a> (2 years ago, 253 comments)</div><br/></div></div><div id="36949227" class="c"><input type="checkbox" id="c-36949227" checked=""/><div class="controls bullet"><span class="by">ComputerGuru</span><span>|</span><a href="#36948933">prev</a><span>|</span><a href="#36953810">next</a><span>|</span><label class="collapse" for="c-36949227">[-]</label><label class="expand" for="c-36949227">[27 more]</label></div><br/><div class="children"><div class="content">Not related to the story of scaling the tech but rather to the IP business in 2023:<p>I’m not affiliated with any of these services, but my goto has been ip4.me, ip6.me, and ip6only.me because they’re short and memorable and because they acknowledge the IPv4&#x2F;IPv6 split. The first two domains give you your v4 and v6 IP respectively and the latter only resolves over IPv6 (useful to ensure your IPv6 is off when using a VPN). You can tack on &#x2F;api to any of them to get a plaintext response.</div><br/><div id="36952084" class="c"><input type="checkbox" id="c-36952084" checked=""/><div class="controls bullet"><span class="by">hayyyyydos</span><span>|</span><a href="#36949227">parent</a><span>|</span><a href="#36953605">next</a><span>|</span><label class="collapse" for="c-36952084">[-]</label><label class="expand" for="c-36952084">[4 more]</label></div><br/><div class="children"><div class="content">When helping someone over the phone, I get them to go to <a href="http:&#x2F;&#x2F;ipchicken.com" rel="nofollow noreferrer">http:&#x2F;&#x2F;ipchicken.com</a><p>Very easy URL to relay, &quot;do you see the chicken? let me know what the blue numbers are below it&quot; - and most people seem to get a kick out of it!</div><br/><div id="36952348" class="c"><input type="checkbox" id="c-36952348" checked=""/><div class="controls bullet"><span class="by">dgl</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36952084">parent</a><span>|</span><a href="#36953653">next</a><span>|</span><label class="collapse" for="c-36952348">[-]</label><label class="expand" for="c-36952348">[2 more]</label></div><br/><div class="children"><div class="content">A long time ago I spent a bit too long debugging something to later find out the &quot;source port&quot; that displays isn&#x27;t right! It&#x27;s still not right! I obviously fixed this by making my own site (<a href="https:&#x2F;&#x2F;ip.wtf" rel="nofollow noreferrer">https:&#x2F;&#x2F;ip.wtf</a>).</div><br/><div id="36953667" class="c"><input type="checkbox" id="c-36953667" checked=""/><div class="controls bullet"><span class="by">pepa65</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36952348">parent</a><span>|</span><a href="#36953653">next</a><span>|</span><label class="collapse" for="c-36953667">[-]</label><label class="expand" for="c-36953667">[1 more]</label></div><br/><div class="children"><div class="content">Great service! Very informative.
If you could also implement ip.wtf&#x2F;ip or some such, it might decrease your bandwidth..!</div><br/></div></div></div></div><div id="36953653" class="c"><input type="checkbox" id="c-36953653" checked=""/><div class="controls bullet"><span class="by">pepa65</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36952084">parent</a><span>|</span><a href="#36952348">prev</a><span>|</span><a href="#36953605">next</a><span>|</span><label class="collapse" for="c-36953653">[-]</label><label class="expand" for="c-36953653">[1 more]</label></div><br/><div class="children"><div class="content">Gives a CloudFlare 520 error for me...</div><br/></div></div></div></div><div id="36953605" class="c"><input type="checkbox" id="c-36953605" checked=""/><div class="controls bullet"><span class="by">pepa65</span><span>|</span><a href="#36949227">parent</a><span>|</span><a href="#36952084">prev</a><span>|</span><a href="#36949330">next</a><span>|</span><label class="collapse" for="c-36953605">[-]</label><label class="expand" for="c-36953605">[1 more]</label></div><br/><div class="children"><div class="content">And if you attach &#x2F;ip you get only the IP address (as &#x2F;api also includes the URL of the documentation).</div><br/></div></div><div id="36949330" class="c"><input type="checkbox" id="c-36949330" checked=""/><div class="controls bullet"><span class="by">NelsonMinar</span><span>|</span><a href="#36949227">parent</a><span>|</span><a href="#36953605">prev</a><span>|</span><a href="#36950292">next</a><span>|</span><label class="collapse" for="c-36949330">[-]</label><label class="expand" for="c-36949330">[2 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;www.ipify.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.ipify.org&#x2F;</a> is my go to, mostly because it has a really simple JSON version. Funny how many ways there are to do this simple thing.</div><br/><div id="36953683" class="c"><input type="checkbox" id="c-36953683" checked=""/><div class="controls bullet"><span class="by">pepa65</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36949330">parent</a><span>|</span><a href="#36950292">next</a><span>|</span><label class="collapse" for="c-36953683">[-]</label><label class="expand" for="c-36953683">[1 more]</label></div><br/><div class="children"><div class="content"><a href="https:&#x2F;&#x2F;api.ipify.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;api.ipify.org&#x2F;</a> works to just get text IP.</div><br/></div></div></div></div><div id="36950292" class="c"><input type="checkbox" id="c-36950292" checked=""/><div class="controls bullet"><span class="by">paradox460</span><span>|</span><a href="#36949227">parent</a><span>|</span><a href="#36949330">prev</a><span>|</span><a href="#36950479">next</a><span>|</span><label class="collapse" for="c-36950292">[-]</label><label class="expand" for="c-36950292">[1 more]</label></div><br/><div class="children"><div class="content">I like ifconfig.me because it returns the IP along with some other little bits of useful information, and works great with curl</div><br/></div></div><div id="36950479" class="c"><input type="checkbox" id="c-36950479" checked=""/><div class="controls bullet"><span class="by">erinnh</span><span>|</span><a href="#36949227">parent</a><span>|</span><a href="#36950292">prev</a><span>|</span><a href="#36951259">next</a><span>|</span><label class="collapse" for="c-36950479">[-]</label><label class="expand" for="c-36950479">[4 more]</label></div><br/><div class="children"><div class="content">Icanhazip.com will do the same.<p>They have ipv4.icannazip.com and ipv6.icannazip.com where they will return that.</div><br/><div id="36950641" class="c"><input type="checkbox" id="c-36950641" checked=""/><div class="controls bullet"><span class="by">sitzkrieg</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36950479">parent</a><span>|</span><a href="#36951259">next</a><span>|</span><label class="collapse" for="c-36950641">[-]</label><label class="expand" for="c-36950641">[3 more]</label></div><br/><div class="children"><div class="content">so 3, 2
less memorable sites, ok got it</div><br/><div id="36950872" class="c"><input type="checkbox" id="c-36950872" checked=""/><div class="controls bullet"><span class="by">erinnh</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36950641">parent</a><span>|</span><a href="#36951259">next</a><span>|</span><label class="collapse" for="c-36950872">[-]</label><label class="expand" for="c-36950872">[2 more]</label></div><br/><div class="children"><div class="content">I’d say that is up you. I can never remember what tld those other sites used.
 I’ve been using icanhazip since many years. I seem to remember it fine.</div><br/><div id="36953817" class="c"><input type="checkbox" id="c-36953817" checked=""/><div class="controls bullet"><span class="by">pepa65</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36950872">parent</a><span>|</span><a href="#36951259">next</a><span>|</span><label class="collapse" for="c-36953817">[-]</label><label class="expand" for="c-36953817">[1 more]</label></div><br/><div class="children"><div class="content">Replace the double nn in your post by nh and it will work better ;-)</div><br/></div></div></div></div></div></div></div></div><div id="36951259" class="c"><input type="checkbox" id="c-36951259" checked=""/><div class="controls bullet"><span class="by">reincoder</span><span>|</span><a href="#36949227">parent</a><span>|</span><a href="#36950479">prev</a><span>|</span><a href="#36949596">next</a><span>|</span><label class="collapse" for="c-36951259">[-]</label><label class="expand" for="c-36951259">[3 more]</label></div><br/><div class="children"><div class="content">ipinfo.io&#x27;s API and site is dualstack. But for IPv6 connection, you need to use v6.ipinfo.io for the API service.<p>Even though nobody asked, I have to mention this every time there is a discussion about IPv6 and IP address data. According to domain name records, even if a site supports both IPv4 and IPv6 it defaults to IPv6. I would love to know why.<p>I have come across a lot of people saying IPinfo doesn&#x27;t support IPv6. The internet as an ecosystem doesn&#x27;t completely support IPv6, but we do. So, mentioning it constantly in every discussion is my current approach.</div><br/><div id="36951610" class="c"><input type="checkbox" id="c-36951610" checked=""/><div class="controls bullet"><span class="by">toast0</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36951259">parent</a><span>|</span><a href="#36949596">next</a><span>|</span><label class="collapse" for="c-36951610">[-]</label><label class="expand" for="c-36951610">[2 more]</label></div><br/><div class="children"><div class="content">&gt; According to domain name records, even if a site supports both IPv4 and IPv6 it defaults to IPv6. I would love to know why.<p>Newer is better? Good clients use the &#x27;happy eyeballs&#x27; (rfc 8305) mechanism, which is roughly, open v6, wait a bit, open v4, use whichever connection comes back first. There&#x27;s a bias towards v6 because often it&#x27;s a more direct connection, and may work better, but it was also common to have non working AAAA records, so a delayed fallback is preferable to no fallback as used to be common.</div><br/><div id="36951819" class="c"><input type="checkbox" id="c-36951819" checked=""/><div class="controls bullet"><span class="by">Caligatio</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36951610">parent</a><span>|</span><a href="#36949596">next</a><span>|</span><label class="collapse" for="c-36951819">[-]</label><label class="expand" for="c-36951819">[1 more]</label></div><br/><div class="children"><div class="content">Don&#x27;t forget about the new still-draft-but-already-used HTTPS DNS record type (no, that&#x27;s not a typo)! I&#x27;m still fuzzy on its IP hint value(s) but it can potentially bypass A and AAAA records completely.</div><br/></div></div></div></div></div></div><div id="36949596" class="c"><input type="checkbox" id="c-36949596" checked=""/><div class="controls bullet"><span class="by">pests</span><span>|</span><a href="#36949227">parent</a><span>|</span><a href="#36951259">prev</a><span>|</span><a href="#36949290">next</a><span>|</span><label class="collapse" for="c-36949596">[-]</label><label class="expand" for="c-36949596">[4 more]</label></div><br/><div class="children"><div class="content">Does Chrome not recognize the .me TLD? I just tried to type that ip4.me domain twice and it just sent me to search results.</div><br/><div id="36950852" class="c"><input type="checkbox" id="c-36950852" checked=""/><div class="controls bullet"><span class="by">owenmarshall</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36949596">parent</a><span>|</span><a href="#36950911">next</a><span>|</span><label class="collapse" for="c-36950852">[-]</label><label class="expand" for="c-36950852">[1 more]</label></div><br/><div class="children"><div class="content">I think that would be very surprising to the fine people of Montenegro.<p>Check your local DNS configuration and your spelling, something is likely hijacking NXDOMAINs.</div><br/></div></div><div id="36950911" class="c"><input type="checkbox" id="c-36950911" checked=""/><div class="controls bullet"><span class="by">bla3</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36949596">parent</a><span>|</span><a href="#36950852">prev</a><span>|</span><a href="#36950650">next</a><span>|</span><label class="collapse" for="c-36950911">[-]</label><label class="expand" for="c-36950911">[1 more]</label></div><br/><div class="children"><div class="content">Works for me (heh).</div><br/></div></div><div id="36950650" class="c"><input type="checkbox" id="c-36950650" checked=""/><div class="controls bullet"><span class="by">kiwijamo</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36949596">parent</a><span>|</span><a href="#36950911">prev</a><span>|</span><a href="#36949290">next</a><span>|</span><label class="collapse" for="c-36950650">[-]</label><label class="expand" for="c-36950650">[1 more]</label></div><br/><div class="children"><div class="content">Edge works just fine which is interesting.</div><br/></div></div></div></div><div id="36949290" class="c"><input type="checkbox" id="c-36949290" checked=""/><div class="controls bullet"><span class="by">0x6A75616E</span><span>|</span><a href="#36949227">parent</a><span>|</span><a href="#36949596">prev</a><span>|</span><a href="#36953810">next</a><span>|</span><label class="collapse" for="c-36949290">[-]</label><label class="expand" for="c-36949290">[7 more]</label></div><br/><div class="children"><div class="content">the issue is that these return a bunch of html so using them from the command line is not ideal.<p>I made wgetip.com back in 2008 to solve this. icanhaz must&#x27;ve been pretty suboptimal back then to have issues with traffic. wgetip still gets about 3M requests per hour. All from a single $5 droplet.</div><br/><div id="36953841" class="c"><input type="checkbox" id="c-36953841" checked=""/><div class="controls bullet"><span class="by">pepa65</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36949290">parent</a><span>|</span><a href="#36949317">next</a><span>|</span><label class="collapse" for="c-36953841">[-]</label><label class="expand" for="c-36953841">[1 more]</label></div><br/><div class="children"><div class="content">Best thing to try first is to append &#x2F;ip I&#x27;ve found.<p>For wgetip.com that is not needed of course. But I haven&#x27;t found a way to get the IPv4 address there...</div><br/></div></div><div id="36949317" class="c"><input type="checkbox" id="c-36949317" checked=""/><div class="controls bullet"><span class="by">zokier</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36949290">parent</a><span>|</span><a href="#36953841">prev</a><span>|</span><a href="#36953810">next</a><span>|</span><label class="collapse" for="c-36949317">[-]</label><label class="expand" for="c-36949317">[5 more]</label></div><br/><div class="children"><div class="content">ip4.me and ip6.me have &#x2F;api endpoint for programmatic access</div><br/><div id="36953870" class="c"><input type="checkbox" id="c-36953870" checked=""/><div class="controls bullet"><span class="by">pepa65</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36949317">parent</a><span>|</span><a href="#36949742">next</a><span>|</span><label class="collapse" for="c-36953870">[-]</label><label class="expand" for="c-36953870">[1 more]</label></div><br/><div class="children"><div class="content">There, &#x2F;ip is better.</div><br/></div></div><div id="36949742" class="c"><input type="checkbox" id="c-36949742" checked=""/><div class="controls bullet"><span class="by">SadTrombone</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36949317">parent</a><span>|</span><a href="#36953870">prev</a><span>|</span><a href="#36953810">next</a><span>|</span><label class="collapse" for="c-36949742">[-]</label><label class="expand" for="c-36949742">[3 more]</label></div><br/><div class="children"><div class="content">The &#x2F;api endpoint seems to return me a 301 error from the command line.</div><br/><div id="36949796" class="c"><input type="checkbox" id="c-36949796" checked=""/><div class="controls bullet"><span class="by">ComputerGuru</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36949742">parent</a><span>|</span><a href="#36949772">next</a><span>|</span><label class="collapse" for="c-36949796">[-]</label><label class="expand" for="c-36949796">[1 more]</label></div><br/><div class="children"><div class="content">That’s a redirect, not an error. Probably to &#x2F;api&#x2F; with a trailing slash. Or use the -l flag to curl to have it auto redirect.</div><br/></div></div><div id="36949772" class="c"><input type="checkbox" id="c-36949772" checked=""/><div class="controls bullet"><span class="by">jffry</span><span>|</span><a href="#36949227">root</a><span>|</span><a href="#36949742">parent</a><span>|</span><a href="#36949796">prev</a><span>|</span><a href="#36953810">next</a><span>|</span><label class="collapse" for="c-36949772">[-]</label><label class="expand" for="c-36949772">[1 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>  curl https:&#x2F;&#x2F;ip4.me&#x2F;api&#x2F;
</code></pre>
works for me</div><br/></div></div></div></div></div></div></div></div></div></div><div id="36953810" class="c"><input type="checkbox" id="c-36953810" checked=""/><div class="controls bullet"><span class="by">bloqs</span><span>|</span><a href="#36949227">prev</a><span>|</span><a href="#36950264">next</a><span>|</span><label class="collapse" for="c-36953810">[-]</label><label class="expand" for="c-36953810">[1 more]</label></div><br/><div class="children"><div class="content">Im so glad the late 00s era of cringy &quot;lolcat english&quot; is over. Perhaps the modern equivalent of excessively pretentious sounding crypto bro naming schemes is worse in some ways, but at least I dont have to pause to explain the name when I say it out aloud to someone.</div><br/></div></div><div id="36950264" class="c"><input type="checkbox" id="c-36950264" checked=""/><div class="controls bullet"><span class="by">dfc</span><span>|</span><a href="#36953810">prev</a><span>|</span><a href="#36949771">next</a><span>|</span><label class="collapse" for="c-36950264">[-]</label><label class="expand" for="c-36950264">[14 more]</label></div><br/><div class="children"><div class="content">Slightly related: There used to be a DNS server that you could query a TXT record and the response  would include the IP of the server that submitted the query. You could use it to debug DNS issues. I thought it was from DNS-OARC but I  can&#x27;t find it anywhere. Does anyone know a way to accomplish this?</div><br/><div id="36950521" class="c"><input type="checkbox" id="c-36950521" checked=""/><div class="controls bullet"><span class="by">thenickdude</span><span>|</span><a href="#36950264">parent</a><span>|</span><a href="#36953355">next</a><span>|</span><label class="collapse" for="c-36950521">[-]</label><label class="expand" for="c-36950521">[6 more]</label></div><br/><div class="children"><div class="content">I believe you&#x27;re thinking of OpenDNS:<p>dig -4 +short myip.opendns.com @resolver1.opendns.com</div><br/><div id="36951155" class="c"><input type="checkbox" id="c-36951155" checked=""/><div class="controls bullet"><span class="by">dfc</span><span>|</span><a href="#36950264">root</a><span>|</span><a href="#36950521">parent</a><span>|</span><a href="#36950974">next</a><span>|</span><label class="collapse" for="c-36951155">[-]</label><label class="expand" for="c-36951155">[4 more]</label></div><br/><div class="children"><div class="content">This only seems to work if your client can send requests directly to resolver1.opendns.com. It does not work if you have a server that is intercepting DNS or if you use the system configured DNS. The google version posted below is closer to what I was looking for:<p><pre><code>    $ dig +short TXT o-o.myaddr.l.google.com @ns1.google.com
    &quot;A.B.C.D&quot;
    $ dig +short TXT o-o.myaddr.l.google.com
    &quot;172.253.195.202&quot;
    &quot;edns0-client-subnet A.B.C.0&#x2F;24&quot;
    $ dig +short TXT o-o.myaddr.l.google.com @9.9.9.9
    &quot;162.244.55.23&quot;
    $ dig +short TXT o-o.myaddr.l.google.com @1.1.1.1
    &quot;172.71.221.175&quot;
</code></pre>
The opendns implementation returns nothing if you try something similar to the last three.</div><br/><div id="36951240" class="c"><input type="checkbox" id="c-36951240" checked=""/><div class="controls bullet"><span class="by">arjvik</span><span>|</span><a href="#36950264">root</a><span>|</span><a href="#36951155">parent</a><span>|</span><a href="#36950974">next</a><span>|</span><label class="collapse" for="c-36951240">[-]</label><label class="expand" for="c-36951240">[3 more]</label></div><br/><div class="children"><div class="content">There&#x27;s a whole list of such resolvers:<p>Akamai:<p><pre><code>    dig +short whoami.akamai.net @ns1-1.akamaitech.net
</code></pre>
Google:<p><pre><code>    dig +short o-o.myaddr.l.google.com txt @ns1.google.com
</code></pre>
Cloudflare:<p><pre><code>    dig +short whoami.cloudflare ch txt @1.1.1.1
</code></pre>
OpenDNS:<p><pre><code>    dig -4 +short myip.opendns.com @resolver1.opendns.com
</code></pre>
Note that if you leave off the `@service.authoritative.nameserver` portion of all of the above, you get the IP address of the recursive resolver that your machine is configured to use. If you pass this to a service like <a href="https:&#x2F;&#x2F;ipinfo.io&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;ipinfo.io&#x2F;</a>, you can use this to figure out what company&#x27;s DNS service is currently configured, be it your ISPs, or an internet company like Cloudflare&#x2F;Google&#x2F;Quad9.<p>Arguably, that is the only valid reason to be using an IP address echoer via DNS, as if you truly wanted your own IP, you could fetch it far easier from a service like icanhazip.com.<p>Personally, Akamai&#x27;s offering is by far the most useful and convenient--it&#x27;s an A record, so you won&#x27;t accidentally forget to add &quot;txt&quot; to your dig invocation, and has a very easy to remember name. Google&#x27;s works too, though it requires remembering the strange domain name. Cloudflare tries to be cute and uses the Chaosnet DNS class, which while being an incredibly cool reference to internet history, unfortunately is not propagated by most public recursive resolvers. And like the parent comment mentions, OpenDNS somehow blocks requests that pass through a recursive resolver.</div><br/><div id="36951278" class="c"><input type="checkbox" id="c-36951278" checked=""/><div class="controls bullet"><span class="by">dfc</span><span>|</span><a href="#36950264">root</a><span>|</span><a href="#36951240">parent</a><span>|</span><a href="#36950974">next</a><span>|</span><label class="collapse" for="c-36951278">[-]</label><label class="expand" for="c-36951278">[2 more]</label></div><br/><div class="children"><div class="content">The opendns server does not return anything if I send the query to anything other than opendns.</div><br/><div id="36951703" class="c"><input type="checkbox" id="c-36951703" checked=""/><div class="controls bullet"><span class="by">arjvik</span><span>|</span><a href="#36950264">root</a><span>|</span><a href="#36951278">parent</a><span>|</span><a href="#36950974">next</a><span>|</span><label class="collapse" for="c-36951703">[-]</label><label class="expand" for="c-36951703">[1 more]</label></div><br/><div class="children"><div class="content">Admittedly my comment was incredibly long, but I did include<p>&gt; And like the parent comment mentions, OpenDNS somehow blocks requests that pass through a recursive resolver.</div><br/></div></div></div></div></div></div></div></div><div id="36950974" class="c"><input type="checkbox" id="c-36950974" checked=""/><div class="controls bullet"><span class="by">jtokoph</span><span>|</span><a href="#36950264">root</a><span>|</span><a href="#36950521">parent</a><span>|</span><a href="#36951155">prev</a><span>|</span><a href="#36953355">next</a><span>|</span><label class="collapse" for="c-36950974">[-]</label><label class="expand" for="c-36950974">[1 more]</label></div><br/><div class="children"><div class="content">And the v6 version: dig -6 +short myip.opendns.com @resolver1.opendns.com aaaa</div><br/></div></div></div></div><div id="36953355" class="c"><input type="checkbox" id="c-36953355" checked=""/><div class="controls bullet"><span class="by">theblazehen</span><span>|</span><a href="#36950264">parent</a><span>|</span><a href="#36950521">prev</a><span>|</span><a href="#36950556">next</a><span>|</span><label class="collapse" for="c-36953355">[-]</label><label class="expand" for="c-36953355">[1 more]</label></div><br/><div class="children"><div class="content">In addition to the others, there is also <a href="https:&#x2F;&#x2F;www.dns.toys&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.dns.toys&#x2F;</a></div><br/></div></div><div id="36950556" class="c"><input type="checkbox" id="c-36950556" checked=""/><div class="controls bullet"><span class="by">p1mrx</span><span>|</span><a href="#36950264">parent</a><span>|</span><a href="#36953355">prev</a><span>|</span><a href="#36950421">next</a><span>|</span><label class="collapse" for="c-36950556">[-]</label><label class="expand" for="c-36950556">[1 more]</label></div><br/><div class="children"><div class="content">&quot;<a href="https:&#x2F;&#x2F;myresolver.info&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;myresolver.info&#x2F;</a>&quot; was good while it lasted.  It used stupid DNS tricks to show your resolver in the browser:<p><a href="https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20131126131155&#x2F;https:&#x2F;&#x2F;ndkyez8khir.target.myresolver.info&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;web.archive.org&#x2F;web&#x2F;20131126131155&#x2F;https:&#x2F;&#x2F;ndkyez8kh...</a></div><br/></div></div><div id="36950421" class="c"><input type="checkbox" id="c-36950421" checked=""/><div class="controls bullet"><span class="by">erinnh</span><span>|</span><a href="#36950264">parent</a><span>|</span><a href="#36950556">prev</a><span>|</span><a href="#36950461">next</a><span>|</span><label class="collapse" for="c-36950421">[-]</label><label class="expand" for="c-36950421">[1 more]</label></div><br/><div class="children"><div class="content">I don’t know of a server that does exactly what you wrote, but I generally troubleshoot dns issues with a few dig commands.
 dig without any parameters will resolve via your normal dns server and display the servers ip.<p>With @(dns server ip here) you can query a different dns server to check what their answer is.<p>With +trace you can go through the complete dns chain from the root servers on to check for issues in the chain.<p>Sorry if this doesn’t help you or you knew this already.</div><br/></div></div><div id="36950461" class="c"><input type="checkbox" id="c-36950461" checked=""/><div class="controls bullet"><span class="by">gavinsyancey</span><span>|</span><a href="#36950264">parent</a><span>|</span><a href="#36950421">prev</a><span>|</span><a href="#36950885">next</a><span>|</span><label class="collapse" for="c-36950461">[-]</label><label class="expand" for="c-36950461">[3 more]</label></div><br/><div class="children"><div class="content">dig +short TXT o-o.myaddr.l.google.com @ns1.google.com</div><br/><div id="36951158" class="c"><input type="checkbox" id="c-36951158" checked=""/><div class="controls bullet"><span class="by">dfc</span><span>|</span><a href="#36950264">root</a><span>|</span><a href="#36950461">parent</a><span>|</span><a href="#36950571">prev</a><span>|</span><a href="#36950885">next</a><span>|</span><label class="collapse" for="c-36951158">[-]</label><label class="expand" for="c-36951158">[1 more]</label></div><br/><div class="children"><div class="content">This works! Thank you very much.</div><br/></div></div></div></div><div id="36950885" class="c"><input type="checkbox" id="c-36950885" checked=""/><div class="controls bullet"><span class="by">mgbmtl</span><span>|</span><a href="#36950264">parent</a><span>|</span><a href="#36950461">prev</a><span>|</span><a href="#36949771">next</a><span>|</span><label class="collapse" for="c-36950885">[-]</label><label class="expand" for="c-36950885">[1 more]</label></div><br/><div class="children"><div class="content">You could write a program that listens on port 53, parses the query and returns the correct value?<p>DNS is hard to implement, but for responding to a very specific type of query, should be easy?</div><br/></div></div></div></div><div id="36949771" class="c"><input type="checkbox" id="c-36949771" checked=""/><div class="controls bullet"><span class="by">Snawoot</span><span>|</span><a href="#36950264">prev</a><span>|</span><a href="#36950787">next</a><span>|</span><label class="collapse" for="c-36949771">[-]</label><label class="expand" for="c-36949771">[6 more]</label></div><br/><div class="children"><div class="content">Why not use protocols which are specifically designed to report mapped IP address like STUN? It&#x27;s faster as UDP exchange is shorter than 3-way TCP handshake (or even TCP+TLS handshake).<p>Here is an implementation which uses parallel STUN queries to report address reliably as fast as possible: <a href="https:&#x2F;&#x2F;github.com&#x2F;Snawoot&#x2F;myip">https:&#x2F;&#x2F;github.com&#x2F;Snawoot&#x2F;myip</a></div><br/><div id="36949960" class="c"><input type="checkbox" id="c-36949960" checked=""/><div class="controls bullet"><span class="by">msm_</span><span>|</span><a href="#36949771">parent</a><span>|</span><a href="#36951814">next</a><span>|</span><label class="collapse" for="c-36949960">[-]</label><label class="expand" for="c-36949960">[2 more]</label></div><br/><div class="children"><div class="content">Nice tool! Looks like a great solution.<p>But unfortunately I don&#x27;t have it in a random docker&#x2F;kubernetes containers or random internal servers, and these are the contexts where I personally usually want to check my external IP. They usually have curl though.</div><br/><div id="36950284" class="c"><input type="checkbox" id="c-36950284" checked=""/><div class="controls bullet"><span class="by">seabass-labrax</span><span>|</span><a href="#36949771">root</a><span>|</span><a href="#36949960">parent</a><span>|</span><a href="#36951814">next</a><span>|</span><label class="collapse" for="c-36950284">[-]</label><label class="expand" for="c-36950284">[1 more]</label></div><br/><div class="children"><div class="content">Maybe curl ought to support STUN (if it doesn&#x27;t already). It&#x27;s becoming a very common technology now that NAT is so prevalent.</div><br/></div></div></div></div><div id="36951814" class="c"><input type="checkbox" id="c-36951814" checked=""/><div class="controls bullet"><span class="by">tchbnl</span><span>|</span><a href="#36949771">parent</a><span>|</span><a href="#36949960">prev</a><span>|</span><a href="#36950159">next</a><span>|</span><label class="collapse" for="c-36951814">[-]</label><label class="expand" for="c-36951814">[1 more]</label></div><br/><div class="children"><div class="content">This is very cool and something that&#x27;d be neat to roll into a toolset. But I think you&#x27;re missing the point of izanhazip. It&#x27;s meant to be quick and easily accessible regardless of where you are or what system you&#x27;re on (assuming there&#x27;s curl or similar installed).<p>I might not have permission or it wouldn&#x27;t be reasonable to install something. And I can link it to customers or give them a simple command to run, and all it returns is the actual info I need from them.</div><br/></div></div><div id="36950159" class="c"><input type="checkbox" id="c-36950159" checked=""/><div class="controls bullet"><span class="by">diath</span><span>|</span><a href="#36949771">parent</a><span>|</span><a href="#36951814">prev</a><span>|</span><a href="#36950787">next</a><span>|</span><label class="collapse" for="c-36950159">[-]</label><label class="expand" for="c-36950159">[2 more]</label></div><br/><div class="children"><div class="content">Because one requires you to merely type a simple URL in your browser that you already likely have open, the other requires you to install Go, clone a git repo, compile the program, install the program, and THEN finally run the program.</div><br/><div id="36950742" class="c"><input type="checkbox" id="c-36950742" checked=""/><div class="controls bullet"><span class="by">justsomehnguy</span><span>|</span><a href="#36949771">root</a><span>|</span><a href="#36950159">parent</a><span>|</span><a href="#36950787">next</a><span>|</span><label class="collapse" for="c-36950742">[-]</label><label class="expand" for="c-36950742">[1 more]</label></div><br/><div class="children"><div class="content">... only to be blocked by the corporate firewall which doesn&#x27;t allow anything besides tcp&#x2F;80 and tcp&#x2F;443.</div><br/></div></div></div></div></div></div><div id="36950787" class="c"><input type="checkbox" id="c-36950787" checked=""/><div class="controls bullet"><span class="by">kayodelycaon</span><span>|</span><a href="#36949771">prev</a><span>|</span><a href="#36949339">next</a><span>|</span><label class="collapse" for="c-36950787">[-]</label><label class="expand" for="c-36950787">[1 more]</label></div><br/><div class="children"><div class="content">Ah Major Hayden. Great guy. I remember getting a crash course on system administration in Slicehost’s IRC channel because some idiot ran an ancient Java application server on an open port. We got hacked and I got volun-told to clean up the mess because I was the only person running Linux on my laptop.<p>Everyone was so nice and I learned so much. I owe them all a lot of drinks. :)</div><br/></div></div><div id="36949339" class="c"><input type="checkbox" id="c-36949339" checked=""/><div class="controls bullet"><span class="by">ChrisArchitect</span><span>|</span><a href="#36950787">prev</a><span>|</span><a href="#36953059">next</a><span>|</span><label class="collapse" for="c-36949339">[-]</label><label class="expand" for="c-36949339">[1 more]</label></div><br/><div class="children"><div class="content">This is a re-blog;  Original post: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=27415537">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;item?id=27415537</a></div><br/></div></div><div id="36953059" class="c"><input type="checkbox" id="c-36953059" checked=""/><div class="controls bullet"><span class="by">makach</span><span>|</span><a href="#36949339">prev</a><span>|</span><a href="#36950726">next</a><span>|</span><label class="collapse" for="c-36953059">[-]</label><label class="expand" for="c-36953059">[1 more]</label></div><br/><div class="children"><div class="content">what an amazing letter, thank you for your service!<p>icanhazip is part of internet lore, and passing it on to Cloudflare is a very noble thing to do! Cloudflare, please stay true to the idealistic principles of simplicity and availability for the service.</div><br/></div></div><div id="36950726" class="c"><input type="checkbox" id="c-36950726" checked=""/><div class="controls bullet"><span class="by">yardstick</span><span>|</span><a href="#36953059">prev</a><span>|</span><a href="#36949536">next</a><span>|</span><label class="collapse" for="c-36950726">[-]</label><label class="expand" for="c-36950726">[3 more]</label></div><br/><div class="children"><div class="content">I used to use ipchicken and some others, but now I just type “what is my ip” into google and get it that way. Not suitable for automation but in my case it’s just a quick manual check.</div><br/><div id="36950741" class="c"><input type="checkbox" id="c-36950741" checked=""/><div class="controls bullet"><span class="by">blahyawnblah</span><span>|</span><a href="#36950726">parent</a><span>|</span><a href="#36953726">next</a><span>|</span><label class="collapse" for="c-36950741">[-]</label><label class="expand" for="c-36950741">[1 more]</label></div><br/><div class="children"><div class="content">curl ipinfo.io or ipinfo.io&#x2F;ip</div><br/></div></div></div></div><div id="36949536" class="c"><input type="checkbox" id="c-36949536" checked=""/><div class="controls bullet"><span class="by">brandonp0</span><span>|</span><a href="#36950726">prev</a><span>|</span><a href="#36953358">next</a><span>|</span><label class="collapse" for="c-36949536">[-]</label><label class="expand" for="c-36949536">[1 more]</label></div><br/><div class="children"><div class="content">I made a site like this to mess with a guy at work. Everyone knew of IPChicken, and his last name is Herring, so I created IPHerring. I&#x27;d put Photoshopped images of him on the site for different holidays and coworkers always thought it was hilarious. They would even send me ideas of what to put next.<p>Now I sometimes use AI image generation tools to really make it stand out. It&#x27;s been a lot of fun. A lot of the tech folks in my area are using it now.</div><br/></div></div><div id="36953358" class="c"><input type="checkbox" id="c-36953358" checked=""/><div class="controls bullet"><span class="by">SergeAx</span><span>|</span><a href="#36949536">prev</a><span>|</span><a href="#36950962">next</a><span>|</span><label class="collapse" for="c-36953358">[-]</label><label class="expand" for="c-36953358">[3 more]</label></div><br/><div class="children"><div class="content">Earlier today, I talked with my ex-colleague about things being bloated and unnecessarily complicated in software. Here we have a perfect example.<p><pre><code>  $ curl -v icanhazip.com

  &gt; GET &#x2F; HTTP&#x2F;1.1
  &gt; Host: icanhazip.com
  &gt; User-Agent: curl&#x2F;8.2.1
  &gt; Accept: *&#x2F;*   
</code></pre>
curl is being curl here: protocol, host, shortest possible user-agent string, nothing extra. Let&#x27;s see the reply:<p><pre><code>  &lt; HTTP&#x2F;1.1 200 OK
</code></pre>
Okay.<p><pre><code>  &lt; Date: Tue, 01 Aug 2023 06:59:21 GMT
</code></pre>
I am not sure, is it really necessary? I will use NTP if I need to know the current GMT. RFC doesn&#x27;t state this header as mandatory.<p><pre><code>  &lt; Content-Type: text&#x2F;plain
  &lt; Content-Length: 14
</code></pre>
Okay, nice to know.<p><pre><code>  &lt; Connection: keep-alive
</code></pre>
Really? What&#x27;s a use case here? Do I need to be reminded of my IP again in a few seconds? Or is it in case my IP will quickly change? Oh, never mind...<p><pre><code>  &lt; Access-Control-Allow-Origin: *
  &lt; Access-Control-Allow-Methods: GET
</code></pre>
Now, this is a bit ridiculous. Why would the fetch-based browser app rely on a third-party service to determine the client&#x27;s IP?<p><pre><code>  &lt; Set-Cookie: [250 bytes of total abomination]
</code></pre>
Why, oh why? Why do I need to receive this and keep it somewhere? All I want is to haz IP! Can I only haz IP?<p><pre><code>  &lt; Server: cloudflare
</code></pre>
Okay, a little vanity never killed nobody.<p><pre><code>  &lt; CF-RAY: 7efc32adfef5c21e-VIE
</code></pre>
I know what Cloudflare Ray is. The question is: why do I need it here?<p><pre><code>  &lt; alt-svc: h3=&quot;:443&quot;; ma=86400
</code></pre>
Good to know, maybe, but to be honest - this is redundant too.<p><pre><code>  xxx.xx.xx.xx [my IP address, masked for privacy reasons]
</code></pre>
At last! Now I can do my thing with the IP I just haz.<p>I will not rant here about extra bytes transferred, extra bandwidth congested, extra electricity burned, and so on. Sapienti sat. Two side notes: it replies with HTTP 1.1 on HTTP 1.0 request, and it still puts alt-svc header into https reply.<p>I rest my case.</div><br/><div id="36953439" class="c"><input type="checkbox" id="c-36953439" checked=""/><div class="controls bullet"><span class="by">thefz</span><span>|</span><a href="#36953358">parent</a><span>|</span><a href="#36950962">next</a><span>|</span><label class="collapse" for="c-36953439">[-]</label><label class="expand" for="c-36953439">[2 more]</label></div><br/><div class="children"><div class="content">Just use plain curl and all you are getting is the IP.<p>It was conceived this way to be used in scripts. I don&#x27;t see why you might want to -v here except to prove a non existing point that you made up.</div><br/><div id="36953503" class="c"><input type="checkbox" id="c-36953503" checked=""/><div class="controls bullet"><span class="by">SergeAx</span><span>|</span><a href="#36953358">root</a><span>|</span><a href="#36953439">parent</a><span>|</span><a href="#36950962">next</a><span>|</span><label class="collapse" for="c-36953503">[-]</label><label class="expand" for="c-36953503">[1 more]</label></div><br/><div class="children"><div class="content">Because I was interested in the whole response, not it&#x27;s text&#x2F;plain part. All those headers are still there, even if I don&#x27;t use them.</div><br/></div></div></div></div></div></div><div id="36950962" class="c"><input type="checkbox" id="c-36950962" checked=""/><div class="controls bullet"><span class="by">jesprenj</span><span>|</span><a href="#36953358">prev</a><span>|</span><a href="#36950059">next</a><span>|</span><label class="collapse" for="c-36950962">[-]</label><label class="expand" for="c-36950962">[1 more]</label></div><br/><div class="children"><div class="content">Quite useful that it returns a newline after the IP address.<p>My similar setup with nginx (<a href="http:&#x2F;&#x2F;4a.si&#x2F;ip" rel="nofollow noreferrer">http:&#x2F;&#x2F;4a.si&#x2F;ip</a>) only returns $remote_addr without the newline, making it ugly for using with `curl`.</div><br/></div></div><div id="36950059" class="c"><input type="checkbox" id="c-36950059" checked=""/><div class="controls bullet"><span class="by">cferry</span><span>|</span><a href="#36950962">prev</a><span>|</span><a href="#36949721">next</a><span>|</span><label class="collapse" for="c-36950059">[-]</label><label class="expand" for="c-36950059">[1 more]</label></div><br/><div class="children"><div class="content">Not having to ask the public facing IP address of some NAT-performing router is one of the good sides of IPv6. I&#x27;m wondering what uses there are of such a service, besides dynamic DNS updates, that would need automated queries and result in such an overwhelming amount of traffic...</div><br/></div></div><div id="36949203" class="c"><input type="checkbox" id="c-36949203" checked=""/><div class="controls bullet"><span class="by">politelemon</span><span>|</span><a href="#36949721">prev</a><span>|</span><a href="#36949029">next</a><span>|</span><label class="collapse" for="c-36949203">[-]</label><label class="expand" for="c-36949203">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s a great read, the author had a passion project and stuck by it. I&#x27;d love to read more of these</div><br/></div></div><div id="36949029" class="c"><input type="checkbox" id="c-36949029" checked=""/><div class="controls bullet"><span class="by">sunshinekitty</span><span>|</span><a href="#36949203">prev</a><span>|</span><a href="#36949906">next</a><span>|</span><label class="collapse" for="c-36949029">[-]</label><label class="expand" for="c-36949029">[1 more]</label></div><br/><div class="children"><div class="content">A great tool I’ve used countless times after learning about it while working at Rackspace a decade ago . It was great to learn about how it’s grown over the years, what an ordeal!<p>Cloudflare is at the top of the list of custodians I would want if in a similar position, glad it’s found a new steward.</div><br/></div></div><div id="36949906" class="c"><input type="checkbox" id="c-36949906" checked=""/><div class="controls bullet"><span class="by">blibble</span><span>|</span><a href="#36949029">prev</a><span>|</span><a href="#36951090">next</a><span>|</span><label class="collapse" for="c-36949906">[-]</label><label class="expand" for="c-36949906">[2 more]</label></div><br/><div class="children"><div class="content">if some AS is taking the piss: start returning random addresses just for them?<p>they&#x27;d soon learn</div><br/><div id="36950731" class="c"><input type="checkbox" id="c-36950731" checked=""/><div class="controls bullet"><span class="by">yardstick</span><span>|</span><a href="#36949906">parent</a><span>|</span><a href="#36951090">next</a><span>|</span><label class="collapse" for="c-36950731">[-]</label><label class="expand" for="c-36950731">[1 more]</label></div><br/><div class="children"><div class="content">Yeah I’m surprised this wasn’t attempted</div><br/></div></div></div></div><div id="36951090" class="c"><input type="checkbox" id="c-36951090" checked=""/><div class="controls bullet"><span class="by">stuartd</span><span>|</span><a href="#36949906">prev</a><span>|</span><a href="#36950708">next</a><span>|</span><label class="collapse" for="c-36951090">[-]</label><label class="expand" for="c-36951090">[3 more]</label></div><br/><div class="children"><div class="content">When I’m configuring flask on a random AWS server, `curl icanhazip.com` makes it easier and adds a little light to a boring task</div><br/><div id="36951105" class="c"><input type="checkbox" id="c-36951105" checked=""/><div class="controls bullet"><span class="by">RKearney</span><span>|</span><a href="#36951090">parent</a><span>|</span><a href="#36950708">next</a><span>|</span><label class="collapse" for="c-36951105">[-]</label><label class="expand" for="c-36951105">[2 more]</label></div><br/><div class="children"><div class="content">AWS has an endpoint for this: <a href="http:&#x2F;&#x2F;checkip.amazonaws.com" rel="nofollow noreferrer">http:&#x2F;&#x2F;checkip.amazonaws.com</a></div><br/><div id="36951370" class="c"><input type="checkbox" id="c-36951370" checked=""/><div class="controls bullet"><span class="by">arjvik</span><span>|</span><a href="#36951090">root</a><span>|</span><a href="#36951105">parent</a><span>|</span><a href="#36950708">next</a><span>|</span><label class="collapse" for="c-36951370">[-]</label><label class="expand" for="c-36951370">[1 more]</label></div><br/><div class="children"><div class="content">Saves a few milliseconds of transit at the expense of a few seconds of chuckling... not worth it :)</div><br/></div></div></div></div></div></div><div id="36950708" class="c"><input type="checkbox" id="c-36950708" checked=""/><div class="controls bullet"><span class="by">georgiop</span><span>|</span><a href="#36951090">prev</a><span>|</span><a href="#36949481">next</a><span>|</span><label class="collapse" for="c-36950708">[-]</label><label class="expand" for="c-36950708">[1 more]</label></div><br/><div class="children"><div class="content">The amount of intel Cloudflare obtains from this would be staggering. Just the TLS signatures alone is a goldmine. Look at the CISCO mercury product and their TLS database with malware detection. Or how Akamai bought <a href="https:&#x2F;&#x2F;www.fingerbank.org&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.fingerbank.org&#x2F;</a><p>You got the short end of the stick for $8 reimbursement!</div><br/></div></div><div id="36949481" class="c"><input type="checkbox" id="c-36949481" checked=""/><div class="controls bullet"><span class="by">renewiltord</span><span>|</span><a href="#36950708">prev</a><span>|</span><a href="#36951739">next</a><span>|</span><label class="collapse" for="c-36949481">[-]</label><label class="expand" for="c-36949481">[3 more]</label></div><br/><div class="children"><div class="content">It&#x27;s funny that there are so many of these. I use<p><pre><code>    curl ifconfig.me</code></pre></div><br/><div id="36949629" class="c"><input type="checkbox" id="c-36949629" checked=""/><div class="controls bullet"><span class="by">jamesponddotco</span><span>|</span><a href="#36949481">parent</a><span>|</span><a href="#36951739">next</a><span>|</span><label class="collapse" for="c-36949629">[-]</label><label class="expand" for="c-36949629">[2 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a fun project if you want to learn to code, which is why I think there&#x27;re so many of them around. I built and run Accio127[1][2] for the same reason.<p>[1] <a href="https:&#x2F;&#x2F;api.accio127.com&#x2F;v1&#x2F;ip&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;api.accio127.com&#x2F;v1&#x2F;ip&#x2F;</a><p>[2] <a href="https:&#x2F;&#x2F;git.sr.ht&#x2F;~jamesponddotco&#x2F;accio127" rel="nofollow noreferrer">https:&#x2F;&#x2F;git.sr.ht&#x2F;~jamesponddotco&#x2F;accio127</a></div><br/><div id="36950199" class="c"><input type="checkbox" id="c-36950199" checked=""/><div class="controls bullet"><span class="by">tetrep</span><span>|</span><a href="#36949481">root</a><span>|</span><a href="#36949629">parent</a><span>|</span><a href="#36951739">next</a><span>|</span><label class="collapse" for="c-36950199">[-]</label><label class="expand" for="c-36950199">[1 more]</label></div><br/><div class="children"><div class="content">Indeed, it&#x27;s like &quot;hello, world!&quot; but actually useful :)</div><br/></div></div></div></div></div></div><div id="36951739" class="c"><input type="checkbox" id="c-36951739" checked=""/><div class="controls bullet"><span class="by">jokoon</span><span>|</span><a href="#36949481">prev</a><span>|</span><a href="#36948801">next</a><span>|</span><label class="collapse" for="c-36951739">[-]</label><label class="expand" for="c-36951739">[1 more]</label></div><br/><div class="children"><div class="content">Those numbers are astronomical<p>So he did not solve that Chinese block?<p>No follow up?</div><br/></div></div><div id="36948801" class="c"><input type="checkbox" id="c-36948801" checked=""/><div class="controls bullet"><span class="by">LeoPanthera</span><span>|</span><a href="#36951739">prev</a><span>|</span><label class="collapse" for="c-36948801">[-]</label><label class="expand" for="c-36948801">[17 more]</label></div><br/><div class="children"><div class="content">tl;dr: Bought by Cloudflare.</div><br/><div id="36948904" class="c"><input type="checkbox" id="c-36948904" checked=""/><div class="controls bullet"><span class="by">cryne</span><span>|</span><a href="#36948801">parent</a><span>|</span><a href="#36948913">next</a><span>|</span><label class="collapse" for="c-36948904">[-]</label><label class="expand" for="c-36948904">[1 more]</label></div><br/><div class="children"><div class="content">...for a symbolic price because &quot;the fun totally dried up&quot; for the author and he felt the site would  be in good hands at Cloudflare.</div><br/></div></div><div id="36948913" class="c"><input type="checkbox" id="c-36948913" checked=""/><div class="controls bullet"><span class="by">alpb</span><span>|</span><a href="#36948801">parent</a><span>|</span><a href="#36948904">prev</a><span>|</span><a href="#36949694">next</a><span>|</span><label class="collapse" for="c-36948913">[-]</label><label class="expand" for="c-36948913">[14 more]</label></div><br/><div class="children"><div class="content">&gt; Their sponsorship of icanhazip.com has saved me tens of thousands of dollars per month.<p>Can someone please explain how does returning a few hundred bytes of plaintext response can cost thousands of dollars? Either I&#x27;m really bad at estimating things or there&#x27;s some hidden cost somewhere I&#x27;m not seeing.<p>Also why could it not work fine behind a Cloudflare free tier?</div><br/><div id="36948967" class="c"><input type="checkbox" id="c-36948967" checked=""/><div class="controls bullet"><span class="by">karamanolev</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36948913">parent</a><span>|</span><a href="#36948989">next</a><span>|</span><label class="collapse" for="c-36948967">[-]</label><label class="expand" for="c-36948967">[11 more]</label></div><br/><div class="children"><div class="content">&gt; In 2021, the traffic I once received in a month started arriving in 24 hours. The site went from a billion requests per day to 30-35 billion requests per day over a weekend.<p>30 billion times 350 bytes (size of my response) is equal to 10.5 terabytes (base-10) a day. 84 terabits per day, 84000&#x2F;3600&#x2F;24 ~= 1 gigabit if my math is right. A fully saturated 1 gigabit pipe of worldwide internet costs a lot. So, there.</div><br/><div id="36949139" class="c"><input type="checkbox" id="c-36949139" checked=""/><div class="controls bullet"><span class="by">alpb</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36948967">parent</a><span>|</span><a href="#36949886">next</a><span>|</span><label class="collapse" for="c-36949139">[-]</label><label class="expand" for="c-36949139">[3 more]</label></div><br/><div class="children"><div class="content">Really interesting. I never heard of this website and was surprised to hear this volume of traffic it&#x27;s getting. (I always used curlmyip.org or whatsmyip.net|.com). I wonder what is the rationale for providing a non-rate limited service that can be easily abused like this. The volume almost suggests some stuff like IoT devices or other software use this to test internet connectivity. Or botnets?</div><br/><div id="36950588" class="c"><input type="checkbox" id="c-36950588" checked=""/><div class="controls bullet"><span class="by">vlan0</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36949139">parent</a><span>|</span><a href="#36949440">next</a><span>|</span><label class="collapse" for="c-36950588">[-]</label><label class="expand" for="c-36950588">[1 more]</label></div><br/><div class="children"><div class="content">&gt;Seeing that over 90% of my traffic load was malicious and abusive was frustrating. Dealing with the abuse emails and complaints was worse.<p>My take. I suspect Cloudflare benefited allowing that traffic. It&#x27;s another data point&#x2F;tool in their toolbox against the baddies.</div><br/></div></div><div id="36949440" class="c"><input type="checkbox" id="c-36949440" checked=""/><div class="controls bullet"><span class="by">thefifthsetpin</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36949139">parent</a><span>|</span><a href="#36950588">prev</a><span>|</span><a href="#36949886">next</a><span>|</span><label class="collapse" for="c-36949440">[-]</label><label class="expand" for="c-36949440">[1 more]</label></div><br/><div class="children"><div class="content">I believe that creating a traffic rate-limiting system, which is more cost-effective than simply echoing back the requestor&#x27;s IP address, is likely to be a complex task. However, I haven&#x27;t personally performed the calculations to confirm this.</div><br/></div></div></div></div><div id="36949886" class="c"><input type="checkbox" id="c-36949886" checked=""/><div class="controls bullet"><span class="by">Zetice</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36948967">parent</a><span>|</span><a href="#36949139">prev</a><span>|</span><a href="#36949076">next</a><span>|</span><label class="collapse" for="c-36949886">[-]</label><label class="expand" for="c-36949886">[5 more]</label></div><br/><div class="children"><div class="content">At $0.085 per GB (some us-east-1 exfil cost Google gave me), 10TB is... ~$1k&#x2F;day?<p>Yeah sorry, I would not pay $30k&#x2F;mo so y&#x27;all could track your external IP addresses...</div><br/><div id="36950140" class="c"><input type="checkbox" id="c-36950140" checked=""/><div class="controls bullet"><span class="by">TechBro8615</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36949886">parent</a><span>|</span><a href="#36950141">next</a><span>|</span><label class="collapse" for="c-36950140">[-]</label><label class="expand" for="c-36950140">[1 more]</label></div><br/><div class="children"><div class="content">OP said a fully saturated gigabit link, which generally means you pay for transit (&quot;size of the pipe&quot;) rather than &quot;stuff pushed through it.&quot; I haven&#x27;t been in the market for a long time, but 5-10 years ago the price was on the order of $0.50 per mbps, so $500 for a 1000 gbps (&quot;gigabit&quot;) link. Usually you buy this with a dedicated server or colocation. You wouldn&#x27;t want to host this in the cloud because they price gouge you on bandwidth by charging for stuff through the pipe.<p>And that&#x27;s if you truly expect to saturate it. If you just want to take the risk and go for oversold fiber, you can pay some nominal price for &quot;unmetered bandwidth&quot; (with the caveat that if you&#x27;re saturating the pipe, your host will probably make you pay for it eventually).</div><br/></div></div><div id="36950141" class="c"><input type="checkbox" id="c-36950141" checked=""/><div class="controls bullet"><span class="by">Fornax96</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36949886">parent</a><span>|</span><a href="#36950140">prev</a><span>|</span><a href="#36949076">next</a><span>|</span><label class="collapse" for="c-36950141">[-]</label><label class="expand" for="c-36950141">[3 more]</label></div><br/><div class="children"><div class="content">That&#x27;s ridiculous bandwidth pricing. you can get unmetered gigabit at Hetzner for €20 per month. Need 2 Gb? Order a second server.</div><br/><div id="36950684" class="c"><input type="checkbox" id="c-36950684" checked=""/><div class="controls bullet"><span class="by">lkbm</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36950141">parent</a><span>|</span><a href="#36950495">next</a><span>|</span><label class="collapse" for="c-36950684">[-]</label><label class="expand" for="c-36950684">[1 more]</label></div><br/><div class="children"><div class="content">He was using Hetzner and says it was costing him $200&#x2F;month. He then had to spin up a second server, presumably increasing the cost, and it was still struggling.<p>From there traffic doubled, and he moved to Cloudflare Workers. And then traffic 30xed.<p>I suspect it&#x27;s more about request count (&gt;300k per second) than raw number of bits.</div><br/></div></div><div id="36950495" class="c"><input type="checkbox" id="c-36950495" checked=""/><div class="controls bullet"><span class="by">Zetice</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36950141">parent</a><span>|</span><a href="#36950684">prev</a><span>|</span><a href="#36949076">next</a><span>|</span><label class="collapse" for="c-36950495">[-]</label><label class="expand" for="c-36950495">[1 more]</label></div><br/><div class="children"><div class="content">Do you think this is an important point?</div><br/></div></div></div></div></div></div></div></div><div id="36948989" class="c"><input type="checkbox" id="c-36948989" checked=""/><div class="controls bullet"><span class="by">bunga-bunga</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36948913">parent</a><span>|</span><a href="#36948967">prev</a><span>|</span><a href="#36949512">next</a><span>|</span><label class="collapse" for="c-36948989">[-]</label><label class="expand" for="c-36948989">[1 more]</label></div><br/><div class="children"><div class="content">It mentions 2 petabytes of data per month, plus compute for a trillion requests per month. It sounds like all kinds of optimizations were made so probably it can’t be much cheaper. My guess is that the “tens of thousands” is calculated on CF Workers prices though.</div><br/></div></div><div id="36949512" class="c"><input type="checkbox" id="c-36949512" checked=""/><div class="controls bullet"><span class="by">veave</span><span>|</span><a href="#36948801">root</a><span>|</span><a href="#36948913">parent</a><span>|</span><a href="#36948989">prev</a><span>|</span><a href="#36949694">next</a><span>|</span><label class="collapse" for="c-36949512">[-]</label><label class="expand" for="c-36949512">[1 more]</label></div><br/><div class="children"><div class="content">&gt;Also why could it not work fine behind a Cloudflare free tier?<p>Eh, how would that even work? You have to serve the requests anyway.</div><br/></div></div></div></div><div id="36949694" class="c"><input type="checkbox" id="c-36949694" checked=""/><div class="controls bullet"><span class="by">ChrisClark</span><span>|</span><a href="#36948801">parent</a><span>|</span><a href="#36948913">prev</a><span>|</span><label class="collapse" for="c-36949694">[-]</label><label class="expand" for="c-36949694">[1 more]</label></div><br/><div class="children"><div class="content">For $8.</div><br/></div></div></div></div></div></div></div></div></div></body></html>