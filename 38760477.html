<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1703494858722" as="style"/><link rel="stylesheet" href="styles.css?v=1703494858722"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://www.ruby-lang.org/en/news/2023/12/25/ruby-3-3-0-released/">Ruby 3.3</a> <span class="domain">(<a href="https://www.ruby-lang.org">www.ruby-lang.org</a>)</span></div><div class="subtext"><span>dduugg</span> | <span>21 comments</span></div><br/><div><div id="38760586" class="c"><input type="checkbox" id="c-38760586" checked=""/><div class="controls bullet"><span class="by">ksec</span><span>|</span><a href="#38760826">next</a><span>|</span><label class="collapse" for="c-38760586">[-]</label><label class="expand" for="c-38760586">[4 more]</label></div><br/><div class="children"><div class="content">I think Ruby 3.3 is perhaps one of the most important and feature rich Ruby release in the past 10 years. I never thought Ruby would have a shipping and production ready JIT before Python. And Prism, Lrama, IRB. A lot of these were discussed in previous HN submissions.<p>But one thing that is not mentioned or discussed enough, is Ractor, M:N thread scheduler, Fibre and Async. Especially in the context of Rails. I am wondering if any one are using these features in productions and if you could share any thoughts on the subject.</div><br/><div id="38760785" class="c"><input type="checkbox" id="c-38760785" checked=""/><div class="controls bullet"><span class="by">rjzzleep</span><span>|</span><a href="#38760586">parent</a><span>|</span><a href="#38760826">next</a><span>|</span><label class="collapse" for="c-38760785">[-]</label><label class="expand" for="c-38760785">[3 more]</label></div><br/><div class="children"><div class="content">The one thing I genuinely don&#x27;t understand is why there is no single task queue that works across ruby and python. I get that at some point people just started making http based microservices to pass information around, but at the end of the day a simple task queue that has a unified storage format across both is a better way to connect ruby(rails) based with the ml stack. There are probably thousands of custom rabbitmq or redis based private company solutions out there.</div><br/><div id="38760798" class="c"><input type="checkbox" id="c-38760798" checked=""/><div class="controls bullet"><span class="by">byroot</span><span>|</span><a href="#38760586">root</a><span>|</span><a href="#38760785">parent</a><span>|</span><a href="#38760826">next</a><span>|</span><label class="collapse" for="c-38760798">[-]</label><label class="expand" for="c-38760798">[2 more]</label></div><br/><div class="children"><div class="content">Mike Perham (the sidekiq maintainer) also maintains the less well known faktory[0] which is language agnostic and has runners for both Ruby and Python<p>[0] <a href="https:&#x2F;&#x2F;github.com&#x2F;contribsys&#x2F;faktory">https:&#x2F;&#x2F;github.com&#x2F;contribsys&#x2F;faktory</a></div><br/><div id="38760828" class="c"><input type="checkbox" id="c-38760828" checked=""/><div class="controls bullet"><span class="by">rjzzleep</span><span>|</span><a href="#38760586">root</a><span>|</span><a href="#38760798">parent</a><span>|</span><a href="#38760826">next</a><span>|</span><label class="collapse" for="c-38760828">[-]</label><label class="expand" for="c-38760828">[1 more]</label></div><br/><div class="children"><div class="content">That&#x27;s awesome. Any idea why he doesn&#x27;t just supersede Sidekiq with that? I spent quite some time hacking my own solution.<p>I just looked at the source, I guess Mike has been mostly working on both projects on his own for the last 4 years, so Faktory has a lot of features that require the enterprise license.<p>I wonder if he could change the situation it he markets a bit more to the python and more specifically Django community.</div><br/></div></div></div></div></div></div></div></div><div id="38760826" class="c"><input type="checkbox" id="c-38760826" checked=""/><div class="controls bullet"><span class="by">ciconia</span><span>|</span><a href="#38760586">prev</a><span>|</span><a href="#38760936">next</a><span>|</span><label class="collapse" for="c-38760826">[-]</label><label class="expand" for="c-38760826">[1 more]</label></div><br/><div class="children"><div class="content">I believe with version 3.3 Ruby is back in a big way! The language focused on developer happiness and derided for its slowness is slow no more.<p>YJIT is an amazing technology, and together with other innovations like object shapes and various GC  optimizations, Ruby is becoming seriously fast! Big Ruby shops such as Shopify [1] have been running 3.3 pre-release with YJIT and reporting double digit performance improvements.<p>Personally I&#x27;m really excited about Ruby and its future. I can&#x27;t wait to start working with Ruby 3.3 and using it on my client&#x27;s production sites...<p>[1] <a href="https:&#x2F;&#x2F;railsatscale.com&#x2F;2023-09-18-ruby-3-3-s-yjit-runs-shopify-s-production-code-15-faster&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;railsatscale.com&#x2F;2023-09-18-ruby-3-3-s-yjit-runs-sho...</a></div><br/></div></div><div id="38760936" class="c"><input type="checkbox" id="c-38760936" checked=""/><div class="controls bullet"><span class="by">nextaccountic</span><span>|</span><a href="#38760826">prev</a><span>|</span><a href="#38760609">next</a><span>|</span><label class="collapse" for="c-38760936">[-]</label><label class="expand" for="c-38760936">[1 more]</label></div><br/><div class="children"><div class="content">&gt; RUBY_MAX_CPU=n environment variable sets maximum number of N (maximum number of native threads). The default value is 8.<p>Shouldn&#x27;t the default be the number of logical cores? Like Rust&#x27;s Tokio and countless other M:N runtimes</div><br/></div></div><div id="38760609" class="c"><input type="checkbox" id="c-38760609" checked=""/><div class="controls bullet"><span class="by">alberth</span><span>|</span><a href="#38760936">prev</a><span>|</span><a href="#38760603">next</a><span>|</span><label class="collapse" for="c-38760609">[-]</label><label class="expand" for="c-38760609">[2 more]</label></div><br/><div class="children"><div class="content">Every Christmas, like clockwork, Ruby Lang drops a new release.</div><br/><div id="38760720" class="c"><input type="checkbox" id="c-38760720" checked=""/><div class="controls bullet"><span class="by">quickthrower2</span><span>|</span><a href="#38760609">parent</a><span>|</span><a href="#38760603">next</a><span>|</span><label class="collapse" for="c-38760720">[-]</label><label class="expand" for="c-38760720">[1 more]</label></div><br/><div class="children"><div class="content">It is a cute thing about Ruby</div><br/></div></div></div></div><div id="38760603" class="c"><input type="checkbox" id="c-38760603" checked=""/><div class="controls bullet"><span class="by">phaedryx</span><span>|</span><a href="#38760609">prev</a><span>|</span><a href="#38760639">next</a><span>|</span><label class="collapse" for="c-38760603">[-]</label><label class="expand" for="c-38760603">[2 more]</label></div><br/><div class="children"><div class="content">Prism is interesting. Any Ruby code analysis tools that use it? I&#x27;ve been looking for ways to analyze my code at work.</div><br/><div id="38760656" class="c"><input type="checkbox" id="c-38760656" checked=""/><div class="controls bullet"><span class="by">nirvdrum</span><span>|</span><a href="#38760603">parent</a><span>|</span><a href="#38760639">next</a><span>|</span><label class="collapse" for="c-38760656">[-]</label><label class="expand" for="c-38760656">[1 more]</label></div><br/><div class="children"><div class="content">The Ruby LSP uses Prism. Kevin Newton has implemented a Prism-based backed for the white quark&#x2F;parser gem [1] that can be used with Rubocop.<p>[1] <a href="https:&#x2F;&#x2F;github.com&#x2F;kddnewton&#x2F;parser-prism">https:&#x2F;&#x2F;github.com&#x2F;kddnewton&#x2F;parser-prism</a></div><br/></div></div></div></div><div id="38760639" class="c"><input type="checkbox" id="c-38760639" checked=""/><div class="controls bullet"><span class="by">pgib</span><span>|</span><a href="#38760603">prev</a><span>|</span><a href="#38760633">next</a><span>|</span><label class="collapse" for="c-38760639">[-]</label><label class="expand" for="c-38760639">[1 more]</label></div><br/><div class="children"><div class="content">Very much looking forward to upgrading our application to ensure 3.3 compatibility.</div><br/></div></div><div id="38760633" class="c"><input type="checkbox" id="c-38760633" checked=""/><div class="controls bullet"><span class="by">revskill</span><span>|</span><a href="#38760639">prev</a><span>|</span><label class="collapse" for="c-38760633">[-]</label><label class="expand" for="c-38760633">[9 more]</label></div><br/><div class="children"><div class="content">I hope Ruby 4.0 could allow explicit import and avoid implicit, global namespace gem import mechanism like nowsdays.</div><br/><div id="38760940" class="c"><input type="checkbox" id="c-38760940" checked=""/><div class="controls bullet"><span class="by">jhealy</span><span>|</span><a href="#38760633">parent</a><span>|</span><a href="#38760642">next</a><span>|</span><label class="collapse" for="c-38760940">[-]</label><label class="expand" for="c-38760940">[1 more]</label></div><br/><div class="children"><div class="content">Implicit or explicit, I’m OK with the global namespace.<p>On paper it’s awkward, but in reality convention and social norms make it rarely an issue.<p>The global namespace only supporting exactly one version of each gem encourages a health culture of stable ABIs and deprecation periods too. An absolute dream compared to some language ecosystems</div><br/></div></div><div id="38760642" class="c"><input type="checkbox" id="c-38760642" checked=""/><div class="controls bullet"><span class="by">t-writescode</span><span>|</span><a href="#38760633">parent</a><span>|</span><a href="#38760940">prev</a><span>|</span><a href="#38760815">next</a><span>|</span><label class="collapse" for="c-38760642">[-]</label><label class="expand" for="c-38760642">[6 more]</label></div><br/><div class="children"><div class="content">I&#x27;m feeling a bit ignorant, but isn&#x27;t this a Rails thing and not a Ruby thing? I know that for most projects that&#x27;s a distinction without a difference; but, that may be a decision from the Rails devs and unrelated to what Ruby&#x27;s devs do?<p>Or I&#x27;m speaking out of my ear and completely wrong (and I don&#x27;t know which :D)</div><br/><div id="38760726" class="c"><input type="checkbox" id="c-38760726" checked=""/><div class="controls bullet"><span class="by">byroot</span><span>|</span><a href="#38760633">root</a><span>|</span><a href="#38760642">parent</a><span>|</span><a href="#38760733">next</a><span>|</span><label class="collapse" for="c-38760726">[-]</label><label class="expand" for="c-38760726">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a Ruby thing. Ruby only has a single global namespace, no imports.<p>If anything Rails autoloading (Zeitwerk really) make it much easier to find where constants come from as it enforce a constant name -&gt; file name convention, so all you need is fuzzy file search.</div><br/></div></div><div id="38760733" class="c"><input type="checkbox" id="c-38760733" checked=""/><div class="controls bullet"><span class="by">Calavar</span><span>|</span><a href="#38760633">root</a><span>|</span><a href="#38760642">parent</a><span>|</span><a href="#38760726">prev</a><span>|</span><a href="#38760815">next</a><span>|</span><label class="collapse" for="c-38760733">[-]</label><label class="expand" for="c-38760733">[4 more]</label></div><br/><div class="children"><div class="content">You&#x27;re right, implicit import (autoload) is an opt-in feature. Rails used to use autoload by default as of 3.x&#x2F;4.x. It&#x27;s been quite a while since I used Rails, so I&#x27;m not sure if this is still the case.<p>Ruby imports have always used a single global namespace. I&#x27;m not convinced that this is an issue in practice - it&#x27;s worked just fine for several other languages.</div><br/><div id="38760778" class="c"><input type="checkbox" id="c-38760778" checked=""/><div class="controls bullet"><span class="by">hetman</span><span>|</span><a href="#38760633">root</a><span>|</span><a href="#38760733">parent</a><span>|</span><a href="#38760815">next</a><span>|</span><label class="collapse" for="c-38760778">[-]</label><label class="expand" for="c-38760778">[3 more]</label></div><br/><div class="children"><div class="content">I mean, only because it&#x27;s possible to learn to live with doesn&#x27;t make it pleasant. Especially for managing large projects it can get unwieldy. Most high level languages I can think of have moved away from this approach.<p>I used to be a huge Ruby fan but having exposure to Python where this isn&#x27;t an issue, life is just easier.</div><br/><div id="38760808" class="c"><input type="checkbox" id="c-38760808" checked=""/><div class="controls bullet"><span class="by">oleg_antonyan</span><span>|</span><a href="#38760633">root</a><span>|</span><a href="#38760778">parent</a><span>|</span><a href="#38760813">next</a><span>|</span><label class="collapse" for="c-38760808">[-]</label><label class="expand" for="c-38760808">[1 more]</label></div><br/><div class="children"><div class="content">It&#x27;s a matter of personal preference and&#x2F;or which one you&#x27;ve learnt to live with first.<p>I like how Ruby&#x27;s imports work - just load a file, similar to C. On the other hand, modules in Python always felt like something to overcome rather than &quot;just works as you expect&quot;.</div><br/></div></div><div id="38760813" class="c"><input type="checkbox" id="c-38760813" checked=""/><div class="controls bullet"><span class="by">ckolkey</span><span>|</span><a href="#38760633">root</a><span>|</span><a href="#38760778">parent</a><span>|</span><a href="#38760808">prev</a><span>|</span><a href="#38760815">next</a><span>|</span><label class="collapse" for="c-38760813">[-]</label><label class="expand" for="c-38760813">[1 more]</label></div><br/><div class="children"><div class="content">To each their own, I guess. After working with python&#x2F;lua, I really appreciate not needing to do manual imports all over. I&#x27;m glad ruby makes this so easy :)<p>Oh, and not needing __init__.py files in order to import something. Goodness, what an absolute pain.</div><br/></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>