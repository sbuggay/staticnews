<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1692003665494" as="style"/><link rel="stylesheet" href="styles.css?v=1692003665494"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/spandanb/learndb-py">Show HN: I wrote a RDBMS (SQLite clone) from scratch in pure Python</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>spanspan</span> | <span>59 comments</span></div><br/><div><div id="37114709" class="c"><input type="checkbox" id="c-37114709" checked=""/><div class="controls bullet"><span class="by">samsquire</span><span>|</span><a href="#37118823">next</a><span>|</span><label class="collapse" for="c-37114709">[-]</label><label class="expand" for="c-37114709">[9 more]</label></div><br/><div class="children"><div class="content">Thank you for sharing<p>My perspective is that writing this kind of system in a language such as Python is actually a great thing because for myself Python is more widely readable and approachable compared to C++ or C which is what databases are often programmed in. If someone wants to be serious they can port it to a low level language . As it stands it&#x27;s educational and useful for studying.<p>I wrote a distributed pseudo multi model SQL&#x2F;graph Cypher&#x2F;Document and dyanmodb style database in Python <a href="https:&#x2F;&#x2F;GitHub.com&#x2F;samsquire&#x2F;hash-db">https:&#x2F;&#x2F;GitHub.com&#x2F;samsquire&#x2F;hash-db</a> for the same goal of learning how database engines could work in a distributed way.</div><br/><div id="37118839" class="c"><input type="checkbox" id="c-37118839" checked=""/><div class="controls bullet"><span class="by">crabbone</span><span>|</span><a href="#37114709">parent</a><span>|</span><a href="#37114862">next</a><span>|</span><label class="collapse" for="c-37118839">[-]</label><label class="expand" for="c-37118839">[1 more]</label></div><br/><div class="children"><div class="content">Idk. Python is just as bad as C &#x2F; C++, with the downside that you cannot do much of the interesting stuff one would need to if they wanted to learn how to make databases, if they use Python.<p>Both C and Python are very &quot;approachable&quot; if you ignore the bad language design, inconsistencies and other &quot;gotchas&quot; and only take the &quot;easy&quot; parts, disregarding edge cases.  However, with C you could at least have a fighting chance to learn how to do things right, but with Python you&#x27;ll never even know what the real thing is like.</div><br/></div></div><div id="37114862" class="c"><input type="checkbox" id="c-37114862" checked=""/><div class="controls bullet"><span class="by">devman0</span><span>|</span><a href="#37114709">parent</a><span>|</span><a href="#37118839">prev</a><span>|</span><a href="#37115272">next</a><span>|</span><label class="collapse" for="c-37114862">[-]</label><label class="expand" for="c-37114862">[4 more]</label></div><br/><div class="children"><div class="content">This is why you see a community of pure Java RDBMSs (Hypersonic, H2, Derby, etc), if you don&#x27;t need the big iron scale it&#x27;s easier to ship&#x2F;use the database or even embed it in memory if needed.</div><br/><div id="37115047" class="c"><input type="checkbox" id="c-37115047" checked=""/><div class="controls bullet"><span class="by">fuzztester</span><span>|</span><a href="#37114709">root</a><span>|</span><a href="#37114862">parent</a><span>|</span><a href="#37115272">next</a><span>|</span><label class="collapse" for="c-37115047">[-]</label><label class="expand" for="c-37115047">[3 more]</label></div><br/><div class="children"><div class="content">Yes. It&#x27;s an interesting area, irrespective of implementation language.<p>I had tried out one or two Java-based RDBMSes back in the day, via programs written in Java, for fun.<p>I think one was HSQLDB.<p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;HSQLDB" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;HSQLDB</a><p>There was also another interesting one called PointBase, which was developed by Bruce Scott, an Oracle founder, and others.<p><a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;PointBase" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;PointBase</a></div><br/><div id="37116429" class="c"><input type="checkbox" id="c-37116429" checked=""/><div class="controls bullet"><span class="by">gabereiser</span><span>|</span><a href="#37114709">root</a><span>|</span><a href="#37115047">parent</a><span>|</span><a href="#37115272">next</a><span>|</span><label class="collapse" for="c-37116429">[-]</label><label class="expand" for="c-37116429">[2 more]</label></div><br/><div class="children"><div class="content">H2 is pretty great and fully supports JSONB and the like [1]. Full java-only RDBMS.<p>[1]: <a href="https:&#x2F;&#x2F;www.h2database.com&#x2F;html&#x2F;main.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.h2database.com&#x2F;html&#x2F;main.html</a></div><br/><div id="37118530" class="c"><input type="checkbox" id="c-37118530" checked=""/><div class="controls bullet"><span class="by">p2detar</span><span>|</span><a href="#37114709">root</a><span>|</span><a href="#37116429">parent</a><span>|</span><a href="#37115272">next</a><span>|</span><label class="collapse" for="c-37118530">[-]</label><label class="expand" for="c-37118530">[1 more]</label></div><br/><div class="children"><div class="content">H2 is pretty solid. I used to ship a product with it as a default database. Customers could optionally use MySQL, MSSQL or Oracle, but for small businesses H2 was more than enough.</div><br/></div></div></div></div></div></div></div></div><div id="37115272" class="c"><input type="checkbox" id="c-37115272" checked=""/><div class="controls bullet"><span class="by">p4bl0</span><span>|</span><a href="#37114709">parent</a><span>|</span><a href="#37114862">prev</a><span>|</span><a href="#37115183">next</a><span>|</span><label class="collapse" for="c-37115272">[-]</label><label class="expand" for="c-37115272">[2 more]</label></div><br/><div class="children"><div class="content">I totally agree with that. I loved the ugit [1] build Git from scratch in Python series for that.<p>[1] <a href="https:&#x2F;&#x2F;www.leshenko.net&#x2F;p&#x2F;ugit&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.leshenko.net&#x2F;p&#x2F;ugit&#x2F;</a></div><br/><div id="37115501" class="c"><input type="checkbox" id="c-37115501" checked=""/><div class="controls bullet"><span class="by">tmh88j</span><span>|</span><a href="#37114709">root</a><span>|</span><a href="#37115272">parent</a><span>|</span><a href="#37115183">next</a><span>|</span><label class="collapse" for="c-37115501">[-]</label><label class="expand" for="c-37115501">[1 more]</label></div><br/><div class="children"><div class="content">Thanks for sharing. This looks like another fun project to work through over a weekend.</div><br/></div></div></div></div><div id="37115183" class="c"><input type="checkbox" id="c-37115183" checked=""/><div class="controls bullet"><span class="by">spanspan</span><span>|</span><a href="#37114709">parent</a><span>|</span><a href="#37115272">prev</a><span>|</span><a href="#37118823">next</a><span>|</span><label class="collapse" for="c-37115183">[-]</label><label class="expand" for="c-37115183">[1 more]</label></div><br/><div class="children"><div class="content">Cool stuff. I had similar intuitions- Python allow me to focus on the high-level concepts. Albeit, there were times where I wished I had gone with a statically-typed + compiled language.</div><br/></div></div></div></div><div id="37118823" class="c"><input type="checkbox" id="c-37118823" checked=""/><div class="controls bullet"><span class="by">Uptrenda</span><span>|</span><a href="#37114709">prev</a><span>|</span><a href="#37116134">next</a><span>|</span><label class="collapse" for="c-37118823">[-]</label><label class="expand" for="c-37118823">[2 more]</label></div><br/><div class="children"><div class="content">Nice OP. How would you say this compares to the inbuilt &#x27;sqlite3&#x27; module in Python? Is it more or less portable? Different features?</div><br/><div id="37118891" class="c"><input type="checkbox" id="c-37118891" checked=""/><div class="controls bullet"><span class="by">ritzaco</span><span>|</span><a href="#37118823">parent</a><span>|</span><a href="#37116134">next</a><span>|</span><label class="collapse" for="c-37118891">[-]</label><label class="expand" for="c-37118891">[1 more]</label></div><br/><div class="children"><div class="content">the `sqlite3` module provides an interface to `sqlite` (<a href="https:&#x2F;&#x2F;www.sqlite.org&#x2F;index.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.sqlite.org&#x2F;index.html</a>), so that comparison doesn&#x27;t really make sense.<p>OP rewrote the actual database in Python, so (if it&#x27;s a 1:1 equivalence), you would still use the python `sqlite3` module to connect to OP&#x27;s project.<p>As mentioned, it&#x27;s an educational project, not really meant to be used as a replacement for sqlite in projects etc though.</div><br/></div></div></div></div><div id="37116134" class="c"><input type="checkbox" id="c-37116134" checked=""/><div class="controls bullet"><span class="by">malkia</span><span>|</span><a href="#37118823">prev</a><span>|</span><a href="#37114585">next</a><span>|</span><label class="collapse" for="c-37116134">[-]</label><label class="expand" for="c-37116134">[1 more]</label></div><br/><div class="children"><div class="content">Long long time ago someone rewrote&#x2F;ported SQLite from C to C# -&gt; <a href="https:&#x2F;&#x2F;code.google.com&#x2F;archive&#x2F;p&#x2F;csharp-sqlite&#x2F;wikis&#x2F;LettersFromSQLite.wiki" rel="nofollow noreferrer">https:&#x2F;&#x2F;code.google.com&#x2F;archive&#x2F;p&#x2F;csharp-sqlite&#x2F;wikis&#x2F;Letter...</a> - note how welcome Dr. Richard Hipp was on the effort!<p>Probably here on github -&gt; <a href="https:&#x2F;&#x2F;github.com&#x2F;CsharpDatabase&#x2F;CsharpSQLite">https:&#x2F;&#x2F;github.com&#x2F;CsharpDatabase&#x2F;CsharpSQLite</a> - and possibly some more clones after that.</div><br/></div></div><div id="37114585" class="c"><input type="checkbox" id="c-37114585" checked=""/><div class="controls bullet"><span class="by">KeplerBoy</span><span>|</span><a href="#37116134">prev</a><span>|</span><a href="#37118543">next</a><span>|</span><label class="collapse" for="c-37114585">[-]</label><label class="expand" for="c-37114585">[6 more]</label></div><br/><div class="children"><div class="content">Kudos, i bet that was a fun and rewarding experience.<p>I know this was never meant to be fast, but could you produce some benchmarks for shits and giggles?</div><br/><div id="37114850" class="c"><input type="checkbox" id="c-37114850" checked=""/><div class="controls bullet"><span class="by">bryancoxwell</span><span>|</span><a href="#37114585">parent</a><span>|</span><a href="#37115216">next</a><span>|</span><label class="collapse" for="c-37114850">[-]</label><label class="expand" for="c-37114850">[3 more]</label></div><br/><div class="children"><div class="content">Off topic but do you know of any good resources&#x2F;talks&#x2F;blog posts that cover how to create useful benchmarks?</div><br/><div id="37114882" class="c"><input type="checkbox" id="c-37114882" checked=""/><div class="controls bullet"><span class="by">mburns</span><span>|</span><a href="#37114585">root</a><span>|</span><a href="#37114850">parent</a><span>|</span><a href="#37115216">next</a><span>|</span><label class="collapse" for="c-37114882">[-]</label><label class="expand" for="c-37114882">[2 more]</label></div><br/><div class="children"><div class="content">Not OP, but Brendan Gregg has written a lot about performance and benchmarking.<p>* <a href="https:&#x2F;&#x2F;www.brendangregg.com&#x2F;activebenchmarking.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.brendangregg.com&#x2F;activebenchmarking.html</a><p>* <a href="https:&#x2F;&#x2F;www.brendangregg.com&#x2F;blog&#x2F;2018-06-30&#x2F;benchmarking-checklist.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.brendangregg.com&#x2F;blog&#x2F;2018-06-30&#x2F;benchmarking-ch...</a></div><br/><div id="37115450" class="c"><input type="checkbox" id="c-37115450" checked=""/><div class="controls bullet"><span class="by">bryancoxwell</span><span>|</span><a href="#37114585">root</a><span>|</span><a href="#37114882">parent</a><span>|</span><a href="#37115216">next</a><span>|</span><label class="collapse" for="c-37115450">[-]</label><label class="expand" for="c-37115450">[1 more]</label></div><br/><div class="children"><div class="content">Great, thank you!</div><br/></div></div></div></div></div></div><div id="37115216" class="c"><input type="checkbox" id="c-37115216" checked=""/><div class="controls bullet"><span class="by">spanspan</span><span>|</span><a href="#37114585">parent</a><span>|</span><a href="#37114850">prev</a><span>|</span><a href="#37117794">next</a><span>|</span><label class="collapse" for="c-37115216">[-]</label><label class="expand" for="c-37115216">[1 more]</label></div><br/><div class="children"><div class="content">It would be a fun exercise to implement something like TPC-C for learndb and see how this done.</div><br/></div></div></div></div><div id="37118543" class="c"><input type="checkbox" id="c-37118543" checked=""/><div class="controls bullet"><span class="by">p2detar</span><span>|</span><a href="#37114585">prev</a><span>|</span><a href="#37115052">next</a><span>|</span><label class="collapse" for="c-37118543">[-]</label><label class="expand" for="c-37118543">[1 more]</label></div><br/><div class="children"><div class="content">On a tangent: is there something like mapDB [1] but for Python?<p>1 - <a href="https:&#x2F;&#x2F;mapdb.org" rel="nofollow noreferrer">https:&#x2F;&#x2F;mapdb.org</a></div><br/></div></div><div id="37115052" class="c"><input type="checkbox" id="c-37115052" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#37118543">prev</a><span>|</span><a href="#37114607">next</a><span>|</span><label class="collapse" for="c-37115052">[-]</label><label class="expand" for="c-37115052">[13 more]</label></div><br/><div class="children"><div class="content">Thanks to this post I learned about Lark, which looks like a really nice parser library for Python.<p>The JSON tutorial on their site is excellent - shows how to build a basic parser for JSON, then goes into some great detail about how to improve its performance: <a href="https:&#x2F;&#x2F;lark-parser.readthedocs.io&#x2F;en&#x2F;latest&#x2F;json_tutorial.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;lark-parser.readthedocs.io&#x2F;en&#x2F;latest&#x2F;json_tutorial.h...</a><p>Here&#x27;s the grammar used for the RDBMS project: <a href="https:&#x2F;&#x2F;github.com&#x2F;spandanb&#x2F;learndb-py&#x2F;blob&#x2F;master&#x2F;learndb&#x2F;lang_parser&#x2F;grammar.py">https:&#x2F;&#x2F;github.com&#x2F;spandanb&#x2F;learndb-py&#x2F;blob&#x2F;master&#x2F;learndb&#x2F;l...</a></div><br/><div id="37116328" class="c"><input type="checkbox" id="c-37116328" checked=""/><div class="controls bullet"><span class="by">jarulraj</span><span>|</span><a href="#37115052">parent</a><span>|</span><a href="#37115386">next</a><span>|</span><label class="collapse" for="c-37116328">[-]</label><label class="expand" for="c-37116328">[1 more]</label></div><br/><div class="children"><div class="content">Highly recommend Lark for Python projects -- it&#x27;s easy to use :)<p>Their IDE was super useful for debugging the grammar:
<a href="https:&#x2F;&#x2F;www.lark-parser.org&#x2F;ide&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.lark-parser.org&#x2F;ide&#x2F;</a><p>We use Lark for a SQL-like language tailored for using AI models in EvaDB:
<a href="https:&#x2F;&#x2F;github.com&#x2F;georgia-tech-db&#x2F;evadb&#x2F;blob&#x2F;master&#x2F;evadb&#x2F;parser&#x2F;evadb.lark">https:&#x2F;&#x2F;github.com&#x2F;georgia-tech-db&#x2F;evadb&#x2F;blob&#x2F;master&#x2F;evadb&#x2F;p...</a>
<a href="https:&#x2F;&#x2F;github.com&#x2F;georgia-tech-db&#x2F;evadb&#x2F;">https:&#x2F;&#x2F;github.com&#x2F;georgia-tech-db&#x2F;evadb&#x2F;</a><p>If you like Lark, please consider sponsoring them:
<a href="https:&#x2F;&#x2F;github.com&#x2F;sponsors&#x2F;lark-parser">https:&#x2F;&#x2F;github.com&#x2F;sponsors&#x2F;lark-parser</a></div><br/></div></div><div id="37115386" class="c"><input type="checkbox" id="c-37115386" checked=""/><div class="controls bullet"><span class="by">OJFord</span><span>|</span><a href="#37115052">parent</a><span>|</span><a href="#37116328">prev</a><span>|</span><a href="#37116783">next</a><span>|</span><label class="collapse" for="c-37115386">[-]</label><label class="expand" for="c-37115386">[10 more]</label></div><br/><div class="children"><div class="content">DSL in a string? Is that &#x27;really nice&#x27;? I haven&#x27;t used or needed this in Python that I can think of, but surely we can do better than that?<p>Even a dict with expected keys and construction via the bitwise or operator (which would roughly match the form of a lot of the grammar) would be better wouldn&#x27;t it? Imports could be imports, just mixed in somehow.<p>This is just first thoughts at a glance, maybe I&#x27;m missing something.</div><br/><div id="37115743" class="c"><input type="checkbox" id="c-37115743" checked=""/><div class="controls bullet"><span class="by">simonw</span><span>|</span><a href="#37115052">root</a><span>|</span><a href="#37115386">parent</a><span>|</span><a href="#37116006">next</a><span>|</span><label class="collapse" for="c-37115743">[-]</label><label class="expand" for="c-37115743">[3 more]</label></div><br/><div class="children"><div class="content">That&#x27;s pretty standard for parsing libraries - have you seen any good ones (for Python or other languages) that don&#x27;t use a DSL like this?<p>The only one I&#x27;ve seen is this one: <a href="https:&#x2F;&#x2F;parsy.readthedocs.io&#x2F;en&#x2F;latest&#x2F;tutorial.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;parsy.readthedocs.io&#x2F;en&#x2F;latest&#x2F;tutorial.html</a></div><br/><div id="37117536" class="c"><input type="checkbox" id="c-37117536" checked=""/><div class="controls bullet"><span class="by">dleslie</span><span>|</span><a href="#37115052">root</a><span>|</span><a href="#37115743">parent</a><span>|</span><a href="#37116006">next</a><span>|</span><label class="collapse" for="c-37117536">[-]</label><label class="expand" for="c-37117536">[2 more]</label></div><br/><div class="children"><div class="content">Parse, comparse, parsec and PEGs come to mind.<p>1: <a href="https:&#x2F;&#x2F;github.com&#x2F;massung&#x2F;parse">https:&#x2F;&#x2F;github.com&#x2F;massung&#x2F;parse</a><p>2: <a href="https:&#x2F;&#x2F;wiki.call-cc.org&#x2F;eggref&#x2F;5&#x2F;comparse" rel="nofollow noreferrer">https:&#x2F;&#x2F;wiki.call-cc.org&#x2F;eggref&#x2F;5&#x2F;comparse</a><p>3: <a href="https:&#x2F;&#x2F;hackage.haskell.org&#x2F;package&#x2F;parsec" rel="nofollow noreferrer">https:&#x2F;&#x2F;hackage.haskell.org&#x2F;package&#x2F;parsec</a><p>4: <a href="https:&#x2F;&#x2F;janet-lang.org&#x2F;docs&#x2F;peg.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;janet-lang.org&#x2F;docs&#x2F;peg.html</a></div><br/><div id="37118687" class="c"><input type="checkbox" id="c-37118687" checked=""/><div class="controls bullet"><span class="by">zelphirkalt</span><span>|</span><a href="#37115052">root</a><span>|</span><a href="#37117536">parent</a><span>|</span><a href="#37116006">next</a><span>|</span><label class="collapse" for="c-37118687">[-]</label><label class="expand" for="c-37118687">[1 more]</label></div><br/><div class="children"><div class="content">Here is another PEG one, though Guile allows expressing things as strings and as macro calls &#x2F; s-expressions:<p>5: <a href="https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;guile&#x2F;manual&#x2F;html_node&#x2F;PEG-Parsing.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;guile&#x2F;manual&#x2F;html_node&#x2F;PEG-Pars...</a></div><br/></div></div></div></div></div></div><div id="37116006" class="c"><input type="checkbox" id="c-37116006" checked=""/><div class="controls bullet"><span class="by">spanspan</span><span>|</span><a href="#37115052">root</a><span>|</span><a href="#37115386">parent</a><span>|</span><a href="#37115743">prev</a><span>|</span><a href="#37115778">next</a><span>|</span><label class="collapse" for="c-37116006">[-]</label><label class="expand" for="c-37116006">[1 more]</label></div><br/><div class="children"><div class="content">̶T̶h̶i̶s̶ ̶s̶t̶r̶i̶n̶g̶ ̶i̶s̶ ̶t̶h̶e̶ ̶g̶r̶a̶m̶m̶a̶r̶ ̶t̶h̶a̶t̶ ̶l̶a̶r̶k̶ ̶u̶s̶e̶s̶ ̶t̶o̶ ̶p̶a̶r̶s̶e̶ ̶t̶h̶e̶ ̶u̶s̶e̶r̶ ̶s̶u̶b̶m̶i̶t̶t̶e̶d̶ ̶s̶q̶l̶ ̶i̶n̶t̶o̶ ̶a̶n̶ ̶A̶S̶T̶.̶ ̶T̶h̶i̶s̶ ̶p̶a̶r̶s̶i̶n̶g̶ ̶i̶s̶ ̶f̶a̶r̶ ̶m̶o̶r̶e̶ ̶c̶o̶m̶p̶l̶e̶t̶e̶ ̶a̶n̶d̶ ̶r̶o̶b̶u̶s̶t̶ ̶t̶h̶a̶n̶ ̶w̶h̶a̶t̶ ̶d̶o̶i̶n̶g̶ ̶t̶h̶i̶s̶ ̶i̶n̶ ̶p̶u̶r̶e̶ ̶p̶y̶t̶h̶o̶n̶ ̶w̶o̶u̶l̶d̶ ̶a̶l̶l̶o̶w̶ ̶(̶w̶i̶t̶h̶o̶u̶t̶ ̶o̶f̶ ̶c̶o̶u̶r̶s̶e̶ ̶i̶m̶p̶l̶e̶m̶e̶n̶t̶i̶n̶g̶ ̶t̶h̶e̶ ̶e̶n̶t̶i̶r̶e̶ ̶l̶e̶x̶e̶r̶ ̶a̶n̶d̶ ̶p̶a̶r̶s̶e̶r̶ ̶t̶h̶a̶t̶ ̶l̶a̶r̶k̶ ̶i̶m̶p̶l̶e̶m̶e̶n̶t̶s̶)̶.̶<p>T̶h̶e̶r̶e̶ ̶m̶a̶y̶ ̶b̶e̶ ̶s̶o̶m̶e̶ ̶p̶o̶s̶t̶ ̶p̶a̶r̶s̶i̶n̶g̶ ̶v̶a̶l̶i̶d̶a̶t̶i̶o̶n̶ ̶t̶h̶a̶t̶ ̶c̶a̶n̶ ̶b̶e̶ ̶d̶o̶n̶e̶ ̶h̶e̶r̶e̶-̶ ̶b̶u̶t̶ ̶t̶h̶a̶t̶ ̶w̶o̶u̶l̶d̶ ̶b̶e̶ ̶s̶o̶m̶e̶t̶h̶i̶n̶g̶ ̶t̶h̶a̶t̶&#x27;̶s̶ ̶b̶e̶y̶o̶n̶d̶ ̶t̶h̶e̶ ̶d̶o̶m̶a̶i̶n̶ ̶o̶f̶ ̶t̶h̶e̶ ̶p̶a̶r̶s̶e̶r̶.̶<p>Edit: I see what you mean. I surveyed a bunch a parser generator libraries, and they also seemed to use a text based DSL- rather than DSL based on python structures. What you&#x27;re describing would have made the grammar development more ergonomic and simple.</div><br/></div></div><div id="37115778" class="c"><input type="checkbox" id="c-37115778" checked=""/><div class="controls bullet"><span class="by">semiquaver</span><span>|</span><a href="#37115052">root</a><span>|</span><a href="#37115386">parent</a><span>|</span><a href="#37116006">prev</a><span>|</span><a href="#37115625">next</a><span>|</span><label class="collapse" for="c-37115778">[-]</label><label class="expand" for="c-37115778">[2 more]</label></div><br/><div class="children"><div class="content">It is <a href="https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Backus–Naur_form" rel="nofollow noreferrer">https:&#x2F;&#x2F;en.m.wikipedia.org&#x2F;wiki&#x2F;Backus–Naur_form</a> or something similar. A python DSL would certainly be less expressive and useful.</div><br/><div id="37116089" class="c"><input type="checkbox" id="c-37116089" checked=""/><div class="controls bullet"><span class="by">OJFord</span><span>|</span><a href="#37115052">root</a><span>|</span><a href="#37115778">parent</a><span>|</span><a href="#37115625">next</a><span>|</span><label class="collapse" for="c-37116089">[-]</label><label class="expand" for="c-37116089">[1 more]</label></div><br/><div class="children"><div class="content">I realise that (with some additions, certainly - it has imports) I just don&#x27;t think embedding it in a string is &#x27;really nice&#x27;, personally. The &#x27;developer experience&#x27; will be crap or reliant on  hyper-specific tooling; so likely crap. (The RHS of that &#x27;or&#x27; will be too niche to be good and well-maintained, probably.)</div><br/></div></div></div></div><div id="37115625" class="c"><input type="checkbox" id="c-37115625" checked=""/><div class="controls bullet"><span class="by">tmpX7dMeXU</span><span>|</span><a href="#37115052">root</a><span>|</span><a href="#37115386">parent</a><span>|</span><a href="#37115778">prev</a><span>|</span><a href="#37116783">next</a><span>|</span><label class="collapse" for="c-37115625">[-]</label><label class="expand" for="c-37115625">[3 more]</label></div><br/><div class="children"><div class="content">It’s an existing, standard, language for describing grammars. Quite clearly the trade-off being made here. Seemingly not the one you would’ve made. Don’t act like it’s objectively bad.</div><br/><div id="37116095" class="c"><input type="checkbox" id="c-37116095" checked=""/><div class="controls bullet"><span class="by">OJFord</span><span>|</span><a href="#37115052">root</a><span>|</span><a href="#37115625">parent</a><span>|</span><a href="#37116783">next</a><span>|</span><label class="collapse" for="c-37116095">[-]</label><label class="expand" for="c-37116095">[2 more]</label></div><br/><div class="children"><div class="content"><i>in a string</i>. I didn&#x27;t say the DSL was novel. I learnt BNF too. (It does have extras that are either unique to it or standard beyond my familiarity though.)</div><br/></div></div></div></div></div></div></div></div><div id="37114607" class="c"><input type="checkbox" id="c-37114607" checked=""/><div class="controls bullet"><span class="by">sgarland</span><span>|</span><a href="#37115052">prev</a><span>|</span><a href="#37115441">next</a><span>|</span><label class="collapse" for="c-37114607">[-]</label><label class="expand" for="c-37114607">[2 more]</label></div><br/><div class="children"><div class="content">This is fantastic, and seems like a great way for someone (me) to learn DS&amp;A better. I can explain how a B+tree works, but if you asked me to code it, I’d freeze up.<p>I love databases and Python, so this was really interesting to walk through. Thanks for the post.</div><br/><div id="37114755" class="c"><input type="checkbox" id="c-37114755" checked=""/><div class="controls bullet"><span class="by">spanspan</span><span>|</span><a href="#37114607">parent</a><span>|</span><a href="#37115441">next</a><span>|</span><label class="collapse" for="c-37114755">[-]</label><label class="expand" for="c-37114755">[1 more]</label></div><br/><div class="children"><div class="content">Most definitely. The b-tree implementation was the first motivation for starting the project. Especially, all the details around node rebalancing and splitting. And the fact that it was an on-disk structure, added another wrinkle to the thinking about the impl</div><br/></div></div></div></div><div id="37115441" class="c"><input type="checkbox" id="c-37115441" checked=""/><div class="controls bullet"><span class="by">_tom_</span><span>|</span><a href="#37114607">prev</a><span>|</span><a href="#37117722">next</a><span>|</span><label class="collapse" for="c-37115441">[-]</label><label class="expand" for="c-37115441">[1 more]</label></div><br/><div class="children"><div class="content">How much of the SQLite test suite will pass?</div><br/></div></div><div id="37117722" class="c"><input type="checkbox" id="c-37117722" checked=""/><div class="controls bullet"><span class="by">est</span><span>|</span><a href="#37115441">prev</a><span>|</span><a href="#37115601">next</a><span>|</span><label class="collapse" for="c-37117722">[-]</label><label class="expand" for="c-37117722">[2 more]</label></div><br/><div class="children"><div class="content">long time ago the Python2 stdlib shipped a ton of DB libs like BerkelyDB. <a href="https:&#x2F;&#x2F;wiki.python.org&#x2F;moin&#x2F;BerkeleyDB" rel="nofollow noreferrer">https:&#x2F;&#x2F;wiki.python.org&#x2F;moin&#x2F;BerkeleyDB</a></div><br/><div id="37118636" class="c"><input type="checkbox" id="c-37118636" checked=""/><div class="controls bullet"><span class="by">networked</span><span>|</span><a href="#37117722">parent</a><span>|</span><a href="#37115601">next</a><span>|</span><label class="collapse" for="c-37118636">[-]</label><label class="expand" for="c-37118636">[1 more]</label></div><br/><div class="children"><div class="content">I was surprised to find out MicroPython had a database module based on Berkley DB in its standard library. It uses Berkley DB 1.x, which is the version of Berkley DB with a permissive license.<p><a href="https:&#x2F;&#x2F;docs.micropython.org&#x2F;en&#x2F;v1.20.0&#x2F;library&#x2F;btree.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;docs.micropython.org&#x2F;en&#x2F;v1.20.0&#x2F;library&#x2F;btree.html</a></div><br/></div></div></div></div><div id="37115601" class="c"><input type="checkbox" id="c-37115601" checked=""/><div class="controls bullet"><span class="by">schemescape</span><span>|</span><a href="#37117722">prev</a><span>|</span><a href="#37116361">next</a><span>|</span><label class="collapse" for="c-37115601">[-]</label><label class="expand" for="c-37115601">[2 more]</label></div><br/><div class="children"><div class="content">Does it support any ACID guarantees? Query planning&#x2F;optimization?<p>I’m not asking this to imply that it can&#x2F;should. I just want to know what all was attempted besides b-trees and SQL.<p>I’d like to do something like this someday. Nice work!</div><br/><div id="37116073" class="c"><input type="checkbox" id="c-37116073" checked=""/><div class="controls bullet"><span class="by">spanspan</span><span>|</span><a href="#37115601">parent</a><span>|</span><a href="#37116361">next</a><span>|</span><label class="collapse" for="c-37116073">[-]</label><label class="expand" for="c-37116073">[1 more]</label></div><br/><div class="children"><div class="content">Re: ACID guarantees<p>It doesn&#x27;t have a notion of atomically batching multiple statements, i.e. transaction. But beyond that, it&#x27;s a single file database,
which can only have a single process (learndb instance) that is operating on the database (file). So you get consistency and isolation via being a single connection database. Durability, you get to the extent that the file system is durable. So it&#x27;s somewhere on the ACIDity spectrum.<p>Re: Query planning&#x2F;optimization<p>I haven&#x27;t implemented this; but I&#x27;ve considered where the optimization could module sit:
The parser spits out an AST. This or a derived intermediate representation could be optimized,i.e. the AST could be rewritten or nodes deleted, 
before the VM executes the AST.</div><br/></div></div></div></div><div id="37116361" class="c"><input type="checkbox" id="c-37116361" checked=""/><div class="controls bullet"><span class="by">jarulraj</span><span>|</span><a href="#37115601">prev</a><span>|</span><a href="#37116127">next</a><span>|</span><label class="collapse" for="c-37116361">[-]</label><label class="expand" for="c-37116361">[2 more]</label></div><br/><div class="children"><div class="content">Really cool project!<p>I am curious about the benefits and limitations of using Python in this project as opposed to C++. How well is LearnDB able to support low-level concurrency control and storage management?</div><br/><div id="37116619" class="c"><input type="checkbox" id="c-37116619" checked=""/><div class="controls bullet"><span class="by">spanspan</span><span>|</span><a href="#37116361">parent</a><span>|</span><a href="#37116127">next</a><span>|</span><label class="collapse" for="c-37116619">[-]</label><label class="expand" for="c-37116619">[1 more]</label></div><br/><div class="children"><div class="content">I began using python as a way to &quot;mock&quot; out the overall design; intending to re-implement it in rust. The main reasoning for using python: was the ability to focus on &quot;high-level&quot; concepts and speed of tinkering.
This implements a single process, single thread, single connection database- so performance and low-level concurrency control were not explicit goals or really optimized for. For those (real-live concerns) rust or C++ are much better; but also come with their set of complexities.</div><br/></div></div></div></div><div id="37116127" class="c"><input type="checkbox" id="c-37116127" checked=""/><div class="controls bullet"><span class="by">indymike</span><span>|</span><a href="#37116361">prev</a><span>|</span><a href="#37115002">next</a><span>|</span><label class="collapse" for="c-37116127">[-]</label><label class="expand" for="c-37116127">[1 more]</label></div><br/><div class="children"><div class="content">First, great project. Second, the code is very readable. Finally thank you for excellent comments.</div><br/></div></div><div id="37115002" class="c"><input type="checkbox" id="c-37115002" checked=""/><div class="controls bullet"><span class="by">xjsjxjsjsh</span><span>|</span><a href="#37116127">prev</a><span>|</span><a href="#37116151">next</a><span>|</span><label class="collapse" for="c-37115002">[-]</label><label class="expand" for="c-37115002">[1 more]</label></div><br/><div class="children"><div class="content">The documentation is excellent.</div><br/></div></div><div id="37116151" class="c"><input type="checkbox" id="c-37116151" checked=""/><div class="controls bullet"><span class="by">kragen</span><span>|</span><a href="#37115002">prev</a><span>|</span><a href="#37115652">next</a><span>|</span><label class="collapse" for="c-37116151">[-]</label><label class="expand" for="c-37116151">[1 more]</label></div><br/><div class="children"><div class="content">i used to use gadfly, aaron watters&#x27;s sql database in pure python; the first release was in 01994<p>i&#x27;m not sure current python is capable of running it</div><br/></div></div><div id="37115652" class="c"><input type="checkbox" id="c-37115652" checked=""/><div class="controls bullet"><span class="by">quickthrower2</span><span>|</span><a href="#37116151">prev</a><span>|</span><a href="#37114941">next</a><span>|</span><label class="collapse" for="c-37115652">[-]</label><label class="expand" for="c-37115652">[2 more]</label></div><br/><div class="children"><div class="content">Nice! it is good to see past blind spots e.g. &quot;you must write this kind of app in this kind of language, pure Python is high level it is only for glue&quot;. I wouldn&#x27;t have thought to do a project like this because of all of those kinds of heuristics. And as other have said, a hackable DB in the same language as the app can have a lot of advantages.</div><br/></div></div><div id="37114941" class="c"><input type="checkbox" id="c-37114941" checked=""/><div class="controls bullet"><span class="by">keithalewis</span><span>|</span><a href="#37115652">prev</a><span>|</span><a href="#37114532">next</a><span>|</span><label class="collapse" for="c-37114941">[-]</label><label class="expand" for="c-37114941">[8 more]</label></div><br/><div class="children"><div class="content">In what way is this a &quot;SQLite clone&quot;?</div><br/><div id="37115320" class="c"><input type="checkbox" id="c-37115320" checked=""/><div class="controls bullet"><span class="by">spanspan</span><span>|</span><a href="#37114941">parent</a><span>|</span><a href="#37115231">next</a><span>|</span><label class="collapse" for="c-37115320">[-]</label><label class="expand" for="c-37115320">[6 more]</label></div><br/><div class="children"><div class="content">Single file, embedded database with similar logical organization</div><br/><div id="37115698" class="c"><input type="checkbox" id="c-37115698" checked=""/><div class="controls bullet"><span class="by">keithalewis</span><span>|</span><a href="#37114941">root</a><span>|</span><a href="#37115320">parent</a><span>|</span><a href="#37115231">next</a><span>|</span><label class="collapse" for="c-37115698">[-]</label><label class="expand" for="c-37115698">[5 more]</label></div><br/><div class="children"><div class="content">Perhaps a more accurate claim would be &quot;SQLite inspired&quot;. Calling it a clone is misleading.<p>Mad props to the author. Many Python programmers never had proper training in computer science, so it is encouraging to see people filling in the gaps of their knowledge.</div><br/><div id="37116157" class="c"><input type="checkbox" id="c-37116157" checked=""/><div class="controls bullet"><span class="by">hluska</span><span>|</span><a href="#37114941">root</a><span>|</span><a href="#37115698">parent</a><span>|</span><a href="#37115231">next</a><span>|</span><label class="collapse" for="c-37116157">[-]</label><label class="expand" for="c-37116157">[4 more]</label></div><br/><div class="children"><div class="content">This is a very early release, whereas SQLite has 22 years of releases. In that light, this is about the least charitable take on this.<p>Someone in our community built something and had the courage to release it. Your criticism is unfair.</div><br/><div id="37116566" class="c"><input type="checkbox" id="c-37116566" checked=""/><div class="controls bullet"><span class="by">esjeon</span><span>|</span><a href="#37114941">root</a><span>|</span><a href="#37116157">parent</a><span>|</span><a href="#37116634">next</a><span>|</span><label class="collapse" for="c-37116566">[-]</label><label class="expand" for="c-37116566">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Your criticism is unfair.<p>I think it doesn&#x27;t even get close to being a criticism, and it&#x27;s certainly unclear if the goal is to literally clone SQLite or to implement SQLite-ish. This is a fair question.</div><br/></div></div><div id="37116634" class="c"><input type="checkbox" id="c-37116634" checked=""/><div class="controls bullet"><span class="by">keithalewis</span><span>|</span><a href="#37114941">root</a><span>|</span><a href="#37116157">parent</a><span>|</span><a href="#37116566">prev</a><span>|</span><a href="#37115231">next</a><span>|</span><label class="collapse" for="c-37116634">[-]</label><label class="expand" for="c-37116634">[2 more]</label></div><br/><div class="children"><div class="content">Just trying to encourage clear and accurate communication. I agree with your first sentence. The only thing unfair is the author claiming it is a SQLite clone. It isn&#x27;t, as we both seem to agree. It is a form of cheating.</div><br/><div id="37117360" class="c"><input type="checkbox" id="c-37117360" checked=""/><div class="controls bullet"><span class="by">spanspan</span><span>|</span><a href="#37114941">root</a><span>|</span><a href="#37116634">parent</a><span>|</span><a href="#37115231">next</a><span>|</span><label class="collapse" for="c-37117360">[-]</label><label class="expand" for="c-37117360">[1 more]</label></div><br/><div class="children"><div class="content">Fair. It’s “inspired by”, not a “clone”. Frankly, I don’t think these terms are that specific, that one couldn’t level the same point against “inspired by”.. in what sense is it inspired?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="37115231" class="c"><input type="checkbox" id="c-37115231" checked=""/><div class="controls bullet"><span class="by">tredre3</span><span>|</span><a href="#37114941">parent</a><span>|</span><a href="#37115320">prev</a><span>|</span><a href="#37114532">next</a><span>|</span><label class="collapse" for="c-37115231">[-]</label><label class="expand" for="c-37115231">[1 more]</label></div><br/><div class="children"><div class="content">In the way that it&#x27;s an embedded RDBMS.</div><br/></div></div></div></div><div id="37114532" class="c"><input type="checkbox" id="c-37114532" checked=""/><div class="controls bullet"><span class="by">kindawinda</span><span>|</span><a href="#37114941">prev</a><span>|</span><label class="collapse" for="c-37114532">[-]</label><label class="expand" for="c-37114532">[4 more]</label></div><br/><div class="children"><div class="content">Okay this seems like the perfect project to test out the various AI repo update solutions. Anyone want to do this for fun, you can have your own agenda, I&#x27;m just bored!<p><a href="https:&#x2F;&#x2F;github.com&#x2F;paul-gauthier&#x2F;aider">https:&#x2F;&#x2F;github.com&#x2F;paul-gauthier&#x2F;aider</a>
<a href="https:&#x2F;&#x2F;www.mentat.codes&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.mentat.codes&#x2F;</a>
<a href="https:&#x2F;&#x2F;www.gitwit.dev&#x2F;" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.gitwit.dev&#x2F;</a>
<a href="https:&#x2F;&#x2F;www.second.dev&#x2F;">https:&#x2F;&#x2F;www.second.dev&#x2F;</a></div><br/><div id="37115345" class="c"><input type="checkbox" id="c-37115345" checked=""/><div class="controls bullet"><span class="by">kindawinda</span><span>|</span><a href="#37114532">parent</a><span>|</span><label class="collapse" for="c-37115345">[-]</label><label class="expand" for="c-37115345">[3 more]</label></div><br/><div class="children"><div class="content">Why would you downvote this? Ive already turned it into a viable sqlite competitor. Shame on you.</div><br/><div id="37115521" class="c"><input type="checkbox" id="c-37115521" checked=""/><div class="controls bullet"><span class="by">YZF</span><span>|</span><a href="#37114532">root</a><span>|</span><a href="#37115345">parent</a><span>|</span><a href="#37115761">next</a><span>|</span><label class="collapse" for="c-37115521">[-]</label><label class="expand" for="c-37115521">[1 more]</label></div><br/><div class="children"><div class="content">my 2c:<p>Your comment seems to have nothing to do with the post and mostly has a bunch of links.  If there is some relevance please make it clearer by editing your comment.<p>Your projects might be very cool in which case just submit them to HN on their own instead of commenting.<p>Commenting on other people&#x27;s downvotes is usually not helpful.  Accept the votes, learn from the experience and take that forward when participating in this community.  The guidelines are pretty good, please read them as well: <a href="https:&#x2F;&#x2F;news.ycombinator.com&#x2F;newsguidelines.html">https:&#x2F;&#x2F;news.ycombinator.com&#x2F;newsguidelines.html</a></div><br/></div></div><div id="37115761" class="c"><input type="checkbox" id="c-37115761" checked=""/><div class="controls bullet"><span class="by">memefrog</span><span>|</span><a href="#37114532">root</a><span>|</span><a href="#37115345">parent</a><span>|</span><a href="#37115521">prev</a><span>|</span><label class="collapse" for="c-37115761">[-]</label><label class="expand" for="c-37115761">[1 more]</label></div><br/><div class="children"><div class="content">Because you people that bring up the latest overhyped and useless buzzword nonsense on every single post are super tiring.<p>We do not need a comment about &quot;someone should apply AI&#x2F;ML to this&quot; on every post any more than we need a &quot;this but NFT&quot; or &quot;this but blockchain&quot; or &quot;this but React&quot; or &quot;this but OOP&quot; comment.  Your comment is just noise.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>