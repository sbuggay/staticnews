<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1708246851043" as="style"/><link rel="stylesheet" href="styles.css?v=1708246851043"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a>Ask HN: Which Python type checker should I use?</a> </div><div class="subtext"><span>triyambakam</span> | <span>39 comments</span></div><br/><div><div id="39416855" class="c"><input type="checkbox" id="c-39416855" checked=""/><div class="controls bullet"><span class="by">drekipus</span><span>|</span><a href="#39416756">next</a><span>|</span><label class="collapse" for="c-39416855">[-]</label><label class="expand" for="c-39416855">[8 more]</label></div><br/><div class="children"><div class="content">Pyright is the Microsoft provided lsp: does anyone else feel uneasy about using this? Especially given the EEE playbook &quot;that we definitely won&#x27;t do this time&quot; - would love to have a discussion on this if someone could talk me into using it.<p>I just use a combination of black, flake, and mypy. Apparently ruff is quite good as well.
For lsp I use Jedi, which actually worked faster on my company&#x27;s code base than pyright, a year or so ago.</div><br/><div id="39417209" class="c"><input type="checkbox" id="c-39417209" checked=""/><div class="controls bullet"><span class="by">ZiiS</span><span>|</span><a href="#39416855">parent</a><span>|</span><a href="#39417327">next</a><span>|</span><label class="collapse" for="c-39417209">[-]</label><label class="expand" for="c-39417209">[1 more]</label></div><br/><div class="children"><div class="content">Pylance is their proprietary LSP; pyright is an opensource (but MS managed) typechecker (which pylance uses).</div><br/></div></div><div id="39417327" class="c"><input type="checkbox" id="c-39417327" checked=""/><div class="controls bullet"><span class="by">vosper</span><span>|</span><a href="#39416855">parent</a><span>|</span><a href="#39417209">prev</a><span>|</span><a href="#39416898">next</a><span>|</span><label class="collapse" for="c-39417327">[-]</label><label class="expand" for="c-39417327">[1 more]</label></div><br/><div class="children"><div class="content">How do you imagine that EEE could be applied to a type checker?</div><br/></div></div><div id="39416898" class="c"><input type="checkbox" id="c-39416898" checked=""/><div class="controls bullet"><span class="by">tentacleuno</span><span>|</span><a href="#39416855">parent</a><span>|</span><a href="#39417327">prev</a><span>|</span><a href="#39416756">next</a><span>|</span><label class="collapse" for="c-39416898">[-]</label><label class="expand" for="c-39416898">[5 more]</label></div><br/><div class="children"><div class="content">Can the extension be used on VSCodium builds?  If memory serves, C# tooling extensions are proprietary and are subject to unfortunate treatment when using open-source builds of VSCode.</div><br/><div id="39417362" class="c"><input type="checkbox" id="c-39417362" checked=""/><div class="controls bullet"><span class="by">mastazi</span><span>|</span><a href="#39416855">root</a><span>|</span><a href="#39416898">parent</a><span>|</span><a href="#39417071">next</a><span>|</span><label class="collapse" for="c-39417362">[-]</label><label class="expand" for="c-39417362">[1 more]</label></div><br/><div class="children"><div class="content">Pyright works for me on VSCodium, Pylance doesn&#x27;t.</div><br/></div></div><div id="39417071" class="c"><input type="checkbox" id="c-39417071" checked=""/><div class="controls bullet"><span class="by">giantzoc</span><span>|</span><a href="#39416855">root</a><span>|</span><a href="#39416898">parent</a><span>|</span><a href="#39417362">prev</a><span>|</span><a href="#39416756">next</a><span>|</span><label class="collapse" for="c-39417071">[-]</label><label class="expand" for="c-39417071">[3 more]</label></div><br/><div class="children"><div class="content">You are correct.  It is not supported on vscodium.</div><br/><div id="39417167" class="c"><input type="checkbox" id="c-39417167" checked=""/><div class="controls bullet"><span class="by">mdasen</span><span>|</span><a href="#39416855">root</a><span>|</span><a href="#39417071">parent</a><span>|</span><a href="#39416756">next</a><span>|</span><label class="collapse" for="c-39417167">[-]</label><label class="expand" for="c-39417167">[2 more]</label></div><br/><div class="children"><div class="content">Yea, and if you&#x27;re a company making more than $1M in revenue or have over 250 PCs, then you need a commercial license.<p>Microsoft definitely seems to be pushing proprietary VSCode extensions where it&#x27;s free to get users hooked on the product (and kill competitors) and then charge companies lots of money for the tools they got everyone hooked on because they appeared to be free.</div><br/><div id="39417364" class="c"><input type="checkbox" id="c-39417364" checked=""/><div class="controls bullet"><span class="by">mastazi</span><span>|</span><a href="#39416855">root</a><span>|</span><a href="#39417167">parent</a><span>|</span><a href="#39416756">next</a><span>|</span><label class="collapse" for="c-39417364">[-]</label><label class="expand" for="c-39417364">[1 more]</label></div><br/><div class="children"><div class="content">are you talking about Pyright or Pylance?</div><br/></div></div></div></div></div></div></div></div></div></div><div id="39416756" class="c"><input type="checkbox" id="c-39416756" checked=""/><div class="controls bullet"><span class="by">Zizizizz</span><span>|</span><a href="#39416855">prev</a><span>|</span><a href="#39417127">next</a><span>|</span><label class="collapse" for="c-39416756">[-]</label><label class="expand" for="c-39416756">[1 more]</label></div><br/><div class="children"><div class="content">Pyright by default because it&#x27;s a LSP so I get to go definition, find references, etc... as well as the type checking in neovim. It&#x27;s Pylance as part of the Python plugin in VS Code. Just make sure you go to the settings in Vs code and turn the type checking on to basic or strict. (It&#x27;s off by default)<p>I tend to run mypy every now and then ad-hoc to check things and it sometimes finds things that need correcting but I wouldn&#x27;t say it&#x27;s as worth setting up as the former.</div><br/></div></div><div id="39417127" class="c"><input type="checkbox" id="c-39417127" checked=""/><div class="controls bullet"><span class="by">damezumari</span><span>|</span><a href="#39416756">prev</a><span>|</span><a href="#39417351">next</a><span>|</span><label class="collapse" for="c-39417127">[-]</label><label class="expand" for="c-39417127">[4 more]</label></div><br/><div class="children"><div class="content">I would not personally use any of them. Typed python in previous workplace was pretty much shitshow, and if starting from scratch instead of untyped codebase it might be worth it, maybe, for some specific cases, but in general combination of bad library typing and bad type checking tools leads to horrible user experience.<p>So going forward my personal projects continue to be ducktyped, and if I care about types, I use rust or go.</div><br/><div id="39417208" class="c"><input type="checkbox" id="c-39417208" checked=""/><div class="controls bullet"><span class="by">nickm12</span><span>|</span><a href="#39417127">parent</a><span>|</span><a href="#39417322">next</a><span>|</span><label class="collapse" for="c-39417208">[-]</label><label class="expand" for="c-39417208">[1 more]</label></div><br/><div class="children"><div class="content">My experience couldn&#x27;t be more different. I&#x27;ve had the experience of introducing type annotations into legacy Python 2 codebases and it&#x27;s been a godsend and the only way to get them to Python 3. I&#x27;ve also had the experience of writing greenfield Python 3 code fully-typed from the start and its also been a useful tool there.</div><br/></div></div><div id="39417322" class="c"><input type="checkbox" id="c-39417322" checked=""/><div class="controls bullet"><span class="by">emblaegh</span><span>|</span><a href="#39417127">parent</a><span>|</span><a href="#39417208">prev</a><span>|</span><a href="#39417315">next</a><span>|</span><label class="collapse" for="c-39417322">[-]</label><label class="expand" for="c-39417322">[1 more]</label></div><br/><div class="children"><div class="content">Whatever bad experience you get from the (admittedly) immature tooling, pales in comparison to the intense discomfort or working with an untyped Python code base of even moderate size, specially ones written by many different contributors.</div><br/></div></div><div id="39417315" class="c"><input type="checkbox" id="c-39417315" checked=""/><div class="controls bullet"><span class="by">winrid</span><span>|</span><a href="#39417127">parent</a><span>|</span><a href="#39417322">prev</a><span>|</span><a href="#39417351">next</a><span>|</span><label class="collapse" for="c-39417315">[-]</label><label class="expand" for="c-39417315">[1 more]</label></div><br/><div class="children"><div class="content">Even the Stripe API types are terrible.<p>I&#x27;m moving away from Python for my large projects...</div><br/></div></div></div></div><div id="39417351" class="c"><input type="checkbox" id="c-39417351" checked=""/><div class="controls bullet"><span class="by">ivalm</span><span>|</span><a href="#39417127">prev</a><span>|</span><a href="#39417015">next</a><span>|</span><label class="collapse" for="c-39417351">[-]</label><label class="expand" for="c-39417351">[1 more]</label></div><br/><div class="children"><div class="content">I use mypy. We use tox to run pytest, flake8 (linting), and mypy (typing)</div><br/></div></div><div id="39417015" class="c"><input type="checkbox" id="c-39417015" checked=""/><div class="controls bullet"><span class="by">thoaasfwe</span><span>|</span><a href="#39417351">prev</a><span>|</span><a href="#39416757">next</a><span>|</span><label class="collapse" for="c-39417015">[-]</label><label class="expand" for="c-39417015">[1 more]</label></div><br/><div class="children"><div class="content">pyright is state of the art right now thanks to eric. If you use VSCode+Pylance you will feel right at home coming from Rust&#x2F;TS.<p>just be aware a lot of community packages aren&#x27;t ready for typed python. if you stick to the good stuff like fastapi and pydantic, you will be fine.</div><br/></div></div><div id="39416757" class="c"><input type="checkbox" id="c-39416757" checked=""/><div class="controls bullet"><span class="by">fbdab103</span><span>|</span><a href="#39417015">prev</a><span>|</span><a href="#39416937">next</a><span>|</span><label class="collapse" for="c-39416757">[-]</label><label class="expand" for="c-39416757">[3 more]</label></div><br/><div class="children"><div class="content">Would also be interested in what is friendly with Django. Using VSCode + the Python extension, the default checker (Pylance?) just pukes on the ORM magic.</div><br/><div id="39417066" class="c"><input type="checkbox" id="c-39417066" checked=""/><div class="controls bullet"><span class="by">josebama</span><span>|</span><a href="#39416757">parent</a><span>|</span><a href="#39416937">next</a><span>|</span><label class="collapse" for="c-39417066">[-]</label><label class="expand" for="c-39417066">[2 more]</label></div><br/><div class="children"><div class="content">To get the type checker to work with Django you need to install django-stubs[1]. It works great with mypy, but should also work well with pyright.<p>[1]: <a href="https:&#x2F;&#x2F;github.com&#x2F;typeddjango&#x2F;django-stubs">https:&#x2F;&#x2F;github.com&#x2F;typeddjango&#x2F;django-stubs</a></div><br/><div id="39417330" class="c"><input type="checkbox" id="c-39417330" checked=""/><div class="controls bullet"><span class="by">crucialfelix</span><span>|</span><a href="#39416757">root</a><span>|</span><a href="#39417066">parent</a><span>|</span><a href="#39416937">next</a><span>|</span><label class="collapse" for="c-39417330">[-]</label><label class="expand" for="c-39417330">[1 more]</label></div><br/><div class="children"><div class="content">The types will work in pyrite, but there is no pyright support for plugins, so the Django magic doesn&#x27;t get typed correctly.<p>I&#x27;m considering switching to pyright, probably by rewriting code that uses this magic.<p>Or running both in ci with different configurations.</div><br/></div></div></div></div></div></div><div id="39416937" class="c"><input type="checkbox" id="c-39416937" checked=""/><div class="controls bullet"><span class="by">_ZeD_</span><span>|</span><a href="#39416757">prev</a><span>|</span><a href="#39416959">next</a><span>|</span><label class="collapse" for="c-39416937">[-]</label><label class="expand" for="c-39416937">[2 more]</label></div><br/><div class="children"><div class="content">(eclipse+pydev - for the IDE part) + mypy (better dmypy for performance) + ruff (both as linter and as formatter) is the way I go.<p>an in my pyproject I set the strict mode for mypy, and almost all rules for rust with extend-select</div><br/><div id="39416978" class="c"><input type="checkbox" id="c-39416978" checked=""/><div class="controls bullet"><span class="by">v3ss0n</span><span>|</span><a href="#39416937">parent</a><span>|</span><a href="#39416959">next</a><span>|</span><label class="collapse" for="c-39416978">[-]</label><label class="expand" for="c-39416978">[1 more]</label></div><br/><div class="children"><div class="content">Why eclipse and pydev? It is a lot slower than vs code</div><br/></div></div></div></div><div id="39416959" class="c"><input type="checkbox" id="c-39416959" checked=""/><div class="controls bullet"><span class="by">MrJohz</span><span>|</span><a href="#39416937">prev</a><span>|</span><a href="#39417050">next</a><span>|</span><label class="collapse" for="c-39416959">[-]</label><label class="expand" for="c-39416959">[3 more]</label></div><br/><div class="children"><div class="content">My experience is pretty negative with all of them, I would be almost more tempted to ignore type checking in Python until it has drastically improved. In particular, if you&#x27;re experienced with Typescript, you&#x27;re probably going to be very disappointed when trying to do similar things in Python.<p>The most recent one I&#x27;ve tried was Pyright. Pyright is faster than Mypy, and can also be configured to be quite strict, both big plus points for me. Unfortunately, in practice it ended up being far too strict in weird ways, and therefore difficult to work around with libraries that don&#x27;t share its idiosyncratic assumptions.<p>For example, in Typescript there&#x27;s an unknown type, which you can&#x27;t do anything with unless you check its runtime type first. It&#x27;s a clever way to add a true dynamic type to the type system without losing type safety. In Pyright there&#x27;s a similar Unknown type, but in strict mode the type checker simply throws an error if anything is ever unknown. For me, this turned out to be particularly painful when using library types that involved generic state. Because I wasn&#x27;t using that state, I didn&#x27;t set a type for it, and it defaulted to Unknown. But that meant that an object had Unknown properties (that I was never using) which meant the type checker kept on failing. Moreover, because Python&#x27;s generics story is pretty miserable, I couldn&#x27;t figure out how to set the type to something not Unknown. And I couldn&#x27;t figure out how to disable the error because Pyright&#x27;s documentation is so poor. I genuinely spent a day of work on this problem, then disabled type checking completely because that was the easiest option.<p>I haven&#x27;t used Mypy for over a year at this point, so things may well have changed, but my memory was that where Pyright is overly pedantic, Mypy was overly lax. It was also a lot slower, and had similarly poor documentation. The main reason I switched was that I was still regularly running into runtime type errors - the very errors that the type system was meant to help me avoid.<p>In both cases, I found the biggest problem was that neither tool seemed to go as far as Typescript in terms of modelling real-world Python code. What I mean by that is that idiomatic Typescript usually looks a lot like idiomatic Javascript in terms of the patterns and features used, because the Typescript team have put a lot of effort in to ensure that Typescript types represent how Javascript is actually used.<p>On the other hand idiomatic typed Python typically seems to look very different from idiomatic untyped Python, in large part because with types, you end up limited to about 1&#x2F;4 of the surface area of the language. (This is why a lot of major libraries or tools come with type checker plugins because their library&#x27;s behaviour cannot be described purely in terms of types.) Typed Python then ends up looking like a weird Java variant.<p>If I were going to add a type checker to my Python code again, I&#x27;d probably go for Mypy because it seems more like the standard and had marginally better documentation. But right now, I have the Pylance plugin installed in my IDE and that&#x27;s about it - there&#x27;s no type checking in CI, I just hope that I catch all the obvious cases with good enough testing. Thankfully the Python side of my work is pretty minimal, a few hundred lines of code at most. If I had a bigger Python project I might revisit this situation, but I&#x27;d be more tempted to just avoid Python for bigger projects.</div><br/><div id="39417028" class="c"><input type="checkbox" id="c-39417028" checked=""/><div class="controls bullet"><span class="by">a-dub</span><span>|</span><a href="#39416959">parent</a><span>|</span><a href="#39416991">next</a><span>|</span><label class="collapse" for="c-39417028">[-]</label><label class="expand" for="c-39417028">[1 more]</label></div><br/><div class="children"><div class="content">i&#x27;ve often thought a more interesting approach for python&#x27;s duck typing would be if the interpreter looked for anomalous types on assignment. so build a compact distribution of type &quot;shape&quot; for every assignment and then either throw exceptions or log warnings when apparent outliers are encountered.</div><br/></div></div><div id="39416991" class="c"><input type="checkbox" id="c-39416991" checked=""/><div class="controls bullet"><span class="by">v3ss0n</span><span>|</span><a href="#39416959">parent</a><span>|</span><a href="#39417028">prev</a><span>|</span><a href="#39417050">next</a><span>|</span><label class="collapse" for="c-39416991">[-]</label><label class="expand" for="c-39416991">[1 more]</label></div><br/><div class="children"><div class="content">Very good points. Did you also tried ignoring some rules that are overly strict? Or reduce them to warnings?</div><br/></div></div></div></div><div id="39417050" class="c"><input type="checkbox" id="c-39417050" checked=""/><div class="controls bullet"><span class="by">meitham</span><span>|</span><a href="#39416959">prev</a><span>|</span><a href="#39416704">next</a><span>|</span><label class="collapse" for="c-39417050">[-]</label><label class="expand" for="c-39417050">[1 more]</label></div><br/><div class="children"><div class="content">The only useful types to add are Cython 3, otherwise adding more letters with no benefit reduces readability and reminds me of “public static void main”.</div><br/></div></div><div id="39416704" class="c"><input type="checkbox" id="c-39416704" checked=""/><div class="controls bullet"><span class="by">theusus</span><span>|</span><a href="#39417050">prev</a><span>|</span><a href="#39417310">next</a><span>|</span><label class="collapse" for="c-39416704">[-]</label><label class="expand" for="c-39416704">[1 more]</label></div><br/><div class="children"><div class="content">mypy is the most popular but if you want to use an extension then pyright from MS gave best experience for me.</div><br/></div></div><div id="39417310" class="c"><input type="checkbox" id="c-39417310" checked=""/><div class="controls bullet"><span class="by">owenpalmer</span><span>|</span><a href="#39416704">prev</a><span>|</span><a href="#39416716">next</a><span>|</span><label class="collapse" for="c-39417310">[-]</label><label class="expand" for="c-39417310">[1 more]</label></div><br/><div class="children"><div class="content">Nim</div><br/></div></div><div id="39416716" class="c"><input type="checkbox" id="c-39416716" checked=""/><div class="controls bullet"><span class="by">breakds</span><span>|</span><a href="#39417310">prev</a><span>|</span><a href="#39416770">next</a><span>|</span><label class="collapse" for="c-39416716">[-]</label><label class="expand" for="c-39416716">[1 more]</label></div><br/><div class="children"><div class="content">I have been using pyright with lsp in emacs and can recommend.</div><br/></div></div><div id="39416770" class="c"><input type="checkbox" id="c-39416770" checked=""/><div class="controls bullet"><span class="by">kelsolaar</span><span>|</span><a href="#39416716">prev</a><span>|</span><a href="#39416955">next</a><span>|</span><label class="collapse" for="c-39416770">[-]</label><label class="expand" for="c-39416770">[2 more]</label></div><br/><div class="children"><div class="content">Pyright is much faster than Mypy, we changed some times ago and went from something like 20 mins to less than 2.</div><br/><div id="39416865" class="c"><input type="checkbox" id="c-39416865" checked=""/><div class="controls bullet"><span class="by">zx8080</span><span>|</span><a href="#39416770">parent</a><span>|</span><a href="#39416955">next</a><span>|</span><label class="collapse" for="c-39416865">[-]</label><label class="expand" for="c-39416865">[1 more]</label></div><br/><div class="children"><div class="content">&gt; 20 mins to 2<p>For which codebase size?</div><br/></div></div></div></div><div id="39416730" class="c"><input type="checkbox" id="c-39416730" checked=""/><div class="controls bullet"><span class="by">thayne</span><span>|</span><a href="#39416955">prev</a><span>|</span><a href="#39416714">next</a><span>|</span><label class="collapse" for="c-39416730">[-]</label><label class="expand" for="c-39416730">[1 more]</label></div><br/><div class="children"><div class="content">I&#x27;ve used mypy for a while, but I&#x27;ve wondered if it is worth switching to pyright, pyre, or pytype.</div><br/></div></div><div id="39417081" class="c"><input type="checkbox" id="c-39417081" checked=""/><div class="controls bullet"><span class="by">bravura</span><span>|</span><a href="#39416885">prev</a><span>|</span><label class="collapse" for="c-39417081">[-]</label><label class="expand" for="c-39417081">[1 more]</label></div><br/><div class="children"><div class="content">I’ve used mypy for static checking but it’s too fussy.<p>I enjoy typeguard for dynamic checking using the @typechecked decorator. I haven’t tried beartype, but I know lucidrains uses it.</div><br/></div></div></div></div></div></div></div></body></html>