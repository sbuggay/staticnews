<!DOCTYPE html><html lang="en"><head><title>Static News</title><meta charSet="utf-8"/><meta name="description" content="Static delayed Hacker News."/><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1d1f21"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="application-name" content="Static News"/><meta name="apple-mobile-web-app-title" content="Static News"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="#1d1f21"/><link rel="preload" href="styles.css?v=1688374862775" as="style"/><link rel="stylesheet" href="styles.css?v=1688374862775"/></head><body><div id="container"><div id="inner"><header><a href="/">Static News</a><a href="/about">about</a></header><div id="content"><div><div id="title"><a href="https://github.com/rogerkeays/fluent">Fluent: Static Extension Methods for Java</a> <span class="domain">(<a href="https://github.com">github.com</a>)</span></div><div class="subtext"><span>rogerkeays</span> | <span>34 comments</span></div><br/><div><div id="36570069" class="c"><input type="checkbox" id="c-36570069" checked=""/><div class="controls bullet"><span class="by">haspok</span><span>|</span><a href="#36569713">next</a><span>|</span><label class="collapse" for="c-36570069">[-]</label><label class="expand" for="c-36570069">[7 more]</label></div><br/><div class="children"><div class="content">&gt; No annotations are required.<p>I appreciate the intent, but man is this like a minefield waiting to be walked over. Anyone who looks at the code will scratch their head and will not understand what is going on. An annotation would perhaps make it clearer.<p>Also, how about IDE support? I would argue it is at least as important as the feature itself.</div><br/><div id="36570384" class="c"><input type="checkbox" id="c-36570384" checked=""/><div class="controls bullet"><span class="by">hardware2win</span><span>|</span><a href="#36570069">parent</a><span>|</span><a href="#36570141">next</a><span>|</span><label class="collapse" for="c-36570384">[-]</label><label class="expand" for="c-36570384">[3 more]</label></div><br/><div class="children"><div class="content">In C# world they somehow manage to do it without all of this annotation oriented programming</div><br/><div id="36570427" class="c"><input type="checkbox" id="c-36570427" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36570069">root</a><span>|</span><a href="#36570384">parent</a><span>|</span><a href="#36570417">next</a><span>|</span><label class="collapse" for="c-36570427">[-]</label><label class="expand" for="c-36570427">[1 more]</label></div><br/><div class="children"><div class="content">Just to make it clear, Fluent does not use any annotations.</div><br/></div></div></div></div><div id="36570141" class="c"><input type="checkbox" id="c-36570141" checked=""/><div class="controls bullet"><span class="by">kitd</span><span>|</span><a href="#36570069">parent</a><span>|</span><a href="#36570384">prev</a><span>|</span><a href="#36570129">next</a><span>|</span><label class="collapse" for="c-36570141">[-]</label><label class="expand" for="c-36570141">[2 more]</label></div><br/><div class="children"><div class="content"><i>I appreciate the intent, but man is this like a minefield waiting to be walked over. Anyone who looks at the code will scratch their head and will not understand what is going on. An annotation would perhaps make it clearer.</i><p>That is the generic argument against extension methods wherever they appear. They are very confusing, until you get used to remembering their existence, then you know what to search for.<p><i>Also, how about IDE support? I would argue it is at least as important as the feature itself.</i><p>This is mentioned in TFA.</div><br/><div id="36570400" class="c"><input type="checkbox" id="c-36570400" checked=""/><div class="controls bullet"><span class="by">pdpi</span><span>|</span><a href="#36570069">root</a><span>|</span><a href="#36570141">parent</a><span>|</span><a href="#36570129">next</a><span>|</span><label class="collapse" for="c-36570400">[-]</label><label class="expand" for="c-36570400">[1 more]</label></div><br/><div class="children"><div class="content">Extension methods in a language that explicitly supports them and with good IDE support are perfectly fine. I love them in Kotlin. Extension methods as a compiler plugin that rewrites the AST... not so great. Great IDE support is a large part of what makes Java worth using, the last thing I need is to break that.</div><br/></div></div></div></div><div id="36570129" class="c"><input type="checkbox" id="c-36570129" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36570069">parent</a><span>|</span><a href="#36570141">prev</a><span>|</span><a href="#36569713">next</a><span>|</span><label class="collapse" for="c-36570129">[-]</label><label class="expand" for="c-36570129">[1 more]</label></div><br/><div class="children"><div class="content">Yes, IDE support would help developers find the method that is being called. This  is already quite a problem given we have complex class hierarchies and interfaces with default methods. I&#x27;m not sure I see the need for an annotation though.</div><br/></div></div></div></div><div id="36569713" class="c"><input type="checkbox" id="c-36569713" checked=""/><div class="controls bullet"><span class="by">bilalq</span><span>|</span><a href="#36570069">prev</a><span>|</span><a href="#36569916">next</a><span>|</span><label class="collapse" for="c-36569713">[-]</label><label class="expand" for="c-36569713">[3 more]</label></div><br/><div class="children"><div class="content">Looks similar to how you can use implicit classes in Scala[0]. They were definitely convenient for writing unit and integration tests, but difficult to read&#x2F;maintain. I feel like a pipe operator would be a much more useful alternative instead of syntactic sugar for presenting functions as object method calls.<p>[0]: <a href="https:&#x2F;&#x2F;www.baeldung.com&#x2F;scala&#x2F;implicit-classes" rel="nofollow noreferrer">https:&#x2F;&#x2F;www.baeldung.com&#x2F;scala&#x2F;implicit-classes</a></div><br/><div id="36570006" class="c"><input type="checkbox" id="c-36570006" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36569713">parent</a><span>|</span><a href="#36569916">next</a><span>|</span><label class="collapse" for="c-36570006">[-]</label><label class="expand" for="c-36570006">[2 more]</label></div><br/><div class="children"><div class="content">Oof... looks more object-oriented hell to me. I really like the way functional programming languages separate types from functions, and I&#x27;ve been adopting this pattern in my Java code. Extension methods let you do this and keep your fluent api. Thanks for the link though, I didn&#x27;t know about implicit classes.</div><br/><div id="36570307" class="c"><input type="checkbox" id="c-36570307" checked=""/><div class="controls bullet"><span class="by">twic</span><span>|</span><a href="#36569713">root</a><span>|</span><a href="#36570006">parent</a><span>|</span><a href="#36569916">next</a><span>|</span><label class="collapse" for="c-36570307">[-]</label><label class="expand" for="c-36570307">[1 more]</label></div><br/><div class="children"><div class="content">We did Scala at an old job and various kinds of implicits got us into so much trouble. I think if you use them judiciously, they&#x27;ll be fine, but you need quite a bit of experience and maturity to use them judiciously, which most of us lacked.</div><br/></div></div></div></div></div></div><div id="36569916" class="c"><input type="checkbox" id="c-36569916" checked=""/><div class="controls bullet"><span class="by">jillesvangurp</span><span>|</span><a href="#36569713">prev</a><span>|</span><a href="#36570254">next</a><span>|</span><label class="collapse" for="c-36569916">[-]</label><label class="expand" for="c-36569916">[7 more]</label></div><br/><div class="children"><div class="content">Nice, this is one of the features that makes using Kotlin with existing Java frameworks so nice. It can really cut down on the boiler plate Java is infamous for. You can define extension functions on any type, or type alias. So anything that looks like it could be shorter or is a bit repetitive, you just define an extension function to make that go away.</div><br/><div id="36569955" class="c"><input type="checkbox" id="c-36569955" checked=""/><div class="controls bullet"><span class="by">misja111</span><span>|</span><a href="#36569916">parent</a><span>|</span><a href="#36569952">next</a><span>|</span><label class="collapse" for="c-36569955">[-]</label><label class="expand" for="c-36569955">[4 more]</label></div><br/><div class="children"><div class="content">How does this cut down on boilerplate? The examples given on the website seem equally long.<p>assertNotEmpty(getHttpContent(createSharedUrl(website, &quot;styles.css&quot;)));<p>vs<p>website.createSharedUrl(&quot;styles.css&quot;).getHttpContent().assertNotEmpty();</div><br/><div id="36570224" class="c"><input type="checkbox" id="c-36570224" checked=""/><div class="controls bullet"><span class="by">tuyiown</span><span>|</span><a href="#36569916">root</a><span>|</span><a href="#36569955">parent</a><span>|</span><a href="#36569952">next</a><span>|</span><label class="collapse" for="c-36570224">[-]</label><label class="expand" for="c-36570224">[3 more]</label></div><br/><div class="children"><div class="content">Typically, boiler plate implemented by a standalone function is not easily discoverable, eg. no clear convention where to put it, does not look idiomatic on some usages syntax habits, and not suggested by auto completion in top results.<p>Extensions are searchable by syntax and naturally in a namespace, largely diminishing the risk of put it in in a single use function that will be quickly forgotten, and might seem obscure.<p>The code itself might not be much shorter, but you don&#x27;t introduce code looking weird, if it&#x27;s re-usable it&#x27;s now discoverable, and if your boilerplate contained a lot of micro adjustments on a larger glue code, this glue code is now shorter and way clearer.</div><br/><div id="36570341" class="c"><input type="checkbox" id="c-36570341" checked=""/><div class="controls bullet"><span class="by">misja111</span><span>|</span><a href="#36569916">root</a><span>|</span><a href="#36570224">parent</a><span>|</span><a href="#36570280">next</a><span>|</span><label class="collapse" for="c-36570341">[-]</label><label class="expand" for="c-36570341">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Extensions are searchable by syntax<p>This would be very useful. But how are these extension methods more searchable by syntax than the &#x27;old fashioned&#x27; static util methods?
I admit I haven&#x27;t tried, but I suspect that code completion in my IDE wouldn&#x27;t include these extension methods.</div><br/></div></div><div id="36570280" class="c"><input type="checkbox" id="c-36570280" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36569916">root</a><span>|</span><a href="#36570224">parent</a><span>|</span><a href="#36570341">prev</a><span>|</span><a href="#36569952">next</a><span>|</span><label class="collapse" for="c-36570280">[-]</label><label class="expand" for="c-36570280">[1 more]</label></div><br/><div class="children"><div class="content">Also, creating a subclass just to add extension methods is definitely boiler plate. Util classes too, though they are useful for packaging functions at least.</div><br/></div></div></div></div></div></div><div id="36569952" class="c"><input type="checkbox" id="c-36569952" checked=""/><div class="controls bullet"><span class="by">MrBuddyCasino</span><span>|</span><a href="#36569916">parent</a><span>|</span><a href="#36569955">prev</a><span>|</span><a href="#36570254">next</a><span>|</span><label class="collapse" for="c-36569952">[-]</label><label class="expand" for="c-36569952">[2 more]</label></div><br/><div class="children"><div class="content">When you start transforming the AST, that might be a sign you should switch languages. Kotlin is nice, why not use it.</div><br/><div id="36570037" class="c"><input type="checkbox" id="c-36570037" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36569916">root</a><span>|</span><a href="#36569952">parent</a><span>|</span><a href="#36570254">next</a><span>|</span><label class="collapse" for="c-36570037">[-]</label><label class="expand" for="c-36570037">[1 more]</label></div><br/><div class="children"><div class="content">Kotlin is great, but it is a fairly heavy dependency if all you want is extension methods. Java has mostly caught up in many other aspects, so I&#x27;m experimenting with Java + one or two compiler hacks. Checked exceptions are my next target...</div><br/></div></div></div></div></div></div><div id="36570254" class="c"><input type="checkbox" id="c-36570254" checked=""/><div class="controls bullet"><span class="by">taraparo</span><span>|</span><a href="#36569916">prev</a><span>|</span><a href="#36570258">next</a><span>|</span><label class="collapse" for="c-36570254">[-]</label><label class="expand" for="c-36570254">[2 more]</label></div><br/><div class="children"><div class="content">I like the way static extensions are done in Haxe <a href="https:&#x2F;&#x2F;haxe.org&#x2F;manual&#x2F;lf-static-extension.html" rel="nofollow noreferrer">https:&#x2F;&#x2F;haxe.org&#x2F;manual&#x2F;lf-static-extension.html</a><p>Using macros you can auto enable them for all types in a project, package, or module.<p>And opposite to Dart you don&#x27;t need to define the extension methods in special extension classes but regular utility classes or modules.</div><br/><div id="36570315" class="c"><input type="checkbox" id="c-36570315" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36570254">parent</a><span>|</span><a href="#36570258">next</a><span>|</span><label class="collapse" for="c-36570315">[-]</label><label class="expand" for="c-36570315">[1 more]</label></div><br/><div class="children"><div class="content">Interesting. Do you need to put the extension method in a utility class at all though? Could we put it in the Main class in the example?</div><br/></div></div></div></div><div id="36570258" class="c"><input type="checkbox" id="c-36570258" checked=""/><div class="controls bullet"><span class="by">twic</span><span>|</span><a href="#36570254">prev</a><span>|</span><a href="#36569712">next</a><span>|</span><label class="collapse" for="c-36570258">[-]</label><label class="expand" for="c-36570258">[1 more]</label></div><br/><div class="children"><div class="content">&gt; Fluent will make you a more productive programmer<p>Need to see some benchmarks for this, chief.<p>Still, cool hack, and it&#x27;s heartening to see that there&#x27;s enough extensibility to make this possible in 150 lines of code!</div><br/></div></div><div id="36569712" class="c"><input type="checkbox" id="c-36569712" checked=""/><div class="controls bullet"><span class="by">kitd</span><span>|</span><a href="#36570258">prev</a><span>|</span><a href="#36570007">next</a><span>|</span><label class="collapse" for="c-36569712">[-]</label><label class="expand" for="c-36569712">[2 more]</label></div><br/><div class="children"><div class="content"><i>Known Issues</i><p><i>Fluent will make you a more productive programmer, which may go against corporate policy.</i><p>Ha!<p>Anyway, nice work. Similar to D&#x27;s uniform function call syntax.<p><a href="https:&#x2F;&#x2F;tour.dlang.org&#x2F;tour&#x2F;en&#x2F;gems&#x2F;uniform-function-call-syntax-ufcs" rel="nofollow noreferrer">https:&#x2F;&#x2F;tour.dlang.org&#x2F;tour&#x2F;en&#x2F;gems&#x2F;uniform-function-call-sy...</a><p>There&#x27;s some more use cases in that link too.</div><br/><div id="36570151" class="c"><input type="checkbox" id="c-36570151" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36569712">parent</a><span>|</span><a href="#36570007">next</a><span>|</span><label class="collapse" for="c-36570151">[-]</label><label class="expand" for="c-36570151">[1 more]</label></div><br/><div class="children"><div class="content">This! It even has a fancy name to satisfy the purists.</div><br/></div></div></div></div><div id="36570007" class="c"><input type="checkbox" id="c-36570007" checked=""/><div class="controls bullet"><span class="by">littlecranky67</span><span>|</span><a href="#36569712">prev</a><span>|</span><a href="#36569953">next</a><span>|</span><label class="collapse" for="c-36570007">[-]</label><label class="expand" for="c-36570007">[5 more]</label></div><br/><div class="children"><div class="content">Extension methods have been available in C# since C# 3.0 (released 2007) and a great addition IMHO. In recent .NET versions, especially ASP.NET, they are heavily relied upon for core framework tasks. Wonder why Java never got them officially.</div><br/><div id="36570087" class="c"><input type="checkbox" id="c-36570087" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36570007">parent</a><span>|</span><a href="#36569953">next</a><span>|</span><label class="collapse" for="c-36570087">[-]</label><label class="expand" for="c-36570087">[4 more]</label></div><br/><div class="children"><div class="content">I can only speculate, but I <i>think</i> it is because extension methods can be shadowed if a vendor adds a method of the same name to the class you are extending. Of course, that depends on how you resolve methods.<p>In java, this would be a compile time problem, because once the class is compiled the extension method is called with `invokestatic` rather than `invokevirtual` used by class methods.<p>There is also a healthy fear of change in the java community that could explain it.</div><br/><div id="36570362" class="c"><input type="checkbox" id="c-36570362" checked=""/><div class="controls bullet"><span class="by">hyperpape</span><span>|</span><a href="#36570007">root</a><span>|</span><a href="#36570087">parent</a><span>|</span><a href="#36570331">next</a><span>|</span><label class="collapse" for="c-36570362">[-]</label><label class="expand" for="c-36570362">[1 more]</label></div><br/><div class="children"><div class="content">Brian Goetz has written on the subject. <a href="https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;29494337" rel="nofollow noreferrer">https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;29494337</a><p>I think you can’t look at the past 5 years and the features that are being floated for Java 21 and future releases and think fear of change is the issue—the language is now changing rapidly.</div><br/></div></div><div id="36570331" class="c"><input type="checkbox" id="c-36570331" checked=""/><div class="controls bullet"><span class="by">throwaway2037</span><span>|</span><a href="#36570007">root</a><span>|</span><a href="#36570087">parent</a><span>|</span><a href="#36570362">prev</a><span>|</span><a href="#36569953">next</a><span>|</span><label class="collapse" for="c-36570331">[-]</label><label class="expand" for="c-36570331">[2 more]</label></div><br/><div class="children"><div class="content"><p><pre><code>    There is also a healthy fear of change in the java community that could explain it.
</code></pre>
Nice jab at the end!  Java (well, really Sun, then Oracle) prioritises backwards compatibility over every other goal.  So, does Win32 API.  Does DotNet do the same?  I&#x27;m unsure.<p>This also explains why it took so long for Java to get lambdas.  And, generics with primitive types, e.g., ArrayList&lt;int&gt;, via Project Valhalla.  It is a super hard problem to upgrade Java without breaking old stuff.  Hence, it is a multi-year R&amp;D effort.</div><br/><div id="36570356" class="c"><input type="checkbox" id="c-36570356" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36570007">root</a><span>|</span><a href="#36570331">parent</a><span>|</span><a href="#36569953">next</a><span>|</span><label class="collapse" for="c-36570356">[-]</label><label class="expand" for="c-36570356">[1 more]</label></div><br/><div class="children"><div class="content">Yeh, backwards compatibility is one of the biggest selling points of Java. Hopefully, Fluent will show that we can change one or two lines of compiler code and not burn down the whole house. We&#x27;ll see.</div><br/></div></div></div></div></div></div></div></div><div id="36569953" class="c"><input type="checkbox" id="c-36569953" checked=""/><div class="controls bullet"><span class="by">naruhodo</span><span>|</span><a href="#36570007">prev</a><span>|</span><a href="#36569703">next</a><span>|</span><label class="collapse" for="c-36569953">[-]</label><label class="expand" for="c-36569953">[2 more]</label></div><br/><div class="children"><div class="content">Does this mean I can extend the interface of existing, possibly final classes, e.g. to add extra (notional) methods to java.lang.String?</div><br/><div id="36570040" class="c"><input type="checkbox" id="c-36570040" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36569953">parent</a><span>|</span><a href="#36569703">next</a><span>|</span><label class="collapse" for="c-36570040">[-]</label><label class="expand" for="c-36570040">[1 more]</label></div><br/><div class="children"><div class="content">Yes.</div><br/></div></div></div></div><div id="36569703" class="c"><input type="checkbox" id="c-36569703" checked=""/><div class="controls bullet"><span class="by">_ZeD_</span><span>|</span><a href="#36569953">prev</a><span>|</span><label class="collapse" for="c-36569703">[-]</label><label class="expand" for="c-36569703">[4 more]</label></div><br/><div class="children"><div class="content">I&#x27;m wondering if it&#x27;s possible to merge it into lombok</div><br/><div id="36569780" class="c"><input type="checkbox" id="c-36569780" checked=""/><div class="controls bullet"><span class="by">_ZeD_</span><span>|</span><a href="#36569703">parent</a><span>|</span><label class="collapse" for="c-36569780">[-]</label><label class="expand" for="c-36569780">[3 more]</label></div><br/><div class="children"><div class="content">wait, it&#x27;s like <a href="https:&#x2F;&#x2F;projectlombok.org&#x2F;features&#x2F;experimental&#x2F;ExtensionMethod" rel="nofollow noreferrer">https:&#x2F;&#x2F;projectlombok.org&#x2F;features&#x2F;experimental&#x2F;ExtensionMet...</a></div><br/><div id="36569954" class="c"><input type="checkbox" id="c-36569954" checked=""/><div class="controls bullet"><span class="by">rogerkeays</span><span>|</span><a href="#36569703">root</a><span>|</span><a href="#36569780">parent</a><span>|</span><a href="#36569850">next</a><span>|</span><label class="collapse" for="c-36569954">[-]</label><label class="expand" for="c-36569954">[1 more]</label></div><br/><div class="children"><div class="content">I never saw the need for annotating extension methods like in Lombok or Manifold . Lombok is great for other stuff though.</div><br/></div></div><div id="36569850" class="c"><input type="checkbox" id="c-36569850" checked=""/><div class="controls bullet"><span class="by">sam_lowry_</span><span>|</span><a href="#36569703">root</a><span>|</span><a href="#36569780">parent</a><span>|</span><a href="#36569954">prev</a><span>|</span><label class="collapse" for="c-36569850">[-]</label><label class="expand" for="c-36569850">[1 more]</label></div><br/><div class="children"><div class="content">There are good reasons lombok ExtensionMethods never left the experimental status.</div><br/></div></div></div></div></div></div></div></div></div></div></div></body></html>